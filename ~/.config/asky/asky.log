2026-02-08 02:27:32,333 - asky.research.source_shortlist - DEBUG - source_shortlist disabled for mode=standard in 0.00ms
2026-02-08 02:27:32,333 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.24ms
2026-02-08 02:27:32,337 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.00ms
2026-02-08 02:27:32,359 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 02:27:32,359 - asky.core.api_client - INFO - Sending request to LLM: test-model
2026-02-08 02:27:32,359 - asky.core.api_client - DEBUG - Payload: {"model": "test-model", "messages": [{"role": "user", "content": "test"}], "tools": [], "tool_choice": "auto"}
2026-02-08 02:27:32,359 - asky.core.api_client - INFO - [test] Sent: 1 tokens
2026-02-08 02:27:32,359 - asky.core.engine - ERROR - API Error 400: 400 Client Error: Bad Request
2026-02-08 02:27:32,360 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 02:27:32,360 - asky.core.engine - INFO - Context threshold reached (628/500). Compacting...
2026-02-08 02:27:32,360 - asky.core.engine - INFO - Compaction failed to preserve history. Returning minimal context: 625 tokens.
2026-02-08 02:27:32,361 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 02:27:32,362 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 02:27:32,363 - asky.core.engine - INFO - Context threshold reached (520/100). Compacting...
2026-02-08 02:27:32,363 - asky.core.engine - DEBUG - [Smart Compaction] Found summary for URL https://example.com/long-article (dict). Replacing content.
2026-02-08 02:27:32,363 - asky.core.engine - INFO - Smart compaction successful. Reduced from 520 to 42
2026-02-08 02:27:32,364 - asky.tools - INFO - Executing custom tool command: ls "."
2026-02-08 02:27:32,365 - asky.tools - INFO - Executing custom tool command: ls "/tmp/test"
2026-02-08 02:27:32,367 - asky.tools - INFO - Executing custom tool command: echo "hello world"
2026-02-08 02:27:32,368 - asky.tools - INFO - Executing custom tool command: echo "already quoted"
2026-02-08 02:27:32,369 - asky.tools - INFO - Executing custom tool command: echo "test"
2026-02-08 02:27:32,378 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 02:27:32,378 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 02:27:32,378 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 02:27:32,379 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 02:27:32,379 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 02:27:32,379 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 02:27:32,380 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 02:27:32,380 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 02:27:32,380 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 02:27:32,380 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 02:27:32,380 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 02:27:32,382 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 02:27:32,382 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 02:27:32,382 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 02:27:32,382 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 02:27:32,382 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 02:27:32,382 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 02:27:32,382 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 02:27:32,382 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 02:27:32,382 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 02:27:32,382 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 02:27:32,382 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 02:27:32,384 - asky.email_sender - ERROR - SMTP credentials not configured. Please set ASKY_SMTP_USER and ASKY_SMTP_PASSWORD.
2026-02-08 02:27:32,385 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 02:27:32,385 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 02:27:32,385 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 02:27:32,385 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 02:27:32,385 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 02:27:32,385 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 02:27:32,385 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 02:27:32,385 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 02:27:32,385 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 02:27:32,385 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 02:27:32,385 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 02:27:32,386 - asky.email_sender - ERROR - Failed to send email: Auth failed
2026-02-08 02:27:32,407 - asky.rendering - WARNING - Template not found at <MagicMock name='TEMPLATE_PATH' id='4584605408'>
2026-02-08 02:27:32,409 - asky.rendering - DEBUG - Extracted title for filename: Test Content
2026-02-08 02:27:32,437 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 02:27:32,437 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [{"role": "user", "content": "Hi"}], "tools": null, "tool_choice": "auto"}
2026-02-08 02:27:32,437 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 02:27:32,437 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 02:27:32,438 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 02:27:32,438 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 02:27:32,438 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 02:27:32,438 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 1 seconds...
2026-02-08 02:27:32,438 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 02:27:32,439 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 02:27:32,439 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 02:27:32,439 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 02:27:32,439 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 5 seconds...
2026-02-08 02:27:32,439 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 02:27:32,441 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 02:27:32,441 - asky.core.engine - DEBUG - Tool call [71 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 02:27:32,441 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 02:27:32,441 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 02:27:32,441 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 02:27:32,445 - asky.rendering - INFO - [Opening browser: /path/to/archive/file.html]
2026-02-08 02:27:32,446 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 02:27:32,446 - asky.core.engine - DEBUG - Tool call [93 chrs]: {'id': 'call_123', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 02:27:32,446 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 02:27:32,446 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 02:27:32,446 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 02:27:32,447 - asky.core.engine - INFO - Starting turn 1/2
2026-02-08 02:27:32,447 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 02:27:32,447 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 02:27:32,447 - asky.core.engine - INFO - Starting turn 2/2
2026-02-08 02:27:32,447 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_2', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 02:27:32,447 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 02:27:32,447 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 02:27:32,447 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 02:27:32,448 - asky.core.engine - INFO - Starting turn 1/1
2026-02-08 02:27:32,448 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 02:27:32,448 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 02:27:32,448 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 02:27:32,448 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 02:27:32,450 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 02:27:32,450 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [{"role": "user", "content": "Hi"}], "temperature": 0.5, "top_p": 0.9, "tools": null, "tool_choice": "auto"}
2026-02-08 02:27:32,451 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 02:27:32,451 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 02:27:32,452 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 02:27:32,452 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [], "temperature": 0.7, "tools": null, "tool_choice": "auto"}
2026-02-08 02:27:32,452 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 02:27:32,452 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 02:27:32,472 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 02:27:32,473 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 02:27:32,476 - asky.push_data - ERROR - Failed to push data to 'test_endpoint': Network error
2026-02-08 02:27:32,477 - asky.push_data - ERROR - Failed to build payload for endpoint 'test_endpoint': Missing required parameter: title
2026-02-08 02:27:32,478 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 02:27:32,494 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:32,498 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:32,499 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 02:27:32,503 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:32,503 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 02:27:32,846 - chromadb.config - DEBUG - Starting component System
2026-02-08 02:27:32,846 - chromadb.config - DEBUG - Starting component Posthog
2026-02-08 02:27:32,881 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 02:27:32,886 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:32,886 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 02:27:32,888 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 02:27:32,892 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:32,893 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 02:27:32,894 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 02:27:32,898 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:32,902 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:32,906 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:32,907 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 02:27:32,911 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:32,911 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 02:27:32,915 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:32,916 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 02:27:32,920 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:32,921 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 02:27:32,925 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:32,925 - asky.research.cache - DEBUG - Cached URL http://example1.com with id=1
2026-02-08 02:27:32,926 - asky.research.cache - DEBUG - Cached URL http://example2.com with id=2
2026-02-08 02:27:32,930 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:32,931 - asky.research.cache - DEBUG - Scheduled background summarization for http://example.com
2026-02-08 02:27:32,931 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 02:27:32,931 - asky.research.cache - DEBUG - Background summarization completed for http://example.com
2026-02-08 02:27:33,439 - asky.research.cache - DEBUG - Shutting down research cache executor...
2026-02-08 02:27:33,439 - asky.research.cache - DEBUG - Research cache executor shutdown complete
2026-02-08 02:27:33,453 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:33,463 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:33,470 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:33,476 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:33,482 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:33,483 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 02:27:33,488 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:33,489 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 02:27:33,494 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:33,499 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:33,504 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:33,504 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 02:27:33,505 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 02:27:33,505 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 02:27:33,509 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:33,510 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 02:27:33,510 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 02:27:33,511 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 02:27:33,511 - asky.research.cache - DEBUG - Saved finding id=4
2026-02-08 02:27:33,511 - asky.research.cache - DEBUG - Saved finding id=5
2026-02-08 02:27:33,512 - asky.research.cache - DEBUG - Saved finding id=6
2026-02-08 02:27:33,512 - asky.research.cache - DEBUG - Saved finding id=7
2026-02-08 02:27:33,513 - asky.research.cache - DEBUG - Saved finding id=8
2026-02-08 02:27:33,513 - asky.research.cache - DEBUG - Saved finding id=9
2026-02-08 02:27:33,513 - asky.research.cache - DEBUG - Saved finding id=10
2026-02-08 02:27:33,517 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:33,518 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 02:27:33,518 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 02:27:33,519 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 02:27:33,522 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:33,523 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 02:27:33,523 - asky.research.cache - DEBUG - Deleted finding id=1
2026-02-08 02:27:33,527 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:33,530 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:33,531 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 02:27:33,535 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:33,536 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 02:27:33,536 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 02:27:33,540 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:33,540 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 02:27:33,544 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:33,544 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 02:27:33,567 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 02:27:33,568 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 02:27:33,568 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 02:27:33,568 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 02:27:33,569 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 02:27:33,569 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 02:27:33,569 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 02:27:33,570 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 02:27:33,571 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 02:27:33,571 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 02:27:33,572 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 02:27:33,572 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 02:27:33,572 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 02:27:33,573 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 02:27:33,574 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 02:27:33,574 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 02:27:33,575 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 02:27:33,575 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 02:27:33,575 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 02:27:33,575 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 02:27:33,575 - asky.research.embeddings - INFO - Loaded fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' successfully. Update research.embedding.model to avoid repeated primary model load failures.
2026-02-08 02:27:33,576 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 02:27:33,576 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 02:27:33,576 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 02:27:33,576 - asky.research.embeddings - DEBUG - Embedding model 'sentence-transformers/all-MiniLM-L6-v2' not available locally, attempting remote load.
2026-02-08 02:27:33,576 - asky.research.embeddings - ERROR - Failed to load sentence-transformer model 'bad/model': cannot load bad/model
2026-02-08 02:27:33,576 - asky.research.embeddings - ERROR - Fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' also failed: cannot load sentence-transformers/all-MiniLM-L6-v2
2026-02-08 02:27:33,577 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=cached/model, device=cpu
2026-02-08 02:27:33,577 - asky.research.embeddings - DEBUG - Loaded embedding model 'cached/model' from local Hugging Face cache.
2026-02-08 02:27:33,577 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=trunc/model, device=cpu
2026-02-08 02:27:33,577 - asky.research.embeddings - DEBUG - Loaded embedding model 'trunc/model' from local Hugging Face cache.
2026-02-08 02:27:33,581 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=gaianet/text-embedding-nomic-embed-text-v1.5-embedding, device=cpu
2026-02-08 02:27:33,585 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 02:27:33,585 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=gaianet/text-embedding-nomic-embed-text-v1.5-embedding, device=cpu
2026-02-08 02:27:33,587 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 02:27:33,588 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 02:27:33,589 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 02:27:33,591 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 02:27:33,593 - asky.research.tools - DEBUG - Cache hit for http://b.com
2026-02-08 02:27:33,593 - asky.research.tools - DEBUG - Cache hit for http://a.com
2026-02-08 02:27:33,595 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 02:27:33,596 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 02:27:33,607 - asky.research.tools - DEBUG - Generating chunk embeddings for http://example.com
2026-02-08 02:27:33,608 - asky.research.tools - ERROR - RAG retrieval failed for http://example.com: DB error
2026-02-08 02:27:33,617 - asky.research.tools - WARNING - Finding embedding failed (will still be saved): Embedding API unavailable
2026-02-08 02:27:33,621 - asky.research.tools - WARNING - Semantic search unavailable: API unavailable
2026-02-08 02:27:33,641 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 02:27:33,651 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 02:27:33,663 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 02:27:33,663 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 02:27:33,673 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 02:27:33,673 - asky.research.vector_store - WARNING - Chroma link query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 02:27:33,690 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 02:27:33,698 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 02:27:33,701 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 02:27:33,712 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 02:27:33,713 - asky.research.vector_store - WARNING - Chroma hybrid query failed; using SQLite dense scores: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 02:27:33,725 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 02:27:33,728 - asky.research.vector_store - WARNING - Embedding count mismatch: 2 vs 3
2026-02-08 02:27:33,728 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 02:27:33,739 - asky.research.vector_store - DEBUG - Stored 5 chunk embeddings for cache_id=1
2026-02-08 02:27:33,739 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 02:27:33,748 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 02:27:33,760 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 02:27:33,764 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 02:27:33,776 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 02:27:33,780 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 02:27:33,787 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 02:27:33,792 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 02:27:33,812 - asky.core.session_manager - INFO - Session 1 reached threshold (10/5). Compacting...
2026-02-08 02:27:33,812 - asky.core.session_manager - INFO - Found 1 messages to compact for session 1
2026-02-08 02:27:33,812 - asky.core.session_manager - INFO - Compacted content length: 9 chars
2026-02-08 02:27:33,813 - asky.core.session_manager - INFO - Compaction saved for session 1
2026-02-08 02:27:33,822 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=True
2026-02-08 02:27:33,822 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=46 results=2 elapsed=0.00ms
2026-02-08 02:27:33,822 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 02:27:33,822 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://docs.example.com/ai-safety text_len=47 title_len=19 elapsed=0.00ms source_type=search
2026-02-08 02:27:33,822 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://blog.example.com/plants text_len=52 title_len=13 elapsed=0.00ms source_type=search
2026-02-08 02:27:33,822 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 02:27:33,823 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=46 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 02:27:33,823 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://docs.example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 02:27:33,823 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://blog.example.com/plants semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 02:27:33,823 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.15ms fetch=0.06ms score=0.07ms total=0.30ms seeds=0 query_len=46 keyphrases=0 shortlisted=2 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 02:27:33,824 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 02:27:33,824 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 02:27:33,824 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 02:27:33,824 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 02:27:33,824 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 02:27:33,824 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 02:27:33,824 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 02:27:33,824 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.07ms fetch=0.03ms score=0.05ms total=0.17ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 02:27:33,825 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=2 selected=2 added=2 elapsed=0.01ms warning=None
2026-02-08 02:27:33,825 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=2 elapsed=0.04ms max_pages=1 per_page=10
2026-02-08 02:27:33,825 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 02:27:33,825 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=3 deduped=3 max_candidates=30
2026-02-08 02:27:33,825 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=50 title_len=9 elapsed=0.00ms source_type=seed
2026-02-08 02:27:33,825 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/ai-safety text_len=51 title_len=15 elapsed=0.00ms source_type=seed_link
2026-02-08 02:27:33,825 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/garden text_len=51 title_len=11 elapsed=0.00ms source_type=seed_link
2026-02-08 02:27:33,825 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=3 attempted=3 extracted=3 max_fetch=15
2026-02-08 02:27:33,825 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=39 docs=3 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 02:27:33,825 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=0.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=-0.0500
2026-02-08 02:27:33,825 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 02:27:33,825 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/garden semantic=0.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=-0.0500
2026-02-08 02:27:33,825 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.10ms fetch=0.07ms score=0.08ms total=0.26ms seeds=1 query_len=39 keyphrases=0 shortlisted=3 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 3, 'candidate_deduped': 3, 'fetch_calls': 3, 'fetch_success': 3, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 2, 'seed_link_added': 2, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 3} warnings=0
2026-02-08 02:27:33,827 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 02:27:33,827 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 02:27:33,827 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 02:27:33,827 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 02:27:33,827 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 02:27:33,827 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=31 docs=1
2026-02-08 02:27:33,827 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=-0.0500
2026-02-08 02:27:33,827 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.14ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 02:27:33,831 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:33,839 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 02:27:33,844 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:57,196 - asky.research.source_shortlist - DEBUG - source_shortlist disabled for mode=standard in 0.00ms
2026-02-08 02:27:57,196 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.20ms
2026-02-08 02:27:57,199 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.00ms
2026-02-08 02:27:57,218 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 02:27:57,218 - asky.core.api_client - INFO - Sending request to LLM: test-model
2026-02-08 02:27:57,218 - asky.core.api_client - DEBUG - Payload: {"model": "test-model", "messages": [{"role": "user", "content": "test"}], "tools": [], "tool_choice": "auto"}
2026-02-08 02:27:57,218 - asky.core.api_client - INFO - [test] Sent: 1 tokens
2026-02-08 02:27:57,218 - asky.core.engine - ERROR - API Error 400: 400 Client Error: Bad Request
2026-02-08 02:27:57,218 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 02:27:57,219 - asky.core.engine - INFO - Context threshold reached (628/500). Compacting...
2026-02-08 02:27:57,219 - asky.core.engine - INFO - Compaction failed to preserve history. Returning minimal context: 625 tokens.
2026-02-08 02:27:57,221 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 02:27:57,221 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 02:27:57,222 - asky.core.engine - INFO - Context threshold reached (520/100). Compacting...
2026-02-08 02:27:57,222 - asky.core.engine - DEBUG - [Smart Compaction] Found summary for URL https://example.com/long-article (dict). Replacing content.
2026-02-08 02:27:57,222 - asky.core.engine - INFO - Smart compaction successful. Reduced from 520 to 42
2026-02-08 02:27:57,223 - asky.tools - INFO - Executing custom tool command: ls "."
2026-02-08 02:27:57,224 - asky.tools - INFO - Executing custom tool command: ls "/tmp/test"
2026-02-08 02:27:57,225 - asky.tools - INFO - Executing custom tool command: echo "hello world"
2026-02-08 02:27:57,226 - asky.tools - INFO - Executing custom tool command: echo "already quoted"
2026-02-08 02:27:57,228 - asky.tools - INFO - Executing custom tool command: echo "test"
2026-02-08 02:27:57,234 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 02:27:57,235 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 02:27:57,235 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 02:27:57,235 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 02:27:57,235 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 02:27:57,236 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 02:27:57,236 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 02:27:57,236 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 02:27:57,236 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 02:27:57,236 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 02:27:57,237 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 02:27:57,238 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 02:27:57,238 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 02:27:57,238 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 02:27:57,238 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 02:27:57,238 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 02:27:57,238 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 02:27:57,238 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 02:27:57,238 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 02:27:57,238 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 02:27:57,238 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 02:27:57,238 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 02:27:57,239 - asky.email_sender - ERROR - SMTP credentials not configured. Please set ASKY_SMTP_USER and ASKY_SMTP_PASSWORD.
2026-02-08 02:27:57,240 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 02:27:57,240 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 02:27:57,240 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 02:27:57,240 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 02:27:57,240 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 02:27:57,240 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 02:27:57,240 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 02:27:57,240 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 02:27:57,240 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 02:27:57,240 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 02:27:57,240 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 02:27:57,241 - asky.email_sender - ERROR - Failed to send email: Auth failed
2026-02-08 02:27:57,258 - asky.rendering - WARNING - Template not found at <MagicMock name='TEMPLATE_PATH' id='5412046560'>
2026-02-08 02:27:57,260 - asky.rendering - DEBUG - Extracted title for filename: Test Content
2026-02-08 02:27:57,281 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 02:27:57,281 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [{"role": "user", "content": "Hi"}], "tools": null, "tool_choice": "auto"}
2026-02-08 02:27:57,281 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 02:27:57,281 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 02:27:57,282 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 02:27:57,282 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 02:27:57,282 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 02:27:57,282 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 1 seconds...
2026-02-08 02:27:57,282 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 02:27:57,283 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 02:27:57,283 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 02:27:57,283 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 02:27:57,283 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 5 seconds...
2026-02-08 02:27:57,283 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 02:27:57,284 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 02:27:57,284 - asky.core.engine - DEBUG - Tool call [71 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 02:27:57,284 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 02:27:57,285 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 02:27:57,285 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 02:27:57,288 - asky.rendering - INFO - [Opening browser: /path/to/archive/file.html]
2026-02-08 02:27:57,289 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 02:27:57,289 - asky.core.engine - DEBUG - Tool call [93 chrs]: {'id': 'call_123', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 02:27:57,289 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 02:27:57,290 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 02:27:57,290 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 02:27:57,291 - asky.core.engine - INFO - Starting turn 1/2
2026-02-08 02:27:57,291 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 02:27:57,291 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 02:27:57,291 - asky.core.engine - INFO - Starting turn 2/2
2026-02-08 02:27:57,291 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_2', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 02:27:57,291 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 02:27:57,291 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 02:27:57,291 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 02:27:57,292 - asky.core.engine - INFO - Starting turn 1/1
2026-02-08 02:27:57,292 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 02:27:57,292 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 02:27:57,292 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 02:27:57,292 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 02:27:57,294 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 02:27:57,294 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [{"role": "user", "content": "Hi"}], "temperature": 0.5, "top_p": 0.9, "tools": null, "tool_choice": "auto"}
2026-02-08 02:27:57,294 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 02:27:57,294 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 02:27:57,295 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 02:27:57,295 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [], "temperature": 0.7, "tools": null, "tool_choice": "auto"}
2026-02-08 02:27:57,295 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 02:27:57,295 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 02:27:57,313 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 02:27:57,314 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 02:27:57,317 - asky.push_data - ERROR - Failed to push data to 'test_endpoint': Network error
2026-02-08 02:27:57,318 - asky.push_data - ERROR - Failed to build payload for endpoint 'test_endpoint': Missing required parameter: title
2026-02-08 02:27:57,320 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 02:27:57,333 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:57,337 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:57,338 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 02:27:57,342 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:57,342 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 02:27:57,658 - chromadb.config - DEBUG - Starting component System
2026-02-08 02:27:57,658 - chromadb.config - DEBUG - Starting component Posthog
2026-02-08 02:27:57,669 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 02:27:57,674 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:57,674 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 02:27:57,676 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 02:27:57,680 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:57,680 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 02:27:57,682 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 02:27:57,695 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:57,700 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:57,705 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:57,705 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 02:27:57,709 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:57,710 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 02:27:57,713 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:57,714 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 02:27:57,718 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:57,719 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 02:27:57,724 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:57,725 - asky.research.cache - DEBUG - Cached URL http://example1.com with id=1
2026-02-08 02:27:57,725 - asky.research.cache - DEBUG - Cached URL http://example2.com with id=2
2026-02-08 02:27:57,729 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:57,730 - asky.research.cache - DEBUG - Scheduled background summarization for http://example.com
2026-02-08 02:27:57,730 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 02:27:57,731 - asky.research.cache - DEBUG - Background summarization completed for http://example.com
2026-02-08 02:27:58,238 - asky.research.cache - DEBUG - Shutting down research cache executor...
2026-02-08 02:27:58,238 - asky.research.cache - DEBUG - Research cache executor shutdown complete
2026-02-08 02:27:58,253 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:58,264 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:58,270 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:58,276 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:58,282 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:58,283 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 02:27:58,288 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:58,289 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 02:27:58,293 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:58,298 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:58,302 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:58,303 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 02:27:58,303 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 02:27:58,304 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 02:27:58,308 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:58,309 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 02:27:58,309 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 02:27:58,310 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 02:27:58,310 - asky.research.cache - DEBUG - Saved finding id=4
2026-02-08 02:27:58,311 - asky.research.cache - DEBUG - Saved finding id=5
2026-02-08 02:27:58,311 - asky.research.cache - DEBUG - Saved finding id=6
2026-02-08 02:27:58,312 - asky.research.cache - DEBUG - Saved finding id=7
2026-02-08 02:27:58,312 - asky.research.cache - DEBUG - Saved finding id=8
2026-02-08 02:27:58,312 - asky.research.cache - DEBUG - Saved finding id=9
2026-02-08 02:27:58,313 - asky.research.cache - DEBUG - Saved finding id=10
2026-02-08 02:27:58,317 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:58,318 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 02:27:58,318 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 02:27:58,319 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 02:27:58,322 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:58,323 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 02:27:58,324 - asky.research.cache - DEBUG - Deleted finding id=1
2026-02-08 02:27:58,327 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:58,331 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:58,332 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 02:27:58,336 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:58,337 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 02:27:58,337 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 02:27:58,341 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:58,341 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 02:27:58,345 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:58,345 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 02:27:58,367 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 02:27:58,368 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 02:27:58,368 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 02:27:58,369 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 02:27:58,369 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 02:27:58,370 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 02:27:58,370 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 02:27:58,370 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 02:27:58,371 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 02:27:58,371 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 02:27:58,372 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 02:27:58,373 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 02:27:58,373 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 02:27:58,374 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 02:27:58,374 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 02:27:58,374 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 02:27:58,375 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 02:27:58,375 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 02:27:58,375 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 02:27:58,375 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 02:27:58,375 - asky.research.embeddings - INFO - Loaded fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' successfully. Update research.embedding.model to avoid repeated primary model load failures.
2026-02-08 02:27:58,376 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 02:27:58,376 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 02:27:58,376 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 02:27:58,376 - asky.research.embeddings - DEBUG - Embedding model 'sentence-transformers/all-MiniLM-L6-v2' not available locally, attempting remote load.
2026-02-08 02:27:58,376 - asky.research.embeddings - ERROR - Failed to load sentence-transformer model 'bad/model': cannot load bad/model
2026-02-08 02:27:58,376 - asky.research.embeddings - ERROR - Fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' also failed: cannot load sentence-transformers/all-MiniLM-L6-v2
2026-02-08 02:27:58,377 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=cached/model, device=cpu
2026-02-08 02:27:58,377 - asky.research.embeddings - DEBUG - Loaded embedding model 'cached/model' from local Hugging Face cache.
2026-02-08 02:27:58,377 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=trunc/model, device=cpu
2026-02-08 02:27:58,377 - asky.research.embeddings - DEBUG - Loaded embedding model 'trunc/model' from local Hugging Face cache.
2026-02-08 02:27:58,381 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=gaianet/text-embedding-nomic-embed-text-v1.5-embedding, device=cpu
2026-02-08 02:27:58,385 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 02:27:58,385 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=gaianet/text-embedding-nomic-embed-text-v1.5-embedding, device=cpu
2026-02-08 02:27:58,387 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 02:27:58,388 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 02:27:58,389 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 02:27:58,391 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 02:27:58,392 - asky.research.tools - DEBUG - Cache hit for http://b.com
2026-02-08 02:27:58,393 - asky.research.tools - DEBUG - Cache hit for http://a.com
2026-02-08 02:27:58,394 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 02:27:58,396 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 02:27:58,408 - asky.research.tools - DEBUG - Generating chunk embeddings for http://example.com
2026-02-08 02:27:58,409 - asky.research.tools - ERROR - RAG retrieval failed for http://example.com: DB error
2026-02-08 02:27:58,417 - asky.research.tools - WARNING - Finding embedding failed (will still be saved): Embedding API unavailable
2026-02-08 02:27:58,422 - asky.research.tools - WARNING - Semantic search unavailable: API unavailable
2026-02-08 02:27:58,440 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 02:27:58,451 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 02:27:58,465 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 02:27:58,465 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 02:27:58,477 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 02:27:58,478 - asky.research.vector_store - WARNING - Chroma link query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 02:27:58,495 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 02:27:58,503 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 02:27:58,507 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 02:27:58,521 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 02:27:58,522 - asky.research.vector_store - WARNING - Chroma hybrid query failed; using SQLite dense scores: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 02:27:58,533 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 02:27:58,535 - asky.research.vector_store - WARNING - Embedding count mismatch: 2 vs 3
2026-02-08 02:27:58,536 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 02:27:58,545 - asky.research.vector_store - DEBUG - Stored 5 chunk embeddings for cache_id=1
2026-02-08 02:27:58,546 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 02:27:58,555 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 02:27:58,567 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 02:27:58,572 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 02:27:58,585 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 02:27:58,589 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 02:27:58,597 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 02:27:58,601 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 02:27:58,625 - asky.core.session_manager - INFO - Session 1 reached threshold (10/5). Compacting...
2026-02-08 02:27:58,625 - asky.core.session_manager - INFO - Found 1 messages to compact for session 1
2026-02-08 02:27:58,625 - asky.core.session_manager - INFO - Compacted content length: 9 chars
2026-02-08 02:27:58,625 - asky.core.session_manager - INFO - Compaction saved for session 1
2026-02-08 02:27:58,636 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=True
2026-02-08 02:27:58,636 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=46 results=2 elapsed=0.00ms
2026-02-08 02:27:58,636 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 02:27:58,636 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://docs.example.com/ai-safety text_len=47 title_len=19 elapsed=0.00ms source_type=search
2026-02-08 02:27:58,636 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://blog.example.com/plants text_len=52 title_len=13 elapsed=0.00ms source_type=search
2026-02-08 02:27:58,636 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 02:27:58,636 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=46 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 02:27:58,636 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://docs.example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 02:27:58,636 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://blog.example.com/plants semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 02:27:58,636 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.16ms fetch=0.06ms score=0.08ms total=0.32ms seeds=0 query_len=46 keyphrases=0 shortlisted=2 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 02:27:58,637 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 02:27:58,637 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 02:27:58,637 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 02:27:58,637 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 02:27:58,637 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 02:27:58,637 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.01
2026-02-08 02:27:58,637 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 02:27:58,637 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.08ms fetch=0.03ms score=0.05ms total=0.18ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 02:27:58,638 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=2 selected=2 added=2 elapsed=0.02ms warning=None
2026-02-08 02:27:58,639 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=2 elapsed=0.06ms max_pages=1 per_page=10
2026-02-08 02:27:58,639 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 02:27:58,639 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=3 deduped=3 max_candidates=30
2026-02-08 02:27:58,639 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=50 title_len=9 elapsed=0.00ms source_type=seed
2026-02-08 02:27:58,639 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/ai-safety text_len=51 title_len=15 elapsed=0.00ms source_type=seed_link
2026-02-08 02:27:58,639 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/garden text_len=51 title_len=11 elapsed=0.00ms source_type=seed_link
2026-02-08 02:27:58,639 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=3 attempted=3 extracted=3 max_fetch=15
2026-02-08 02:27:58,639 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=39 docs=3 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 02:27:58,639 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=0.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=-0.0500
2026-02-08 02:27:58,639 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 02:27:58,639 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/garden semantic=0.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=-0.0500
2026-02-08 02:27:58,639 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.14ms fetch=0.07ms score=0.08ms total=0.31ms seeds=1 query_len=39 keyphrases=0 shortlisted=3 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 3, 'candidate_deduped': 3, 'fetch_calls': 3, 'fetch_success': 3, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 2, 'seed_link_added': 2, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 3} warnings=0
2026-02-08 02:27:58,641 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 02:27:58,641 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 02:27:58,641 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 02:27:58,641 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 02:27:58,641 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 02:27:58,641 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=31 docs=1
2026-02-08 02:27:58,641 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=-0.0500
2026-02-08 02:27:58,641 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.07ms fetch=0.03ms score=0.04ms total=0.15ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 02:27:58,646 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 02:27:58,658 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 02:27:58,662 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:24,806 - asky.research.source_shortlist - DEBUG - source_shortlist disabled for mode=standard in 0.00ms
2026-02-08 03:08:24,806 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.25ms
2026-02-08 03:08:24,811 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.00ms
2026-02-08 03:08:24,826 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 03:08:24,826 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [{"role": "user", "content": "Hi"}], "tools": null, "tool_choice": "auto"}
2026-02-08 03:08:24,826 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 03:08:24,826 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 03:08:24,827 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 03:08:24,827 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 03:08:24,827 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 03:08:24,827 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 1 seconds...
2026-02-08 03:08:24,828 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 03:08:24,828 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 03:08:24,828 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 03:08:24,828 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 03:08:24,828 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 5 seconds...
2026-02-08 03:08:24,829 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 03:08:24,829 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:08:24,830 - asky.core.engine - DEBUG - Tool call [71 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 03:08:24,830 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 03:08:24,830 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 03:08:24,830 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:08:24,831 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:08:24,831 - asky.core.engine - DEBUG - Tool call [82 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{"q": "test"}'}}
2026-02-08 03:08:24,831 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 03:08:24,831 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 03:08:24,831 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:08:24,837 - asky.rendering - INFO - [Opening browser: /path/to/archive/file.html]
2026-02-08 03:08:24,838 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:08:24,838 - asky.core.engine - DEBUG - Tool call [93 chrs]: {'id': 'call_123', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 03:08:24,838 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 03:08:24,839 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 03:08:24,839 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:08:24,840 - asky.core.engine - INFO - Starting turn 1/2
2026-02-08 03:08:24,840 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 03:08:24,840 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 03:08:24,840 - asky.core.engine - INFO - Starting turn 2/2
2026-02-08 03:08:24,840 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_2', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 03:08:24,840 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 03:08:24,840 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 03:08:24,840 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:08:24,841 - asky.core.engine - INFO - Starting turn 1/1
2026-02-08 03:08:24,841 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 03:08:24,841 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 03:08:24,841 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 03:08:24,841 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:08:24,842 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 03:08:24,842 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 03:08:24,843 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 03:08:24,843 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 03:08:24,843 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 03:08:24,843 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 03:08:24,844 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 03:08:24,844 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 03:08:24,851 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 03:08:24,851 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 03:08:31,120 - asky.research.source_shortlist - DEBUG - source_shortlist disabled for mode=standard in 0.00ms
2026-02-08 03:08:31,120 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.07ms
2026-02-08 03:08:31,126 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.00ms
2026-02-08 03:08:31,144 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:08:31,144 - asky.core.api_client - INFO - Sending request to LLM: test-model
2026-02-08 03:08:31,144 - asky.core.api_client - DEBUG - Payload: {"model": "test-model", "messages": [{"role": "user", "content": "test"}], "tools": [], "tool_choice": "auto"}
2026-02-08 03:08:31,144 - asky.core.api_client - INFO - [test] Sent: 1 tokens
2026-02-08 03:08:31,144 - asky.core.engine - ERROR - API Error 400: 400 Client Error: Bad Request
2026-02-08 03:08:31,145 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:08:31,146 - asky.core.engine - INFO - Context threshold reached (628/500). Compacting...
2026-02-08 03:08:31,146 - asky.core.engine - INFO - Compaction failed to preserve history. Returning minimal context: 625 tokens.
2026-02-08 03:08:31,147 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:08:31,147 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:08:31,148 - asky.core.engine - INFO - Context threshold reached (520/100). Compacting...
2026-02-08 03:08:31,148 - asky.core.engine - DEBUG - [Smart Compaction] Found summary for URL https://example.com/long-article (dict). Replacing content.
2026-02-08 03:08:31,148 - asky.core.engine - INFO - Smart compaction successful. Reduced from 520 to 42
2026-02-08 03:08:31,150 - asky.tools - INFO - Executing custom tool command: ls "."
2026-02-08 03:08:31,151 - asky.tools - INFO - Executing custom tool command: ls "/tmp/test"
2026-02-08 03:08:31,152 - asky.tools - INFO - Executing custom tool command: echo "hello world"
2026-02-08 03:08:31,153 - asky.tools - INFO - Executing custom tool command: echo "already quoted"
2026-02-08 03:08:31,154 - asky.tools - INFO - Executing custom tool command: echo "test"
2026-02-08 03:08:31,161 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 03:08:31,161 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 03:08:31,161 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 03:08:31,162 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 03:08:31,162 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:08:31,162 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 03:08:31,163 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 03:08:31,163 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 03:08:31,163 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 03:08:31,163 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:08:31,163 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 03:08:31,165 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 03:08:31,165 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 03:08:31,165 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 03:08:31,165 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 03:08:31,165 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:08:31,165 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 03:08:31,165 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 03:08:31,165 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 03:08:31,165 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 03:08:31,165 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:08:31,165 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 03:08:31,167 - asky.email_sender - ERROR - SMTP credentials not configured. Please set ASKY_SMTP_USER and ASKY_SMTP_PASSWORD.
2026-02-08 03:08:31,167 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 03:08:31,167 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 03:08:31,167 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 03:08:31,167 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 03:08:31,168 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:08:31,168 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 03:08:31,168 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 03:08:31,168 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 03:08:31,168 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 03:08:31,168 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:08:31,168 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 03:08:31,168 - asky.email_sender - ERROR - Failed to send email: Auth failed
2026-02-08 03:08:31,185 - asky.rendering - WARNING - Template not found at <MagicMock name='TEMPLATE_PATH' id='5357283584'>
2026-02-08 03:08:31,188 - asky.rendering - DEBUG - Extracted title for filename: Test Content
2026-02-08 03:08:31,212 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 03:08:31,212 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [{"role": "user", "content": "Hi"}], "tools": null, "tool_choice": "auto"}
2026-02-08 03:08:31,212 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 03:08:31,212 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 03:08:31,213 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 03:08:31,213 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 03:08:31,213 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 03:08:31,213 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 1 seconds...
2026-02-08 03:08:31,213 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 03:08:31,214 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 03:08:31,214 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 03:08:31,214 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 03:08:31,214 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 5 seconds...
2026-02-08 03:08:31,214 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 03:08:31,215 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:08:31,215 - asky.core.engine - DEBUG - Tool call [71 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 03:08:31,215 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 03:08:31,215 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 03:08:31,215 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:08:31,216 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:08:31,216 - asky.core.engine - DEBUG - Tool call [82 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{"q": "test"}'}}
2026-02-08 03:08:31,216 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 03:08:31,216 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 03:08:31,216 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:08:31,220 - asky.rendering - INFO - [Opening browser: /path/to/archive/file.html]
2026-02-08 03:08:31,221 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:08:31,221 - asky.core.engine - DEBUG - Tool call [93 chrs]: {'id': 'call_123', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 03:08:31,221 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 03:08:31,221 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 03:08:31,221 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:08:31,222 - asky.core.engine - INFO - Starting turn 1/2
2026-02-08 03:08:31,222 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 03:08:31,222 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 03:08:31,222 - asky.core.engine - INFO - Starting turn 2/2
2026-02-08 03:08:31,222 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_2', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 03:08:31,222 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 03:08:31,222 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 03:08:31,222 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:08:31,223 - asky.core.engine - INFO - Starting turn 1/1
2026-02-08 03:08:31,223 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 03:08:31,223 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 03:08:31,223 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 03:08:31,223 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:08:31,225 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 03:08:31,225 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [{"role": "user", "content": "Hi"}], "temperature": 0.5, "top_p": 0.9, "tools": null, "tool_choice": "auto"}
2026-02-08 03:08:31,225 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 03:08:31,225 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 03:08:31,226 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 03:08:31,226 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [], "temperature": 0.7, "tools": null, "tool_choice": "auto"}
2026-02-08 03:08:31,226 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 03:08:31,226 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 03:08:31,246 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 03:08:31,247 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 03:08:31,250 - asky.push_data - ERROR - Failed to push data to 'test_endpoint': Network error
2026-02-08 03:08:31,251 - asky.push_data - ERROR - Failed to build payload for endpoint 'test_endpoint': Missing required parameter: title
2026-02-08 03:08:31,252 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 03:08:31,265 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:31,269 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:31,270 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:08:31,275 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:31,276 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:08:31,617 - chromadb.config - DEBUG - Starting component System
2026-02-08 03:08:31,617 - chromadb.config - DEBUG - Starting component Posthog
2026-02-08 03:08:31,670 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:08:31,674 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:31,675 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 03:08:31,678 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 03:08:31,682 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:31,682 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 03:08:31,683 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 03:08:31,687 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:31,690 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:31,694 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:31,695 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:08:31,698 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:31,699 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:08:31,705 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:31,705 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:08:31,709 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:31,710 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 03:08:31,713 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:31,714 - asky.research.cache - DEBUG - Cached URL http://example1.com with id=1
2026-02-08 03:08:31,714 - asky.research.cache - DEBUG - Cached URL http://example2.com with id=2
2026-02-08 03:08:31,718 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:31,718 - asky.research.cache - DEBUG - Scheduled background summarization for http://example.com
2026-02-08 03:08:31,718 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:08:31,719 - asky.research.cache - DEBUG - Background summarization completed for http://example.com
2026-02-08 03:08:32,227 - asky.research.cache - DEBUG - Shutting down research cache executor...
2026-02-08 03:08:32,227 - asky.research.cache - DEBUG - Research cache executor shutdown complete
2026-02-08 03:08:32,245 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:32,254 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:32,261 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:32,266 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:32,272 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:32,273 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:08:32,278 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:32,279 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:08:32,283 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:32,288 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:32,292 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:32,293 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:08:32,293 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 03:08:32,294 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 03:08:32,298 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:32,299 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:08:32,299 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 03:08:32,300 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 03:08:32,300 - asky.research.cache - DEBUG - Saved finding id=4
2026-02-08 03:08:32,301 - asky.research.cache - DEBUG - Saved finding id=5
2026-02-08 03:08:32,301 - asky.research.cache - DEBUG - Saved finding id=6
2026-02-08 03:08:32,302 - asky.research.cache - DEBUG - Saved finding id=7
2026-02-08 03:08:32,302 - asky.research.cache - DEBUG - Saved finding id=8
2026-02-08 03:08:32,303 - asky.research.cache - DEBUG - Saved finding id=9
2026-02-08 03:08:32,303 - asky.research.cache - DEBUG - Saved finding id=10
2026-02-08 03:08:32,307 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:32,307 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:08:32,308 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 03:08:32,308 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 03:08:32,312 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:32,312 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:08:32,313 - asky.research.cache - DEBUG - Deleted finding id=1
2026-02-08 03:08:32,317 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:32,320 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:32,321 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:08:32,325 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:32,326 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:08:32,326 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 03:08:32,330 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:32,330 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:08:32,333 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:32,334 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:08:32,355 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:08:32,356 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:08:32,356 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:08:32,357 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:08:32,357 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:08:32,358 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:08:32,358 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:08:32,359 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:08:32,360 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:08:32,360 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:08:32,360 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:08:32,361 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:08:32,361 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:08:32,362 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:08:32,363 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:08:32,363 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:08:32,364 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 03:08:32,364 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 03:08:32,364 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 03:08:32,364 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 03:08:32,364 - asky.research.embeddings - INFO - Loaded fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' successfully. Update research.embedding.model to avoid repeated primary model load failures.
2026-02-08 03:08:32,365 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 03:08:32,365 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 03:08:32,365 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 03:08:32,365 - asky.research.embeddings - DEBUG - Embedding model 'sentence-transformers/all-MiniLM-L6-v2' not available locally, attempting remote load.
2026-02-08 03:08:32,365 - asky.research.embeddings - ERROR - Failed to load sentence-transformer model 'bad/model': cannot load bad/model
2026-02-08 03:08:32,365 - asky.research.embeddings - ERROR - Fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' also failed: cannot load sentence-transformers/all-MiniLM-L6-v2
2026-02-08 03:08:32,366 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=cached/model, device=cpu
2026-02-08 03:08:32,366 - asky.research.embeddings - DEBUG - Loaded embedding model 'cached/model' from local Hugging Face cache.
2026-02-08 03:08:32,366 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=trunc/model, device=cpu
2026-02-08 03:08:32,366 - asky.research.embeddings - DEBUG - Loaded embedding model 'trunc/model' from local Hugging Face cache.
2026-02-08 03:08:32,370 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 03:08:32,374 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:08:32,374 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 03:08:32,375 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
2026-02-08 03:08:32,481 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 03:08:32,599 - asky.research.vector_store - ERROR - Failed to upsert link embeddings into ChromaDB: Collection expecting embedding with dimension of 3, got 384
2026-02-08 03:08:32,600 - asky.research.vector_store - DEBUG - Stored 1 link embeddings for cache_id=1
2026-02-08 03:08:32,602 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 03:08:32,603 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 03:08:32,605 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:08:32,606 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:08:32,608 - asky.research.tools - DEBUG - Cache hit for http://b.com
2026-02-08 03:08:32,609 - asky.research.tools - DEBUG - Cache hit for http://a.com
2026-02-08 03:08:32,610 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:08:32,612 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:08:32,622 - asky.research.tools - DEBUG - Generating chunk embeddings for http://example.com
2026-02-08 03:08:32,624 - asky.research.tools - ERROR - RAG retrieval failed for http://example.com: DB error
2026-02-08 03:08:32,632 - asky.research.tools - WARNING - Finding embedding failed (will still be saved): Embedding API unavailable
2026-02-08 03:08:32,636 - asky.research.tools - WARNING - Semantic search unavailable: API unavailable
2026-02-08 03:08:32,656 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:08:32,665 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 03:08:32,681 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:08:32,681 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:08:32,693 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 03:08:32,693 - asky.research.vector_store - WARNING - Chroma link query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:08:32,710 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:08:32,719 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 03:08:32,723 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:08:32,734 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:08:32,735 - asky.research.vector_store - WARNING - Chroma hybrid query failed; using SQLite dense scores: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:08:32,745 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:08:32,748 - asky.research.vector_store - WARNING - Embedding count mismatch: 2 vs 3
2026-02-08 03:08:32,749 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:08:32,759 - asky.research.vector_store - DEBUG - Stored 5 chunk embeddings for cache_id=1
2026-02-08 03:08:32,759 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:08:32,768 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 03:08:32,781 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 03:08:32,786 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 03:08:32,798 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 03:08:32,802 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 03:08:32,810 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 03:08:32,814 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 03:08:32,836 - asky.core.session_manager - INFO - Session 1 reached threshold (10/5). Compacting...
2026-02-08 03:08:32,836 - asky.core.session_manager - INFO - Found 1 messages to compact for session 1
2026-02-08 03:08:32,836 - asky.core.session_manager - INFO - Compacted content length: 9 chars
2026-02-08 03:08:32,836 - asky.core.session_manager - INFO - Compaction saved for session 1
2026-02-08 03:08:32,846 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=True
2026-02-08 03:08:32,846 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=46 results=2 elapsed=0.00ms
2026-02-08 03:08:32,846 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 03:08:32,846 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://docs.example.com/ai-safety text_len=47 title_len=19 elapsed=0.00ms source_type=search
2026-02-08 03:08:32,846 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://blog.example.com/plants text_len=52 title_len=13 elapsed=0.00ms source_type=search
2026-02-08 03:08:32,846 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 03:08:32,846 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=46 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:08:32,846 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://docs.example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 03:08:32,846 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://blog.example.com/plants semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 03:08:32,846 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.12ms fetch=0.06ms score=0.07ms total=0.28ms seeds=0 query_len=46 keyphrases=0 shortlisted=2 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 03:08:32,847 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 03:08:32,847 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:08:32,847 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 03:08:32,847 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 03:08:32,847 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 03:08:32,847 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:08:32,847 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 03:08:32,847 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.07ms fetch=0.03ms score=0.04ms total=0.16ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 03:08:32,848 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=2 selected=2 added=2 elapsed=0.01ms warning=None
2026-02-08 03:08:32,848 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=2 elapsed=0.04ms max_pages=1 per_page=10
2026-02-08 03:08:32,848 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:08:32,848 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=3 deduped=3 max_candidates=30
2026-02-08 03:08:32,848 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=50 title_len=9 elapsed=0.00ms source_type=seed
2026-02-08 03:08:32,848 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/ai-safety text_len=51 title_len=15 elapsed=0.00ms source_type=seed_link
2026-02-08 03:08:32,848 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/garden text_len=51 title_len=11 elapsed=0.00ms source_type=seed_link
2026-02-08 03:08:32,848 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=3 attempted=3 extracted=3 max_fetch=15
2026-02-08 03:08:32,848 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=39 docs=3 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:08:32,848 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=0.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=-0.0500
2026-02-08 03:08:32,848 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 03:08:32,848 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/garden semantic=0.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=-0.0500
2026-02-08 03:08:32,848 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.10ms fetch=0.06ms score=0.08ms total=0.26ms seeds=1 query_len=39 keyphrases=0 shortlisted=3 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 3, 'candidate_deduped': 3, 'fetch_calls': 3, 'fetch_success': 3, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 2, 'seed_link_added': 2, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 3} warnings=0
2026-02-08 03:08:32,849 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 03:08:32,849 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:08:32,849 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 03:08:32,849 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 03:08:32,849 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 03:08:32,849 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:08:32,849 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 03:08:32,849 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.14ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 03:08:32,851 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 03:08:32,851 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:08:32,851 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 03:08:32,851 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 03:08:32,851 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 03:08:32,851 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=31 docs=1
2026-02-08 03:08:32,851 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=-0.0500
2026-02-08 03:08:32,851 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.14ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 03:08:32,855 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:08:32,863 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 03:08:32,867 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:01,398 - asky.research.source_shortlist - DEBUG - source_shortlist disabled for mode=standard in 0.00ms
2026-02-08 03:09:01,398 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.24ms
2026-02-08 03:09:01,406 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.00ms
2026-02-08 03:09:01,423 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:09:01,423 - asky.core.api_client - INFO - Sending request to LLM: test-model
2026-02-08 03:09:01,423 - asky.core.api_client - DEBUG - Payload: {"model": "test-model", "messages": [{"role": "user", "content": "test"}], "tools": [], "tool_choice": "auto"}
2026-02-08 03:09:01,423 - asky.core.api_client - INFO - [test] Sent: 1 tokens
2026-02-08 03:09:01,423 - asky.core.engine - ERROR - API Error 400: 400 Client Error: Bad Request
2026-02-08 03:09:01,424 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:09:01,425 - asky.core.engine - INFO - Context threshold reached (628/500). Compacting...
2026-02-08 03:09:01,425 - asky.core.engine - INFO - Compaction failed to preserve history. Returning minimal context: 625 tokens.
2026-02-08 03:09:01,426 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:09:01,426 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:09:01,427 - asky.core.engine - INFO - Context threshold reached (520/100). Compacting...
2026-02-08 03:09:01,427 - asky.core.engine - DEBUG - [Smart Compaction] Found summary for URL https://example.com/long-article (dict). Replacing content.
2026-02-08 03:09:01,427 - asky.core.engine - INFO - Smart compaction successful. Reduced from 520 to 42
2026-02-08 03:09:01,428 - asky.tools - INFO - Executing custom tool command: ls "."
2026-02-08 03:09:01,430 - asky.tools - INFO - Executing custom tool command: ls "/tmp/test"
2026-02-08 03:09:01,431 - asky.tools - INFO - Executing custom tool command: echo "hello world"
2026-02-08 03:09:01,432 - asky.tools - INFO - Executing custom tool command: echo "already quoted"
2026-02-08 03:09:01,433 - asky.tools - INFO - Executing custom tool command: echo "test"
2026-02-08 03:09:01,442 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 03:09:01,442 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 03:09:01,442 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 03:09:01,443 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 03:09:01,443 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:09:01,443 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 03:09:01,444 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 03:09:01,444 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 03:09:01,444 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 03:09:01,444 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:09:01,444 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 03:09:01,446 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 03:09:01,446 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 03:09:01,446 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 03:09:01,446 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 03:09:01,446 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:09:01,446 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 03:09:01,446 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 03:09:01,446 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 03:09:01,446 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 03:09:01,446 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:09:01,446 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 03:09:01,447 - asky.email_sender - ERROR - SMTP credentials not configured. Please set ASKY_SMTP_USER and ASKY_SMTP_PASSWORD.
2026-02-08 03:09:01,448 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 03:09:01,448 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 03:09:01,448 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 03:09:01,448 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 03:09:01,448 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:09:01,448 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 03:09:01,448 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 03:09:01,448 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 03:09:01,448 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 03:09:01,448 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:09:01,448 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 03:09:01,449 - asky.email_sender - ERROR - Failed to send email: Auth failed
2026-02-08 03:09:01,466 - asky.rendering - WARNING - Template not found at <MagicMock name='TEMPLATE_PATH' id='5175896320'>
2026-02-08 03:09:01,468 - asky.rendering - DEBUG - Extracted title for filename: Test Content
2026-02-08 03:09:01,488 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 03:09:01,488 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [{"role": "user", "content": "Hi"}], "tools": null, "tool_choice": "auto"}
2026-02-08 03:09:01,488 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 03:09:01,488 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 03:09:01,489 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 03:09:01,489 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 03:09:01,489 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 03:09:01,490 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 1 seconds...
2026-02-08 03:09:01,490 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 03:09:01,491 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 03:09:01,491 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 03:09:01,491 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 03:09:01,491 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 5 seconds...
2026-02-08 03:09:01,491 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 03:09:01,492 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:09:01,492 - asky.core.engine - DEBUG - Tool call [71 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 03:09:01,492 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 03:09:01,492 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 03:09:01,492 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:09:01,493 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:09:01,493 - asky.core.engine - DEBUG - Tool call [82 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{"q": "test"}'}}
2026-02-08 03:09:01,493 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 03:09:01,493 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 03:09:01,493 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:09:01,496 - asky.rendering - INFO - [Opening browser: /path/to/archive/file.html]
2026-02-08 03:09:01,497 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:09:01,497 - asky.core.engine - DEBUG - Tool call [93 chrs]: {'id': 'call_123', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 03:09:01,497 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 03:09:01,497 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 03:09:01,497 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:09:01,498 - asky.core.engine - INFO - Starting turn 1/2
2026-02-08 03:09:01,498 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 03:09:01,498 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 03:09:01,498 - asky.core.engine - INFO - Starting turn 2/2
2026-02-08 03:09:01,498 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_2', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 03:09:01,498 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 03:09:01,498 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 03:09:01,498 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:09:01,499 - asky.core.engine - INFO - Starting turn 1/1
2026-02-08 03:09:01,499 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 03:09:01,499 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 03:09:01,499 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 03:09:01,499 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:09:01,501 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 03:09:01,501 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [{"role": "user", "content": "Hi"}], "temperature": 0.5, "top_p": 0.9, "tools": null, "tool_choice": "auto"}
2026-02-08 03:09:01,501 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 03:09:01,501 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 03:09:01,502 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 03:09:01,502 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [], "temperature": 0.7, "tools": null, "tool_choice": "auto"}
2026-02-08 03:09:01,502 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 03:09:01,502 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 03:09:01,522 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 03:09:01,522 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 03:09:01,526 - asky.push_data - ERROR - Failed to push data to 'test_endpoint': Network error
2026-02-08 03:09:01,526 - asky.push_data - ERROR - Failed to build payload for endpoint 'test_endpoint': Missing required parameter: title
2026-02-08 03:09:01,527 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 03:09:01,541 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:01,544 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:01,545 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:09:01,548 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:01,549 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:09:01,899 - chromadb.config - DEBUG - Starting component System
2026-02-08 03:09:01,900 - chromadb.config - DEBUG - Starting component Posthog
2026-02-08 03:09:01,948 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:09:01,952 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:01,952 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 03:09:01,954 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 03:09:01,957 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:01,958 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 03:09:01,959 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 03:09:01,962 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:01,966 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:01,970 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:01,971 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:09:01,974 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:01,974 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:09:01,978 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:01,978 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:09:01,982 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:01,983 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 03:09:01,986 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:01,987 - asky.research.cache - DEBUG - Cached URL http://example1.com with id=1
2026-02-08 03:09:01,987 - asky.research.cache - DEBUG - Cached URL http://example2.com with id=2
2026-02-08 03:09:01,990 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:01,991 - asky.research.cache - DEBUG - Scheduled background summarization for http://example.com
2026-02-08 03:09:01,991 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:09:01,992 - asky.research.cache - DEBUG - Background summarization completed for http://example.com
2026-02-08 03:09:02,499 - asky.research.cache - DEBUG - Shutting down research cache executor...
2026-02-08 03:09:02,499 - asky.research.cache - DEBUG - Research cache executor shutdown complete
2026-02-08 03:09:02,512 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:02,523 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:02,530 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:02,536 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:02,542 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:02,543 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:09:02,548 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:02,549 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:09:02,553 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:02,558 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:02,563 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:02,564 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:09:02,565 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 03:09:02,565 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 03:09:02,570 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:02,571 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:09:02,571 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 03:09:02,572 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 03:09:02,572 - asky.research.cache - DEBUG - Saved finding id=4
2026-02-08 03:09:02,572 - asky.research.cache - DEBUG - Saved finding id=5
2026-02-08 03:09:02,573 - asky.research.cache - DEBUG - Saved finding id=6
2026-02-08 03:09:02,573 - asky.research.cache - DEBUG - Saved finding id=7
2026-02-08 03:09:02,574 - asky.research.cache - DEBUG - Saved finding id=8
2026-02-08 03:09:02,574 - asky.research.cache - DEBUG - Saved finding id=9
2026-02-08 03:09:02,574 - asky.research.cache - DEBUG - Saved finding id=10
2026-02-08 03:09:02,578 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:02,579 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:09:02,579 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 03:09:02,580 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 03:09:02,583 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:02,584 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:09:02,584 - asky.research.cache - DEBUG - Deleted finding id=1
2026-02-08 03:09:02,588 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:02,592 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:02,592 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:09:02,597 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:02,597 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:09:02,598 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 03:09:02,601 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:02,602 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:09:02,605 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:02,605 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:09:02,629 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:09:02,630 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:09:02,630 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:09:02,631 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:09:02,631 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:09:02,631 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:09:02,631 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:09:02,632 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:09:02,633 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:09:02,633 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:09:02,634 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:09:02,635 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:09:02,635 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:09:02,635 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:09:02,636 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:09:02,636 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:09:02,637 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 03:09:02,637 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 03:09:02,637 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 03:09:02,637 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 03:09:02,637 - asky.research.embeddings - INFO - Loaded fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' successfully. Update research.embedding.model to avoid repeated primary model load failures.
2026-02-08 03:09:02,638 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 03:09:02,638 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 03:09:02,638 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 03:09:02,638 - asky.research.embeddings - DEBUG - Embedding model 'sentence-transformers/all-MiniLM-L6-v2' not available locally, attempting remote load.
2026-02-08 03:09:02,638 - asky.research.embeddings - ERROR - Failed to load sentence-transformer model 'bad/model': cannot load bad/model
2026-02-08 03:09:02,638 - asky.research.embeddings - ERROR - Fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' also failed: cannot load sentence-transformers/all-MiniLM-L6-v2
2026-02-08 03:09:02,639 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=cached/model, device=cpu
2026-02-08 03:09:02,639 - asky.research.embeddings - DEBUG - Loaded embedding model 'cached/model' from local Hugging Face cache.
2026-02-08 03:09:02,639 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=trunc/model, device=cpu
2026-02-08 03:09:02,639 - asky.research.embeddings - DEBUG - Loaded embedding model 'trunc/model' from local Hugging Face cache.
2026-02-08 03:09:02,643 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 03:09:02,647 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:09:02,647 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 03:09:02,649 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 03:09:02,650 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 03:09:02,651 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:09:02,652 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:09:02,654 - asky.research.tools - DEBUG - Cache hit for http://b.com
2026-02-08 03:09:02,655 - asky.research.tools - DEBUG - Cache hit for http://a.com
2026-02-08 03:09:02,656 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:09:02,658 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:09:02,667 - asky.research.tools - DEBUG - Generating chunk embeddings for http://example.com
2026-02-08 03:09:02,668 - asky.research.tools - ERROR - RAG retrieval failed for http://example.com: DB error
2026-02-08 03:09:02,677 - asky.research.tools - WARNING - Finding embedding failed (will still be saved): Embedding API unavailable
2026-02-08 03:09:02,681 - asky.research.tools - WARNING - Semantic search unavailable: API unavailable
2026-02-08 03:09:02,701 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:09:02,711 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 03:09:02,723 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:09:02,723 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:09:02,735 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 03:09:02,735 - asky.research.vector_store - WARNING - Chroma link query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:09:02,751 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:09:02,759 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 03:09:02,762 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:09:02,773 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:09:02,774 - asky.research.vector_store - WARNING - Chroma hybrid query failed; using SQLite dense scores: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:09:02,785 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:09:02,788 - asky.research.vector_store - WARNING - Embedding count mismatch: 2 vs 3
2026-02-08 03:09:02,788 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:09:02,799 - asky.research.vector_store - DEBUG - Stored 5 chunk embeddings for cache_id=1
2026-02-08 03:09:02,799 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:09:02,809 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 03:09:02,821 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 03:09:02,826 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 03:09:02,837 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 03:09:02,842 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 03:09:02,850 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 03:09:02,854 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 03:09:02,875 - asky.core.session_manager - INFO - Session 1 reached threshold (10/5). Compacting...
2026-02-08 03:09:02,875 - asky.core.session_manager - INFO - Found 1 messages to compact for session 1
2026-02-08 03:09:02,875 - asky.core.session_manager - INFO - Compacted content length: 9 chars
2026-02-08 03:09:02,876 - asky.core.session_manager - INFO - Compaction saved for session 1
2026-02-08 03:09:02,886 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=True
2026-02-08 03:09:02,886 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=46 results=2 elapsed=0.00ms
2026-02-08 03:09:02,886 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 03:09:02,886 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://docs.example.com/ai-safety text_len=47 title_len=19 elapsed=0.00ms source_type=search
2026-02-08 03:09:02,886 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://blog.example.com/plants text_len=52 title_len=13 elapsed=0.00ms source_type=search
2026-02-08 03:09:02,886 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 03:09:02,886 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=46 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:09:02,886 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://docs.example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 03:09:02,886 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://blog.example.com/plants semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 03:09:02,886 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.11ms fetch=0.06ms score=0.06ms total=0.25ms seeds=0 query_len=46 keyphrases=0 shortlisted=2 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 03:09:02,887 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 03:09:02,887 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:09:02,887 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 03:09:02,887 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 03:09:02,887 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 03:09:02,887 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:09:02,887 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 03:09:02,887 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.14ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 03:09:02,888 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=2 selected=2 added=2 elapsed=0.01ms warning=None
2026-02-08 03:09:02,888 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=2 elapsed=0.03ms max_pages=1 per_page=10
2026-02-08 03:09:02,888 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:09:02,888 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=3 deduped=3 max_candidates=30
2026-02-08 03:09:02,888 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=50 title_len=9 elapsed=0.00ms source_type=seed
2026-02-08 03:09:02,888 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/ai-safety text_len=51 title_len=15 elapsed=0.00ms source_type=seed_link
2026-02-08 03:09:02,888 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/garden text_len=51 title_len=11 elapsed=0.00ms source_type=seed_link
2026-02-08 03:09:02,888 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=3 attempted=3 extracted=3 max_fetch=15
2026-02-08 03:09:02,888 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=39 docs=3 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:09:02,888 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=0.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=-0.0500
2026-02-08 03:09:02,888 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 03:09:02,888 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/garden semantic=0.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=-0.0500
2026-02-08 03:09:02,888 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.10ms fetch=0.06ms score=0.07ms total=0.24ms seeds=1 query_len=39 keyphrases=0 shortlisted=3 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 3, 'candidate_deduped': 3, 'fetch_calls': 3, 'fetch_success': 3, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 2, 'seed_link_added': 2, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 3} warnings=0
2026-02-08 03:09:02,889 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 03:09:02,889 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:09:02,889 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 03:09:02,889 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 03:09:02,889 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 03:09:02,889 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:09:02,889 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 03:09:02,889 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.08ms fetch=0.03ms score=0.05ms total=0.17ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 03:09:02,891 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 03:09:02,891 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:09:02,891 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 03:09:02,891 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 03:09:02,891 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 03:09:02,891 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=31 docs=1
2026-02-08 03:09:02,891 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=-0.0500
2026-02-08 03:09:02,891 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.14ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 03:09:02,895 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:09:02,903 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 03:09:02,908 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:45,381 - asky.research.source_shortlist - DEBUG - source_shortlist disabled for mode=standard in 0.00ms
2026-02-08 03:18:45,381 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.27ms
2026-02-08 03:18:45,385 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.00ms
2026-02-08 03:18:45,410 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:18:45,411 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:18:45,411 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:18:45,412 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:18:45,412 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:18:45,412 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:18:45,412 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:18:45,413 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:18:45,414 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:18:45,414 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:18:45,414 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:18:45,415 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:18:45,415 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:18:45,416 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:18:45,417 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:18:45,417 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:18:45,417 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 03:18:45,417 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 03:18:45,417 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 03:18:45,417 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 03:18:45,417 - asky.research.embeddings - INFO - Loaded fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' successfully. Update research.embedding.model to avoid repeated primary model load failures.
2026-02-08 03:18:45,418 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 03:18:45,418 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 03:18:45,418 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 03:18:45,418 - asky.research.embeddings - DEBUG - Embedding model 'sentence-transformers/all-MiniLM-L6-v2' not available locally, attempting remote load.
2026-02-08 03:18:45,418 - asky.research.embeddings - ERROR - Failed to load sentence-transformer model 'bad/model': cannot load bad/model
2026-02-08 03:18:45,418 - asky.research.embeddings - ERROR - Fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' also failed: cannot load sentence-transformers/all-MiniLM-L6-v2
2026-02-08 03:18:45,419 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=cached/model, device=cpu
2026-02-08 03:18:45,419 - asky.research.embeddings - DEBUG - Loaded embedding model 'cached/model' from local Hugging Face cache.
2026-02-08 03:18:45,420 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=trunc/model, device=cpu
2026-02-08 03:18:45,420 - asky.research.embeddings - DEBUG - Loaded embedding model 'trunc/model' from local Hugging Face cache.
2026-02-08 03:18:45,423 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 03:18:45,424 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 03:18:45,424 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 03:18:45,425 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 03:18:45,425 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 03:18:45,426 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 03:18:45,426 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 03:18:45,427 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 03:18:45,427 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 03:18:45,434 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 03:18:45,434 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 03:18:45,439 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=True
2026-02-08 03:18:45,439 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=46 results=2 elapsed=0.00ms
2026-02-08 03:18:45,439 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 03:18:45,439 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://docs.example.com/ai-safety text_len=47 title_len=19 elapsed=0.00ms source_type=search
2026-02-08 03:18:45,439 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://blog.example.com/plants text_len=52 title_len=13 elapsed=0.00ms source_type=search
2026-02-08 03:18:45,439 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 03:18:45,439 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=46 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:18:45,439 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://docs.example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 03:18:45,439 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://blog.example.com/plants semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 03:18:45,439 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.11ms fetch=0.05ms score=0.07ms total=0.24ms seeds=0 query_len=46 keyphrases=0 shortlisted=2 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 03:18:45,441 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 03:18:45,441 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:18:45,441 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 03:18:45,441 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 03:18:45,441 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 03:18:45,441 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:18:45,441 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 03:18:45,441 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.10ms fetch=0.04ms score=0.05ms total=0.19ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 03:18:45,442 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=2 selected=2 added=2 elapsed=0.02ms warning=None
2026-02-08 03:18:45,442 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=2 elapsed=0.05ms max_pages=1 per_page=10
2026-02-08 03:18:45,442 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:18:45,442 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=3 deduped=3 max_candidates=30
2026-02-08 03:18:45,442 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=50 title_len=9 elapsed=0.00ms source_type=seed
2026-02-08 03:18:45,442 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/ai-safety text_len=51 title_len=15 elapsed=0.00ms source_type=seed_link
2026-02-08 03:18:45,442 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/garden text_len=51 title_len=11 elapsed=0.00ms source_type=seed_link
2026-02-08 03:18:45,442 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=3 attempted=3 extracted=3 max_fetch=15
2026-02-08 03:18:45,442 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=39 docs=3 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:18:45,442 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=0.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=-0.0500
2026-02-08 03:18:45,442 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 03:18:45,442 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/garden semantic=0.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=-0.0500
2026-02-08 03:18:45,442 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.12ms fetch=0.07ms score=0.08ms total=0.29ms seeds=1 query_len=39 keyphrases=0 shortlisted=3 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 3, 'candidate_deduped': 3, 'fetch_calls': 3, 'fetch_success': 3, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 2, 'seed_link_added': 2, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 3} warnings=0
2026-02-08 03:18:45,443 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 03:18:45,443 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:18:45,443 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 03:18:45,443 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 03:18:45,443 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 03:18:45,443 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:18:45,443 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 03:18:45,443 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.15ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 03:18:45,445 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 03:18:45,445 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:18:45,445 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 03:18:45,445 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 03:18:45,445 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 03:18:45,445 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=31 docs=1
2026-02-08 03:18:45,445 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=-0.0500
2026-02-08 03:18:45,445 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.07ms fetch=0.03ms score=0.17ms total=0.29ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 03:18:51,544 - asky.research.source_shortlist - DEBUG - source_shortlist disabled for mode=standard in 0.00ms
2026-02-08 03:18:51,544 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.30ms
2026-02-08 03:18:51,550 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.00ms
2026-02-08 03:18:51,569 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:18:51,569 - asky.core.api_client - INFO - Sending request to LLM: test-model
2026-02-08 03:18:51,569 - asky.core.api_client - DEBUG - Payload: {"model": "test-model", "messages": [{"role": "user", "content": "test"}], "tools": [], "tool_choice": "auto"}
2026-02-08 03:18:51,569 - asky.core.api_client - INFO - [test] Sent: 1 tokens
2026-02-08 03:18:51,569 - asky.core.engine - ERROR - API Error 400: 400 Client Error: Bad Request
2026-02-08 03:18:51,569 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:18:51,570 - asky.core.engine - INFO - Context threshold reached (628/500). Compacting...
2026-02-08 03:18:51,570 - asky.core.engine - INFO - Compaction failed to preserve history. Returning minimal context: 625 tokens.
2026-02-08 03:18:51,571 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:18:51,571 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:18:51,572 - asky.core.engine - INFO - Context threshold reached (520/100). Compacting...
2026-02-08 03:18:51,573 - asky.core.engine - DEBUG - [Smart Compaction] Found summary for URL https://example.com/long-article (dict). Replacing content.
2026-02-08 03:18:51,573 - asky.core.engine - INFO - Smart compaction successful. Reduced from 520 to 42
2026-02-08 03:18:51,574 - asky.tools - INFO - Executing custom tool command: ls "."
2026-02-08 03:18:51,575 - asky.tools - INFO - Executing custom tool command: ls "/tmp/test"
2026-02-08 03:18:51,576 - asky.tools - INFO - Executing custom tool command: echo "hello world"
2026-02-08 03:18:51,577 - asky.tools - INFO - Executing custom tool command: echo "already quoted"
2026-02-08 03:18:51,578 - asky.tools - INFO - Executing custom tool command: echo "test"
2026-02-08 03:18:51,585 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 03:18:51,586 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 03:18:51,586 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 03:18:51,586 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 03:18:51,587 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:18:51,587 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 03:18:51,588 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 03:18:51,588 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 03:18:51,588 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 03:18:51,588 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:18:51,588 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 03:18:51,590 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 03:18:51,590 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 03:18:51,590 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 03:18:51,590 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 03:18:51,590 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:18:51,590 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 03:18:51,590 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 03:18:51,590 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 03:18:51,590 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 03:18:51,590 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:18:51,590 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 03:18:51,591 - asky.email_sender - ERROR - SMTP credentials not configured. Please set ASKY_SMTP_USER and ASKY_SMTP_PASSWORD.
2026-02-08 03:18:51,592 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 03:18:51,592 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 03:18:51,592 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 03:18:51,592 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 03:18:51,592 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:18:51,592 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 03:18:51,593 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 03:18:51,593 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 03:18:51,593 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 03:18:51,593 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:18:51,593 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 03:18:51,593 - asky.email_sender - ERROR - Failed to send email: Auth failed
2026-02-08 03:18:51,611 - asky.rendering - WARNING - Template not found at <MagicMock name='TEMPLATE_PATH' id='5198964992'>
2026-02-08 03:18:51,614 - asky.rendering - DEBUG - Extracted title for filename: Test Content
2026-02-08 03:18:51,637 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 03:18:51,637 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [{"role": "user", "content": "Hi"}], "tools": null, "tool_choice": "auto"}
2026-02-08 03:18:51,637 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 03:18:51,637 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 03:18:51,638 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 03:18:51,638 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 03:18:51,638 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 03:18:51,638 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 1 seconds...
2026-02-08 03:18:51,638 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 03:18:51,639 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 03:18:51,639 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 03:18:51,639 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 03:18:51,639 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 5 seconds...
2026-02-08 03:18:51,639 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 03:18:51,640 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:18:51,640 - asky.core.engine - DEBUG - Tool call [71 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 03:18:51,640 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 03:18:51,640 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 03:18:51,641 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:18:51,641 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:18:51,642 - asky.core.engine - DEBUG - Tool call [82 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{"q": "test"}'}}
2026-02-08 03:18:51,642 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 03:18:51,642 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 03:18:51,642 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:18:51,645 - asky.rendering - INFO - [Opening browser: /path/to/archive/file.html]
2026-02-08 03:18:51,646 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:18:51,646 - asky.core.engine - DEBUG - Tool call [93 chrs]: {'id': 'call_123', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 03:18:51,646 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 03:18:51,646 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 03:18:51,646 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:18:51,647 - asky.core.engine - INFO - Starting turn 1/2
2026-02-08 03:18:51,647 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 03:18:51,647 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 03:18:51,647 - asky.core.engine - INFO - Starting turn 2/2
2026-02-08 03:18:51,647 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_2', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 03:18:51,647 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 03:18:51,647 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 03:18:51,647 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:18:51,648 - asky.core.engine - INFO - Starting turn 1/1
2026-02-08 03:18:51,648 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 03:18:51,648 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 03:18:51,648 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 03:18:51,648 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:18:51,650 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 03:18:51,650 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [{"role": "user", "content": "Hi"}], "temperature": 0.5, "top_p": 0.9, "tools": null, "tool_choice": "auto"}
2026-02-08 03:18:51,650 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 03:18:51,650 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 03:18:51,651 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 03:18:51,651 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [], "temperature": 0.7, "tools": null, "tool_choice": "auto"}
2026-02-08 03:18:51,651 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 03:18:51,651 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 03:18:51,672 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 03:18:51,672 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 03:18:51,676 - asky.push_data - ERROR - Failed to push data to 'test_endpoint': Network error
2026-02-08 03:18:51,676 - asky.push_data - ERROR - Failed to build payload for endpoint 'test_endpoint': Missing required parameter: title
2026-02-08 03:18:51,677 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 03:18:51,690 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:51,695 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:51,696 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:18:51,700 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:51,701 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:18:52,053 - chromadb.config - DEBUG - Starting component System
2026-02-08 03:18:52,053 - chromadb.config - DEBUG - Starting component Posthog
2026-02-08 03:18:52,095 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:18:52,100 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:52,100 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 03:18:52,102 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 03:18:52,106 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:52,106 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 03:18:52,107 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 03:18:52,111 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:52,114 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:52,119 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:52,119 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:18:52,123 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:52,124 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:18:52,127 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:52,128 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:18:52,132 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:52,133 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 03:18:52,136 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:52,137 - asky.research.cache - DEBUG - Cached URL http://example1.com with id=1
2026-02-08 03:18:52,137 - asky.research.cache - DEBUG - Cached URL http://example2.com with id=2
2026-02-08 03:18:52,141 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:52,141 - asky.research.cache - DEBUG - Scheduled background summarization for http://example.com
2026-02-08 03:18:52,141 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:18:52,142 - asky.research.cache - DEBUG - Background summarization completed for http://example.com
2026-02-08 03:18:52,649 - asky.research.cache - DEBUG - Shutting down research cache executor...
2026-02-08 03:18:52,650 - asky.research.cache - DEBUG - Research cache executor shutdown complete
2026-02-08 03:18:52,663 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:52,673 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:52,680 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:52,688 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:52,694 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:52,694 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:18:52,699 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:52,700 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:18:52,704 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:52,709 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:52,714 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:52,715 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:18:52,715 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 03:18:52,716 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 03:18:52,720 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:52,720 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:18:52,721 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 03:18:52,721 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 03:18:52,722 - asky.research.cache - DEBUG - Saved finding id=4
2026-02-08 03:18:52,722 - asky.research.cache - DEBUG - Saved finding id=5
2026-02-08 03:18:52,723 - asky.research.cache - DEBUG - Saved finding id=6
2026-02-08 03:18:52,723 - asky.research.cache - DEBUG - Saved finding id=7
2026-02-08 03:18:52,723 - asky.research.cache - DEBUG - Saved finding id=8
2026-02-08 03:18:52,724 - asky.research.cache - DEBUG - Saved finding id=9
2026-02-08 03:18:52,724 - asky.research.cache - DEBUG - Saved finding id=10
2026-02-08 03:18:52,728 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:52,729 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:18:52,729 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 03:18:52,730 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 03:18:52,733 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:52,734 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:18:52,735 - asky.research.cache - DEBUG - Deleted finding id=1
2026-02-08 03:18:52,738 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:52,742 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:52,743 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:18:52,747 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:52,748 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:18:52,748 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 03:18:52,752 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:52,752 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:18:52,756 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:52,756 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:18:52,778 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:18:52,779 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:18:52,779 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:18:52,780 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:18:52,780 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:18:52,781 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:18:52,781 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:18:52,782 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:18:52,782 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:18:52,782 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:18:52,783 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:18:52,784 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:18:52,784 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:18:52,785 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:18:52,785 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:18:52,786 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:18:52,786 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 03:18:52,786 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 03:18:52,786 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 03:18:52,786 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 03:18:52,786 - asky.research.embeddings - INFO - Loaded fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' successfully. Update research.embedding.model to avoid repeated primary model load failures.
2026-02-08 03:18:52,787 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 03:18:52,787 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 03:18:52,787 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 03:18:52,787 - asky.research.embeddings - DEBUG - Embedding model 'sentence-transformers/all-MiniLM-L6-v2' not available locally, attempting remote load.
2026-02-08 03:18:52,787 - asky.research.embeddings - ERROR - Failed to load sentence-transformer model 'bad/model': cannot load bad/model
2026-02-08 03:18:52,787 - asky.research.embeddings - ERROR - Fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' also failed: cannot load sentence-transformers/all-MiniLM-L6-v2
2026-02-08 03:18:52,788 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=cached/model, device=cpu
2026-02-08 03:18:52,788 - asky.research.embeddings - DEBUG - Loaded embedding model 'cached/model' from local Hugging Face cache.
2026-02-08 03:18:52,789 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=trunc/model, device=cpu
2026-02-08 03:18:52,789 - asky.research.embeddings - DEBUG - Loaded embedding model 'trunc/model' from local Hugging Face cache.
2026-02-08 03:18:52,792 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 03:18:52,796 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:18:52,797 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 03:18:52,798 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 03:18:52,799 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 03:18:52,800 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:18:52,802 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:18:52,803 - asky.research.tools - DEBUG - Cache hit for http://b.com
2026-02-08 03:18:52,804 - asky.research.tools - DEBUG - Cache hit for http://a.com
2026-02-08 03:18:52,805 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:18:52,807 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:18:52,817 - asky.research.tools - DEBUG - Generating chunk embeddings for http://example.com
2026-02-08 03:18:52,818 - asky.research.tools - ERROR - RAG retrieval failed for http://example.com: DB error
2026-02-08 03:18:52,827 - asky.research.tools - WARNING - Finding embedding failed (will still be saved): Embedding API unavailable
2026-02-08 03:18:52,831 - asky.research.tools - WARNING - Semantic search unavailable: API unavailable
2026-02-08 03:18:52,850 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:18:52,861 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 03:18:52,874 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:18:52,874 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:18:52,885 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 03:18:52,885 - asky.research.vector_store - WARNING - Chroma link query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:18:52,902 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:18:52,911 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 03:18:52,914 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:18:52,925 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:18:52,926 - asky.research.vector_store - WARNING - Chroma hybrid query failed; using SQLite dense scores: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:18:52,937 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:18:52,940 - asky.research.vector_store - WARNING - Embedding count mismatch: 2 vs 3
2026-02-08 03:18:52,941 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:18:52,951 - asky.research.vector_store - DEBUG - Stored 5 chunk embeddings for cache_id=1
2026-02-08 03:18:52,951 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:18:52,962 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 03:18:52,973 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 03:18:52,978 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 03:18:52,992 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 03:18:52,997 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 03:18:53,004 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 03:18:53,009 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 03:18:53,029 - asky.core.session_manager - INFO - Session 1 reached threshold (10/5). Compacting...
2026-02-08 03:18:53,029 - asky.core.session_manager - INFO - Found 1 messages to compact for session 1
2026-02-08 03:18:53,029 - asky.core.session_manager - INFO - Compacted content length: 9 chars
2026-02-08 03:18:53,030 - asky.core.session_manager - INFO - Compaction saved for session 1
2026-02-08 03:18:53,040 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=True
2026-02-08 03:18:53,040 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=46 results=2 elapsed=0.00ms
2026-02-08 03:18:53,040 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 03:18:53,040 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://docs.example.com/ai-safety text_len=47 title_len=19 elapsed=0.00ms source_type=search
2026-02-08 03:18:53,040 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://blog.example.com/plants text_len=52 title_len=13 elapsed=0.00ms source_type=search
2026-02-08 03:18:53,040 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 03:18:53,040 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=46 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:18:53,040 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://docs.example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 03:18:53,040 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://blog.example.com/plants semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 03:18:53,040 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.16ms fetch=0.07ms score=0.08ms total=0.33ms seeds=0 query_len=46 keyphrases=0 shortlisted=2 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 03:18:53,041 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 03:18:53,041 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:18:53,041 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 03:18:53,042 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 03:18:53,042 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 03:18:53,042 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:18:53,042 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 03:18:53,042 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.10ms fetch=0.04ms score=0.05ms total=0.20ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 03:18:53,043 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=2 selected=2 added=2 elapsed=0.02ms warning=None
2026-02-08 03:18:53,043 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=2 elapsed=0.05ms max_pages=1 per_page=10
2026-02-08 03:18:53,043 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:18:53,043 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=3 deduped=3 max_candidates=30
2026-02-08 03:18:53,043 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=50 title_len=9 elapsed=0.00ms source_type=seed
2026-02-08 03:18:53,043 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/ai-safety text_len=51 title_len=15 elapsed=0.00ms source_type=seed_link
2026-02-08 03:18:53,043 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/garden text_len=51 title_len=11 elapsed=0.00ms source_type=seed_link
2026-02-08 03:18:53,043 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=3 attempted=3 extracted=3 max_fetch=15
2026-02-08 03:18:53,043 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=39 docs=3 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:18:53,043 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=0.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=-0.0500
2026-02-08 03:18:53,043 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 03:18:53,043 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/garden semantic=0.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=-0.0500
2026-02-08 03:18:53,043 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.14ms fetch=0.07ms score=0.09ms total=0.32ms seeds=1 query_len=39 keyphrases=0 shortlisted=3 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 3, 'candidate_deduped': 3, 'fetch_calls': 3, 'fetch_success': 3, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 2, 'seed_link_added': 2, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 3} warnings=0
2026-02-08 03:18:53,044 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 03:18:53,044 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:18:53,044 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 03:18:53,044 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 03:18:53,044 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 03:18:53,044 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:18:53,044 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 03:18:53,044 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.07ms fetch=0.03ms score=0.05ms total=0.17ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 03:18:53,046 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 03:18:53,046 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:18:53,046 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 03:18:53,046 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 03:18:53,046 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 03:18:53,046 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=31 docs=1
2026-02-08 03:18:53,046 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=-0.0500
2026-02-08 03:18:53,046 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.07ms fetch=0.03ms score=0.04ms total=0.16ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 03:18:53,051 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:18:53,064 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 03:18:53,072 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:17,485 - asky.research.source_shortlist - DEBUG - source_shortlist disabled for mode=standard in 0.00ms
2026-02-08 03:19:17,485 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.06ms
2026-02-08 03:19:17,492 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.01ms
2026-02-08 03:19:17,512 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:19:17,512 - asky.core.api_client - INFO - Sending request to LLM: test-model
2026-02-08 03:19:17,512 - asky.core.api_client - DEBUG - Payload: {"model": "test-model", "messages": [{"role": "user", "content": "test"}], "tools": [], "tool_choice": "auto"}
2026-02-08 03:19:17,512 - asky.core.api_client - INFO - [test] Sent: 1 tokens
2026-02-08 03:19:17,512 - asky.core.engine - ERROR - API Error 400: 400 Client Error: Bad Request
2026-02-08 03:19:17,513 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:19:17,513 - asky.core.engine - INFO - Context threshold reached (628/500). Compacting...
2026-02-08 03:19:17,514 - asky.core.engine - INFO - Compaction failed to preserve history. Returning minimal context: 625 tokens.
2026-02-08 03:19:17,514 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:19:17,515 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:19:17,516 - asky.core.engine - INFO - Context threshold reached (520/100). Compacting...
2026-02-08 03:19:17,516 - asky.core.engine - DEBUG - [Smart Compaction] Found summary for URL https://example.com/long-article (dict). Replacing content.
2026-02-08 03:19:17,516 - asky.core.engine - INFO - Smart compaction successful. Reduced from 520 to 42
2026-02-08 03:19:17,517 - asky.tools - INFO - Executing custom tool command: ls "."
2026-02-08 03:19:17,518 - asky.tools - INFO - Executing custom tool command: ls "/tmp/test"
2026-02-08 03:19:17,519 - asky.tools - INFO - Executing custom tool command: echo "hello world"
2026-02-08 03:19:17,520 - asky.tools - INFO - Executing custom tool command: echo "already quoted"
2026-02-08 03:19:17,522 - asky.tools - INFO - Executing custom tool command: echo "test"
2026-02-08 03:19:17,530 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 03:19:17,530 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 03:19:17,530 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 03:19:17,531 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 03:19:17,531 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:19:17,532 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 03:19:17,532 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 03:19:17,532 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 03:19:17,532 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 03:19:17,532 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:19:17,533 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 03:19:17,534 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 03:19:17,534 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 03:19:17,534 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 03:19:17,534 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 03:19:17,534 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:19:17,535 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 03:19:17,535 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 03:19:17,535 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 03:19:17,535 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 03:19:17,535 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:19:17,535 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 03:19:17,536 - asky.email_sender - ERROR - SMTP credentials not configured. Please set ASKY_SMTP_USER and ASKY_SMTP_PASSWORD.
2026-02-08 03:19:17,537 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 03:19:17,537 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 03:19:17,537 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 03:19:17,537 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 03:19:17,537 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:19:17,537 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 03:19:17,537 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 03:19:17,537 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 03:19:17,537 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 03:19:17,537 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:19:17,537 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 03:19:17,537 - asky.email_sender - ERROR - Failed to send email: Auth failed
2026-02-08 03:19:17,554 - asky.rendering - WARNING - Template not found at <MagicMock name='TEMPLATE_PATH' id='5377222912'>
2026-02-08 03:19:17,557 - asky.rendering - DEBUG - Extracted title for filename: Test Content
2026-02-08 03:19:17,578 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 03:19:17,578 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [{"role": "user", "content": "Hi"}], "tools": null, "tool_choice": "auto"}
2026-02-08 03:19:17,578 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 03:19:17,578 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 03:19:17,579 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 03:19:17,579 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 03:19:17,579 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 03:19:17,579 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 1 seconds...
2026-02-08 03:19:17,579 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 03:19:17,580 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 03:19:17,580 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 03:19:17,580 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 03:19:17,580 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 5 seconds...
2026-02-08 03:19:17,580 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 03:19:17,581 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:19:17,581 - asky.core.engine - DEBUG - Tool call [71 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 03:19:17,581 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 03:19:17,581 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 03:19:17,582 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:19:17,582 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:19:17,582 - asky.core.engine - DEBUG - Tool call [82 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{"q": "test"}'}}
2026-02-08 03:19:17,582 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 03:19:17,582 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 03:19:17,583 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:19:17,586 - asky.rendering - INFO - [Opening browser: /path/to/archive/file.html]
2026-02-08 03:19:17,586 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:19:17,587 - asky.core.engine - DEBUG - Tool call [93 chrs]: {'id': 'call_123', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 03:19:17,587 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 03:19:17,587 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 03:19:17,587 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:19:17,588 - asky.core.engine - INFO - Starting turn 1/2
2026-02-08 03:19:17,588 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 03:19:17,588 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 03:19:17,588 - asky.core.engine - INFO - Starting turn 2/2
2026-02-08 03:19:17,588 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_2', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 03:19:17,588 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 03:19:17,588 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 03:19:17,588 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:19:17,589 - asky.core.engine - INFO - Starting turn 1/1
2026-02-08 03:19:17,589 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 03:19:17,589 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 03:19:17,589 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 03:19:17,589 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:19:17,591 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 03:19:17,591 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [{"role": "user", "content": "Hi"}], "temperature": 0.5, "top_p": 0.9, "tools": null, "tool_choice": "auto"}
2026-02-08 03:19:17,591 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 03:19:17,591 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 03:19:17,592 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 03:19:17,592 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [], "temperature": 0.7, "tools": null, "tool_choice": "auto"}
2026-02-08 03:19:17,592 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 03:19:17,592 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 03:19:17,612 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 03:19:17,613 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 03:19:17,616 - asky.push_data - ERROR - Failed to push data to 'test_endpoint': Network error
2026-02-08 03:19:17,617 - asky.push_data - ERROR - Failed to build payload for endpoint 'test_endpoint': Missing required parameter: title
2026-02-08 03:19:17,618 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 03:19:17,632 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:17,635 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:17,636 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:19:17,640 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:17,640 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:19:17,977 - chromadb.config - DEBUG - Starting component System
2026-02-08 03:19:17,977 - chromadb.config - DEBUG - Starting component Posthog
2026-02-08 03:19:18,033 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:19:18,038 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:18,038 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 03:19:18,040 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 03:19:18,043 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:18,044 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 03:19:18,045 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 03:19:18,049 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:18,053 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:18,057 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:18,057 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:19:18,061 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:18,061 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:19:18,065 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:18,066 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:19:18,069 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:18,071 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 03:19:18,074 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:18,074 - asky.research.cache - DEBUG - Cached URL http://example1.com with id=1
2026-02-08 03:19:18,075 - asky.research.cache - DEBUG - Cached URL http://example2.com with id=2
2026-02-08 03:19:18,078 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:18,079 - asky.research.cache - DEBUG - Scheduled background summarization for http://example.com
2026-02-08 03:19:18,079 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:19:18,080 - asky.research.cache - DEBUG - Background summarization completed for http://example.com
2026-02-08 03:19:18,587 - asky.research.cache - DEBUG - Shutting down research cache executor...
2026-02-08 03:19:18,587 - asky.research.cache - DEBUG - Research cache executor shutdown complete
2026-02-08 03:19:18,600 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:18,610 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:18,617 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:18,624 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:18,630 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:18,631 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:19:18,636 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:18,636 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:19:18,641 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:18,646 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:18,650 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:18,651 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:19:18,651 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 03:19:18,652 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 03:19:18,657 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:18,657 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:19:18,658 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 03:19:18,659 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 03:19:18,659 - asky.research.cache - DEBUG - Saved finding id=4
2026-02-08 03:19:18,659 - asky.research.cache - DEBUG - Saved finding id=5
2026-02-08 03:19:18,660 - asky.research.cache - DEBUG - Saved finding id=6
2026-02-08 03:19:18,660 - asky.research.cache - DEBUG - Saved finding id=7
2026-02-08 03:19:18,660 - asky.research.cache - DEBUG - Saved finding id=8
2026-02-08 03:19:18,661 - asky.research.cache - DEBUG - Saved finding id=9
2026-02-08 03:19:18,661 - asky.research.cache - DEBUG - Saved finding id=10
2026-02-08 03:19:18,665 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:18,666 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:19:18,666 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 03:19:18,666 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 03:19:18,670 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:18,671 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:19:18,672 - asky.research.cache - DEBUG - Deleted finding id=1
2026-02-08 03:19:18,675 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:18,679 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:18,680 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:19:18,684 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:18,685 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:19:18,685 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 03:19:18,688 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:18,689 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:19:18,692 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:18,693 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:19:18,715 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:19:18,716 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:19:18,716 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:19:18,717 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:19:18,717 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:19:18,717 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:19:18,718 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:19:18,718 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:19:18,719 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:19:18,719 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:19:18,720 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:19:18,721 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:19:18,721 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:19:18,722 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:19:18,722 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:19:18,722 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:19:18,724 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 03:19:18,724 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 03:19:18,724 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 03:19:18,724 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 03:19:18,724 - asky.research.embeddings - INFO - Loaded fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' successfully. Update research.embedding.model to avoid repeated primary model load failures.
2026-02-08 03:19:18,725 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 03:19:18,725 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 03:19:18,725 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 03:19:18,725 - asky.research.embeddings - DEBUG - Embedding model 'sentence-transformers/all-MiniLM-L6-v2' not available locally, attempting remote load.
2026-02-08 03:19:18,725 - asky.research.embeddings - ERROR - Failed to load sentence-transformer model 'bad/model': cannot load bad/model
2026-02-08 03:19:18,725 - asky.research.embeddings - ERROR - Fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' also failed: cannot load sentence-transformers/all-MiniLM-L6-v2
2026-02-08 03:19:18,726 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=cached/model, device=cpu
2026-02-08 03:19:18,726 - asky.research.embeddings - DEBUG - Loaded embedding model 'cached/model' from local Hugging Face cache.
2026-02-08 03:19:18,727 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=trunc/model, device=cpu
2026-02-08 03:19:18,727 - asky.research.embeddings - DEBUG - Loaded embedding model 'trunc/model' from local Hugging Face cache.
2026-02-08 03:19:18,730 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 03:19:18,734 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:19:18,734 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 03:19:18,736 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 03:19:18,737 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 03:19:18,738 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:19:18,740 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:19:18,741 - asky.research.tools - DEBUG - Cache hit for http://b.com
2026-02-08 03:19:18,742 - asky.research.tools - DEBUG - Cache hit for http://a.com
2026-02-08 03:19:18,743 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:19:18,745 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:19:18,755 - asky.research.tools - DEBUG - Generating chunk embeddings for http://example.com
2026-02-08 03:19:18,756 - asky.research.tools - ERROR - RAG retrieval failed for http://example.com: DB error
2026-02-08 03:19:18,764 - asky.research.tools - WARNING - Finding embedding failed (will still be saved): Embedding API unavailable
2026-02-08 03:19:18,769 - asky.research.tools - WARNING - Semantic search unavailable: API unavailable
2026-02-08 03:19:18,790 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:19:18,802 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 03:19:18,814 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:19:18,815 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:19:18,827 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 03:19:18,827 - asky.research.vector_store - WARNING - Chroma link query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:19:18,844 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:19:18,852 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 03:19:18,856 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:19:18,868 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:19:18,868 - asky.research.vector_store - WARNING - Chroma hybrid query failed; using SQLite dense scores: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:19:18,880 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:19:18,883 - asky.research.vector_store - WARNING - Embedding count mismatch: 2 vs 3
2026-02-08 03:19:18,883 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:19:18,894 - asky.research.vector_store - DEBUG - Stored 5 chunk embeddings for cache_id=1
2026-02-08 03:19:18,894 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:19:18,904 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 03:19:18,916 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 03:19:18,921 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 03:19:18,934 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 03:19:18,939 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 03:19:18,946 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 03:19:18,951 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 03:19:18,973 - asky.core.session_manager - INFO - Session 1 reached threshold (10/5). Compacting...
2026-02-08 03:19:18,973 - asky.core.session_manager - INFO - Found 1 messages to compact for session 1
2026-02-08 03:19:18,973 - asky.core.session_manager - INFO - Compacted content length: 9 chars
2026-02-08 03:19:18,973 - asky.core.session_manager - INFO - Compaction saved for session 1
2026-02-08 03:19:18,983 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=True
2026-02-08 03:19:18,983 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=46 results=2 elapsed=0.00ms
2026-02-08 03:19:18,983 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 03:19:18,983 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://docs.example.com/ai-safety text_len=47 title_len=19 elapsed=0.00ms source_type=search
2026-02-08 03:19:18,983 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://blog.example.com/plants text_len=52 title_len=13 elapsed=0.00ms source_type=search
2026-02-08 03:19:18,983 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 03:19:18,983 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=46 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:19:18,983 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://docs.example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 03:19:18,983 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://blog.example.com/plants semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 03:19:18,983 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.10ms fetch=0.07ms score=0.06ms total=0.25ms seeds=0 query_len=46 keyphrases=0 shortlisted=2 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 03:19:18,984 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 03:19:18,984 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:19:18,984 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 03:19:18,984 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 03:19:18,984 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 03:19:18,984 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:19:18,984 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 03:19:18,984 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.15ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 03:19:18,985 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=2 selected=2 added=2 elapsed=0.01ms warning=None
2026-02-08 03:19:18,985 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=2 elapsed=0.03ms max_pages=1 per_page=10
2026-02-08 03:19:18,985 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:19:18,985 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=3 deduped=3 max_candidates=30
2026-02-08 03:19:18,985 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=50 title_len=9 elapsed=0.00ms source_type=seed
2026-02-08 03:19:18,985 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/ai-safety text_len=51 title_len=15 elapsed=0.00ms source_type=seed_link
2026-02-08 03:19:18,985 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/garden text_len=51 title_len=11 elapsed=0.00ms source_type=seed_link
2026-02-08 03:19:18,985 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=3 attempted=3 extracted=3 max_fetch=15
2026-02-08 03:19:18,985 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=39 docs=3 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:19:18,985 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=0.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=-0.0500
2026-02-08 03:19:18,985 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 03:19:18,985 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/garden semantic=0.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=-0.0500
2026-02-08 03:19:18,985 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.10ms fetch=0.06ms score=0.08ms total=0.26ms seeds=1 query_len=39 keyphrases=0 shortlisted=3 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 3, 'candidate_deduped': 3, 'fetch_calls': 3, 'fetch_success': 3, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 2, 'seed_link_added': 2, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 3} warnings=0
2026-02-08 03:19:18,986 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 03:19:18,986 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:19:18,986 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 03:19:18,986 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 03:19:18,986 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 03:19:18,986 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:19:18,986 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 03:19:18,986 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.14ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 03:19:18,988 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 03:19:18,988 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:19:18,988 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 03:19:18,988 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 03:19:18,988 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 03:19:18,988 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=31 docs=1
2026-02-08 03:19:18,988 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=-0.0500
2026-02-08 03:19:18,988 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.12ms fetch=0.04ms score=0.05ms total=0.22ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 03:19:18,993 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:19:19,002 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 03:19:19,006 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:40,427 - asky.research.source_shortlist - DEBUG - source_shortlist disabled for mode=standard in 0.00ms
2026-02-08 03:47:40,427 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.32ms
2026-02-08 03:47:40,434 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.00ms
2026-02-08 03:47:40,451 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 03:47:40,451 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [{"role": "user", "content": "Hi"}], "tools": null, "tool_choice": "auto"}
2026-02-08 03:47:40,451 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 03:47:40,451 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 03:47:40,452 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 03:47:40,452 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 03:47:40,452 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 03:47:40,452 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 1 seconds...
2026-02-08 03:47:40,452 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 03:47:40,453 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 03:47:40,453 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 03:47:40,453 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 03:47:40,453 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 5 seconds...
2026-02-08 03:47:40,453 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 03:47:40,456 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:47:40,456 - asky.core.engine - DEBUG - Tool call [71 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 03:47:40,456 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 03:47:40,456 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 03:47:40,456 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:47:40,457 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:47:40,457 - asky.core.engine - DEBUG - Tool call [82 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{"q": "test"}'}}
2026-02-08 03:47:40,457 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 03:47:40,457 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 03:47:40,457 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:47:40,479 - asky.rendering - INFO - [Opening browser: /path/to/archive/file.html]
2026-02-08 03:47:40,480 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:47:40,480 - asky.core.engine - DEBUG - Tool call [93 chrs]: {'id': 'call_123', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 03:47:40,480 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 03:47:40,480 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 03:47:40,480 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:47:40,481 - asky.core.engine - INFO - Starting turn 1/2
2026-02-08 03:47:40,481 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 03:47:40,481 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 03:47:40,481 - asky.core.engine - INFO - Starting turn 2/2
2026-02-08 03:47:40,481 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_2', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 03:47:40,481 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 03:47:40,481 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 03:47:40,481 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:47:40,482 - asky.core.engine - INFO - Starting turn 1/1
2026-02-08 03:47:40,482 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 03:47:40,482 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 03:47:40,482 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 03:47:40,482 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:47:51,389 - asky.research.source_shortlist - DEBUG - source_shortlist disabled for mode=standard in 0.00ms
2026-02-08 03:47:51,389 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.24ms
2026-02-08 03:47:51,395 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.01ms
2026-02-08 03:47:51,415 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:47:51,415 - asky.core.api_client - INFO - Sending request to LLM: test-model
2026-02-08 03:47:51,415 - asky.core.api_client - DEBUG - Payload: {"model": "test-model", "messages": [{"role": "user", "content": "test"}], "tools": [], "tool_choice": "auto"}
2026-02-08 03:47:51,415 - asky.core.api_client - INFO - [test] Sent: 1 tokens
2026-02-08 03:47:51,415 - asky.core.engine - ERROR - API Error 400: 400 Client Error: Bad Request
2026-02-08 03:47:51,415 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:47:51,416 - asky.core.engine - INFO - Context threshold reached (628/500). Compacting...
2026-02-08 03:47:51,416 - asky.core.engine - INFO - Compaction failed to preserve history. Returning minimal context: 625 tokens.
2026-02-08 03:47:51,417 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:47:51,417 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:47:51,418 - asky.core.engine - INFO - Context threshold reached (520/100). Compacting...
2026-02-08 03:47:51,418 - asky.core.engine - DEBUG - [Smart Compaction] Found summary for URL https://example.com/long-article (dict). Replacing content.
2026-02-08 03:47:51,418 - asky.core.engine - INFO - Smart compaction successful. Reduced from 520 to 42
2026-02-08 03:47:51,420 - asky.tools - INFO - Executing custom tool command: ls "."
2026-02-08 03:47:51,421 - asky.tools - INFO - Executing custom tool command: ls "/tmp/test"
2026-02-08 03:47:51,422 - asky.tools - INFO - Executing custom tool command: echo "hello world"
2026-02-08 03:47:51,423 - asky.tools - INFO - Executing custom tool command: echo "already quoted"
2026-02-08 03:47:51,425 - asky.tools - INFO - Executing custom tool command: echo "test"
2026-02-08 03:47:51,433 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 03:47:51,433 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 03:47:51,433 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 03:47:51,434 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 03:47:51,434 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:47:51,434 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 03:47:51,435 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 03:47:51,435 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 03:47:51,435 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 03:47:51,435 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:47:51,435 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 03:47:51,437 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 03:47:51,437 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 03:47:51,437 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 03:47:51,437 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 03:47:51,437 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:47:51,437 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 03:47:51,437 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 03:47:51,437 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 03:47:51,437 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 03:47:51,437 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:47:51,437 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 03:47:51,438 - asky.email_sender - ERROR - SMTP credentials not configured. Please set ASKY_SMTP_USER and ASKY_SMTP_PASSWORD.
2026-02-08 03:47:51,439 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 03:47:51,439 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 03:47:51,439 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 03:47:51,439 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 03:47:51,439 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:47:51,439 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 03:47:51,439 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 03:47:51,439 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 03:47:51,439 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 03:47:51,439 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:47:51,439 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 03:47:51,440 - asky.email_sender - ERROR - Failed to send email: Auth failed
2026-02-08 03:47:51,458 - asky.rendering - WARNING - Template not found at <MagicMock name='TEMPLATE_PATH' id='5075087920'>
2026-02-08 03:47:51,461 - asky.rendering - DEBUG - Extracted title for filename: Test Content
2026-02-08 03:47:51,483 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 03:47:51,483 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [{"role": "user", "content": "Hi"}], "tools": null, "tool_choice": "auto"}
2026-02-08 03:47:51,483 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 03:47:51,483 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 03:47:51,484 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 03:47:51,484 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 03:47:51,484 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 03:47:51,484 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 1 seconds...
2026-02-08 03:47:51,485 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 03:47:51,485 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 03:47:51,485 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 03:47:51,485 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 03:47:51,485 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 5 seconds...
2026-02-08 03:47:51,486 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 03:47:51,487 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:47:51,487 - asky.core.engine - DEBUG - Tool call [71 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 03:47:51,487 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 03:47:51,487 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 03:47:51,487 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:47:51,488 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:47:51,488 - asky.core.engine - DEBUG - Tool call [82 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{"q": "test"}'}}
2026-02-08 03:47:51,488 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 03:47:51,488 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 03:47:51,488 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:47:51,512 - asky.rendering - INFO - [Opening browser: /path/to/archive/file.html]
2026-02-08 03:47:51,512 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:47:51,513 - asky.core.engine - DEBUG - Tool call [93 chrs]: {'id': 'call_123', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 03:47:51,513 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 03:47:51,513 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 03:47:51,513 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:47:51,514 - asky.core.engine - INFO - Starting turn 1/2
2026-02-08 03:47:51,514 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 03:47:51,514 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 03:47:51,514 - asky.core.engine - INFO - Starting turn 2/2
2026-02-08 03:47:51,514 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_2', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 03:47:51,514 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 03:47:51,514 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 03:47:51,514 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:47:51,515 - asky.core.engine - INFO - Starting turn 1/1
2026-02-08 03:47:51,515 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 03:47:51,515 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 03:47:51,515 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 03:47:51,515 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:47:51,517 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 03:47:51,517 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [{"role": "user", "content": "Hi"}], "temperature": 0.5, "top_p": 0.9, "tools": null, "tool_choice": "auto"}
2026-02-08 03:47:51,517 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 03:47:51,517 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 03:47:51,518 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 03:47:51,518 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [], "temperature": 0.7, "tools": null, "tool_choice": "auto"}
2026-02-08 03:47:51,518 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 03:47:51,518 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 03:47:51,539 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 03:47:51,539 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 03:47:51,543 - asky.push_data - ERROR - Failed to push data to 'test_endpoint': Network error
2026-02-08 03:47:51,543 - asky.push_data - ERROR - Failed to build payload for endpoint 'test_endpoint': Missing required parameter: title
2026-02-08 03:47:51,544 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 03:47:51,640 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:51,643 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:51,644 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:47:51,648 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:51,648 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:47:51,920 - chromadb.config - DEBUG - Starting component System
2026-02-08 03:47:51,920 - chromadb.config - DEBUG - Starting component Posthog
2026-02-08 03:47:51,979 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:47:51,983 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:51,984 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 03:47:51,986 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 03:47:51,990 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:51,991 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 03:47:51,992 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 03:47:51,996 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:52,002 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:52,007 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:52,008 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:47:52,012 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:52,013 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:47:52,019 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:52,029 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:47:52,047 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:52,049 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 03:47:52,056 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:52,059 - asky.research.cache - DEBUG - Cached URL http://example1.com with id=1
2026-02-08 03:47:52,060 - asky.research.cache - DEBUG - Cached URL http://example2.com with id=2
2026-02-08 03:47:52,065 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:52,066 - asky.research.cache - DEBUG - Scheduled background summarization for http://example.com
2026-02-08 03:47:52,066 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:47:52,067 - asky.research.cache - DEBUG - Background summarization completed for http://example.com
2026-02-08 03:47:52,575 - asky.research.cache - DEBUG - Shutting down research cache executor...
2026-02-08 03:47:52,575 - asky.research.cache - DEBUG - Research cache executor shutdown complete
2026-02-08 03:47:52,590 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:52,600 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:52,610 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:52,616 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:52,621 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:52,622 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:47:52,627 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:52,628 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:47:52,632 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:52,637 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:52,642 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:52,642 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:47:52,643 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 03:47:52,643 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 03:47:52,648 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:52,648 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:47:52,649 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 03:47:52,649 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 03:47:52,649 - asky.research.cache - DEBUG - Saved finding id=4
2026-02-08 03:47:52,650 - asky.research.cache - DEBUG - Saved finding id=5
2026-02-08 03:47:52,650 - asky.research.cache - DEBUG - Saved finding id=6
2026-02-08 03:47:52,651 - asky.research.cache - DEBUG - Saved finding id=7
2026-02-08 03:47:52,651 - asky.research.cache - DEBUG - Saved finding id=8
2026-02-08 03:47:52,651 - asky.research.cache - DEBUG - Saved finding id=9
2026-02-08 03:47:52,652 - asky.research.cache - DEBUG - Saved finding id=10
2026-02-08 03:47:52,656 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:52,656 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:47:52,657 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 03:47:52,657 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 03:47:52,661 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:52,662 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:47:52,662 - asky.research.cache - DEBUG - Deleted finding id=1
2026-02-08 03:47:52,666 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:52,670 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:52,670 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:47:52,675 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:52,676 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:47:52,677 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 03:47:52,680 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:52,680 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:47:52,684 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:52,684 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:47:52,707 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:47:52,708 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:47:52,708 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:47:52,708 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:47:52,708 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:47:52,709 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:47:52,709 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:47:52,710 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:47:52,711 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:47:52,711 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:47:52,712 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:47:52,712 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:47:52,713 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:47:52,713 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:47:52,714 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:47:52,714 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:47:52,715 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 03:47:52,715 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 03:47:52,715 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 03:47:52,715 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 03:47:52,715 - asky.research.embeddings - INFO - Loaded fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' successfully. Update research.embedding.model to avoid repeated primary model load failures.
2026-02-08 03:47:52,716 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 03:47:52,716 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 03:47:52,716 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 03:47:52,716 - asky.research.embeddings - DEBUG - Embedding model 'sentence-transformers/all-MiniLM-L6-v2' not available locally, attempting remote load.
2026-02-08 03:47:52,716 - asky.research.embeddings - ERROR - Failed to load sentence-transformer model 'bad/model': cannot load bad/model
2026-02-08 03:47:52,716 - asky.research.embeddings - ERROR - Fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' also failed: cannot load sentence-transformers/all-MiniLM-L6-v2
2026-02-08 03:47:52,716 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=cached/model, device=cpu
2026-02-08 03:47:52,716 - asky.research.embeddings - DEBUG - Loaded embedding model 'cached/model' from local Hugging Face cache.
2026-02-08 03:47:52,717 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=trunc/model, device=cpu
2026-02-08 03:47:52,717 - asky.research.embeddings - DEBUG - Loaded embedding model 'trunc/model' from local Hugging Face cache.
2026-02-08 03:47:52,721 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 03:47:52,725 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:47:52,725 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 03:47:52,727 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 03:47:52,728 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 03:47:52,729 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:47:52,730 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:47:52,732 - asky.research.tools - DEBUG - Cache hit for http://b.com
2026-02-08 03:47:52,732 - asky.research.tools - DEBUG - Cache hit for http://a.com
2026-02-08 03:47:52,734 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:47:52,736 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:47:52,745 - asky.research.tools - DEBUG - Generating chunk embeddings for http://example.com
2026-02-08 03:47:52,746 - asky.research.tools - ERROR - RAG retrieval failed for http://example.com: DB error
2026-02-08 03:47:52,754 - asky.research.tools - WARNING - Finding embedding failed (will still be saved): Embedding API unavailable
2026-02-08 03:47:52,759 - asky.research.tools - WARNING - Semantic search unavailable: API unavailable
2026-02-08 03:47:52,780 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:47:52,791 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 03:47:52,804 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:47:52,805 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:47:52,816 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 03:47:52,816 - asky.research.vector_store - WARNING - Chroma link query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:47:52,834 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:47:52,842 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 03:47:52,845 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:47:52,858 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:47:52,858 - asky.research.vector_store - WARNING - Chroma hybrid query failed; using SQLite dense scores: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:47:52,870 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:47:52,872 - asky.research.vector_store - WARNING - Embedding count mismatch: 2 vs 3
2026-02-08 03:47:52,873 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:47:52,883 - asky.research.vector_store - DEBUG - Stored 5 chunk embeddings for cache_id=1
2026-02-08 03:47:52,883 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:47:52,894 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 03:47:52,905 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 03:47:52,910 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 03:47:52,923 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 03:47:52,928 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 03:47:52,937 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 03:47:52,941 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 03:47:52,962 - asky.core.session_manager - INFO - Session 1 reached threshold (10/5). Compacting...
2026-02-08 03:47:52,962 - asky.core.session_manager - INFO - Found 1 messages to compact for session 1
2026-02-08 03:47:52,962 - asky.core.session_manager - INFO - Compacted content length: 9 chars
2026-02-08 03:47:52,962 - asky.core.session_manager - INFO - Compaction saved for session 1
2026-02-08 03:47:52,972 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=True
2026-02-08 03:47:52,972 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=46 results=2 elapsed=0.00ms
2026-02-08 03:47:52,972 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 03:47:52,972 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://docs.example.com/ai-safety text_len=47 title_len=19 elapsed=0.00ms source_type=search
2026-02-08 03:47:52,972 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://blog.example.com/plants text_len=52 title_len=13 elapsed=0.00ms source_type=search
2026-02-08 03:47:52,972 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 03:47:52,972 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=46 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:47:52,972 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://docs.example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 03:47:52,972 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://blog.example.com/plants semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 03:47:52,972 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.11ms fetch=0.06ms score=0.07ms total=0.25ms seeds=0 query_len=46 keyphrases=0 shortlisted=2 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 03:47:52,973 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 03:47:52,973 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:47:52,973 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 03:47:52,973 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 03:47:52,973 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 03:47:52,973 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:47:52,973 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 03:47:52,973 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.15ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 03:47:52,974 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=2 selected=2 added=2 elapsed=0.03ms warning=None
2026-02-08 03:47:52,974 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=2 elapsed=0.05ms max_pages=1 per_page=10
2026-02-08 03:47:52,974 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:47:52,974 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=3 deduped=3 max_candidates=30
2026-02-08 03:47:52,974 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=50 title_len=9 elapsed=0.00ms source_type=seed
2026-02-08 03:47:52,974 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/ai-safety text_len=51 title_len=15 elapsed=0.00ms source_type=seed_link
2026-02-08 03:47:52,974 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/garden text_len=51 title_len=11 elapsed=0.00ms source_type=seed_link
2026-02-08 03:47:52,974 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=3 attempted=3 extracted=3 max_fetch=15
2026-02-08 03:47:52,974 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=39 docs=3 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:47:52,974 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 03:47:52,974 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 03:47:52,974 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/garden semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 03:47:52,974 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.12ms fetch=0.07ms score=0.09ms total=0.29ms seeds=1 query_len=39 keyphrases=0 shortlisted=3 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 3, 'candidate_deduped': 3, 'fetch_calls': 3, 'fetch_success': 3, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 2, 'seed_link_added': 2, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 3} warnings=0
2026-02-08 03:47:52,975 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 03:47:52,975 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:47:52,975 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 03:47:52,975 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 03:47:52,975 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 03:47:52,975 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:47:52,975 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 03:47:52,975 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.05ms fetch=0.03ms score=0.04ms total=0.13ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 03:47:52,976 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=3 selected=3 added=1 elapsed=0.03ms warning=None
2026-02-08 03:47:52,976 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=1 elapsed=0.05ms max_pages=1 per_page=10
2026-02-08 03:47:52,976 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:47:52,976 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=2 deduped=2 max_candidates=30
2026-02-08 03:47:52,976 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=57 title_len=5 elapsed=0.00ms source_type=seed
2026-02-08 03:47:52,976 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/world text_len=63 title_len=5 elapsed=0.00ms source_type=seed_link
2026-02-08 03:47:52,976 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 03:47:52,976 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=26 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:47:52,977 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 03:47:52,977 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/world semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 03:47:52,977 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.10ms fetch=0.04ms score=0.06ms total=0.21ms seeds=1 query_len=26 keyphrases=0 shortlisted=2 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 3, 'seed_link_added': 1, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 03:47:52,977 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=False
2026-02-08 03:47:52,977 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=43 results=2 elapsed=0.00ms
2026-02-08 03:47:52,977 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 03:47:52,977 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/europe text_len=80 title_len=6 elapsed=0.00ms source_type=search
2026-02-08 03:47:52,978 - asky.research.source_shortlist - DEBUG - source_shortlist fetch canonical dedupe skip url=https://example.com/europe canonical=https://example.com/europe
2026-02-08 03:47:52,978 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=1 max_fetch=15
2026-02-08 03:47:52,978 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=43 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:47:52,978 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/europe semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 03:47:52,978 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.05ms score=0.04ms total=0.16ms seeds=0 query_len=43 keyphrases=0 shortlisted=1 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 1, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 03:47:52,978 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 03:47:52,978 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:47:52,978 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 03:47:52,978 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=54 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 03:47:52,979 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 03:47:52,979 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=27 docs=1
2026-02-08 03:47:52,979 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.0000 final=0.0000
2026-02-08 03:47:52,979 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.05ms fetch=0.03ms score=0.04ms total=0.13ms seeds=1 query_len=27 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 03:47:52,980 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 03:47:52,980 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:47:52,980 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 03:47:52,980 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 03:47:52,980 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 03:47:52,980 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=31 docs=1
2026-02-08 03:47:52,980 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 03:47:52,980 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.14ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 03:47:52,984 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:47:52,994 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 03:47:52,998 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:06,589 - asky.research.source_shortlist - DEBUG - source_shortlist disabled for mode=standard in 0.00ms
2026-02-08 03:48:06,589 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.25ms
2026-02-08 03:48:06,595 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.00ms
2026-02-08 03:48:06,614 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:48:06,614 - asky.core.api_client - INFO - Sending request to LLM: test-model
2026-02-08 03:48:06,614 - asky.core.api_client - DEBUG - Payload: {"model": "test-model", "messages": [{"role": "user", "content": "test"}], "tools": [], "tool_choice": "auto"}
2026-02-08 03:48:06,614 - asky.core.api_client - INFO - [test] Sent: 1 tokens
2026-02-08 03:48:06,614 - asky.core.engine - ERROR - API Error 400: 400 Client Error: Bad Request
2026-02-08 03:48:06,615 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:48:06,615 - asky.core.engine - INFO - Context threshold reached (628/500). Compacting...
2026-02-08 03:48:06,615 - asky.core.engine - INFO - Compaction failed to preserve history. Returning minimal context: 625 tokens.
2026-02-08 03:48:06,616 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:48:06,617 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:48:06,617 - asky.core.engine - INFO - Context threshold reached (520/100). Compacting...
2026-02-08 03:48:06,618 - asky.core.engine - DEBUG - [Smart Compaction] Found summary for URL https://example.com/long-article (dict). Replacing content.
2026-02-08 03:48:06,618 - asky.core.engine - INFO - Smart compaction successful. Reduced from 520 to 42
2026-02-08 03:48:06,619 - asky.tools - INFO - Executing custom tool command: ls "."
2026-02-08 03:48:06,620 - asky.tools - INFO - Executing custom tool command: ls "/tmp/test"
2026-02-08 03:48:06,621 - asky.tools - INFO - Executing custom tool command: echo "hello world"
2026-02-08 03:48:06,622 - asky.tools - INFO - Executing custom tool command: echo "already quoted"
2026-02-08 03:48:06,624 - asky.tools - INFO - Executing custom tool command: echo "test"
2026-02-08 03:48:06,633 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 03:48:06,634 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 03:48:06,634 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 03:48:06,634 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 03:48:06,634 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:48:06,635 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 03:48:06,635 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 03:48:06,635 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 03:48:06,635 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 03:48:06,635 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:48:06,636 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 03:48:06,638 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 03:48:06,638 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 03:48:06,638 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 03:48:06,638 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 03:48:06,638 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:48:06,638 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 03:48:06,638 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 03:48:06,638 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 03:48:06,638 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 03:48:06,638 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:48:06,638 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 03:48:06,640 - asky.email_sender - ERROR - SMTP credentials not configured. Please set ASKY_SMTP_USER and ASKY_SMTP_PASSWORD.
2026-02-08 03:48:06,640 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 03:48:06,640 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 03:48:06,640 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 03:48:06,640 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 03:48:06,640 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:48:06,640 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 03:48:06,641 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 03:48:06,641 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 03:48:06,641 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 03:48:06,641 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:48:06,641 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 03:48:06,641 - asky.email_sender - ERROR - Failed to send email: Auth failed
2026-02-08 03:48:06,658 - asky.rendering - WARNING - Template not found at <MagicMock name='TEMPLATE_PATH' id='4624676720'>
2026-02-08 03:48:06,661 - asky.rendering - DEBUG - Extracted title for filename: Test Content
2026-02-08 03:48:06,681 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 03:48:06,681 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [{"role": "user", "content": "Hi"}], "tools": null, "tool_choice": "auto"}
2026-02-08 03:48:06,681 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 03:48:06,682 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 03:48:06,682 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 03:48:06,682 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 03:48:06,682 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 03:48:06,683 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 1 seconds...
2026-02-08 03:48:06,683 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 03:48:06,684 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 03:48:06,684 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 03:48:06,684 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 03:48:06,684 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 5 seconds...
2026-02-08 03:48:06,684 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 03:48:06,685 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:48:06,685 - asky.core.engine - DEBUG - Tool call [71 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 03:48:06,685 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 03:48:06,685 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 03:48:06,685 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:48:06,686 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:48:06,686 - asky.core.engine - DEBUG - Tool call [82 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{"q": "test"}'}}
2026-02-08 03:48:06,686 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 03:48:06,686 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 03:48:06,686 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:48:06,689 - asky.rendering - INFO - [Opening browser: /path/to/archive/file.html]
2026-02-08 03:48:06,690 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:48:06,690 - asky.core.engine - DEBUG - Tool call [93 chrs]: {'id': 'call_123', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 03:48:06,691 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 03:48:06,691 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 03:48:06,691 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:48:06,692 - asky.core.engine - INFO - Starting turn 1/2
2026-02-08 03:48:06,692 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 03:48:06,692 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 03:48:06,692 - asky.core.engine - INFO - Starting turn 2/2
2026-02-08 03:48:06,692 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_2', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 03:48:06,692 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 03:48:06,692 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 03:48:06,692 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:48:06,693 - asky.core.engine - INFO - Starting turn 1/1
2026-02-08 03:48:06,693 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 03:48:06,693 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 03:48:06,693 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 03:48:06,694 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:48:06,696 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 03:48:06,696 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [{"role": "user", "content": "Hi"}], "temperature": 0.5, "top_p": 0.9, "tools": null, "tool_choice": "auto"}
2026-02-08 03:48:06,696 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 03:48:06,696 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 03:48:06,697 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 03:48:06,697 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [], "temperature": 0.7, "tools": null, "tool_choice": "auto"}
2026-02-08 03:48:06,697 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 03:48:06,698 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 03:48:06,796 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 03:48:06,797 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 03:48:06,801 - asky.push_data - ERROR - Failed to push data to 'test_endpoint': Network error
2026-02-08 03:48:06,801 - asky.push_data - ERROR - Failed to build payload for endpoint 'test_endpoint': Missing required parameter: title
2026-02-08 03:48:06,802 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 03:48:06,815 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:06,818 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:06,819 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:48:06,823 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:06,824 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:48:07,079 - chromadb.config - DEBUG - Starting component System
2026-02-08 03:48:07,079 - chromadb.config - DEBUG - Starting component Posthog
2026-02-08 03:48:07,135 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:48:07,139 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:07,140 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 03:48:07,141 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 03:48:07,145 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:07,145 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 03:48:07,146 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 03:48:07,150 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:07,157 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:07,161 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:07,162 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:48:07,166 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:07,166 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:48:07,169 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:07,170 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:48:07,174 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:07,175 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 03:48:07,178 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:07,179 - asky.research.cache - DEBUG - Cached URL http://example1.com with id=1
2026-02-08 03:48:07,179 - asky.research.cache - DEBUG - Cached URL http://example2.com with id=2
2026-02-08 03:48:07,183 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:07,183 - asky.research.cache - DEBUG - Scheduled background summarization for http://example.com
2026-02-08 03:48:07,184 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:48:07,184 - asky.research.cache - DEBUG - Background summarization completed for http://example.com
2026-02-08 03:48:07,692 - asky.research.cache - DEBUG - Shutting down research cache executor...
2026-02-08 03:48:07,692 - asky.research.cache - DEBUG - Research cache executor shutdown complete
2026-02-08 03:48:07,705 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:07,715 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:07,722 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:07,728 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:07,733 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:07,734 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:48:07,739 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:07,740 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:48:07,744 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:07,749 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:07,753 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:07,754 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:48:07,755 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 03:48:07,755 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 03:48:07,760 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:07,760 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:48:07,761 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 03:48:07,761 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 03:48:07,761 - asky.research.cache - DEBUG - Saved finding id=4
2026-02-08 03:48:07,762 - asky.research.cache - DEBUG - Saved finding id=5
2026-02-08 03:48:07,762 - asky.research.cache - DEBUG - Saved finding id=6
2026-02-08 03:48:07,763 - asky.research.cache - DEBUG - Saved finding id=7
2026-02-08 03:48:07,763 - asky.research.cache - DEBUG - Saved finding id=8
2026-02-08 03:48:07,764 - asky.research.cache - DEBUG - Saved finding id=9
2026-02-08 03:48:07,764 - asky.research.cache - DEBUG - Saved finding id=10
2026-02-08 03:48:07,768 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:07,768 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:48:07,769 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 03:48:07,769 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 03:48:07,773 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:07,773 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:48:07,774 - asky.research.cache - DEBUG - Deleted finding id=1
2026-02-08 03:48:07,778 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:07,781 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:07,782 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:48:07,786 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:07,787 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:48:07,787 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 03:48:07,792 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:07,792 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:48:07,795 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:07,796 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:48:07,818 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:48:07,818 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:48:07,818 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:48:07,819 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:48:07,819 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:48:07,820 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:48:07,820 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:48:07,821 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:48:07,822 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:48:07,822 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:48:07,823 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:48:07,824 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:48:07,824 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:48:07,825 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:48:07,827 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:48:07,827 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:48:07,827 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 03:48:07,827 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 03:48:07,828 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 03:48:07,828 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 03:48:07,828 - asky.research.embeddings - INFO - Loaded fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' successfully. Update research.embedding.model to avoid repeated primary model load failures.
2026-02-08 03:48:07,828 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 03:48:07,829 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 03:48:07,829 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 03:48:07,829 - asky.research.embeddings - DEBUG - Embedding model 'sentence-transformers/all-MiniLM-L6-v2' not available locally, attempting remote load.
2026-02-08 03:48:07,829 - asky.research.embeddings - ERROR - Failed to load sentence-transformer model 'bad/model': cannot load bad/model
2026-02-08 03:48:07,829 - asky.research.embeddings - ERROR - Fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' also failed: cannot load sentence-transformers/all-MiniLM-L6-v2
2026-02-08 03:48:07,829 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=cached/model, device=cpu
2026-02-08 03:48:07,830 - asky.research.embeddings - DEBUG - Loaded embedding model 'cached/model' from local Hugging Face cache.
2026-02-08 03:48:07,830 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=trunc/model, device=cpu
2026-02-08 03:48:07,830 - asky.research.embeddings - DEBUG - Loaded embedding model 'trunc/model' from local Hugging Face cache.
2026-02-08 03:48:07,834 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 03:48:07,838 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:48:07,838 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 03:48:07,840 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 03:48:07,841 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 03:48:07,842 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:48:07,844 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:48:07,845 - asky.research.tools - DEBUG - Cache hit for http://b.com
2026-02-08 03:48:07,846 - asky.research.tools - DEBUG - Cache hit for http://a.com
2026-02-08 03:48:07,847 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:48:07,849 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:48:07,858 - asky.research.tools - DEBUG - Generating chunk embeddings for http://example.com
2026-02-08 03:48:07,859 - asky.research.tools - ERROR - RAG retrieval failed for http://example.com: DB error
2026-02-08 03:48:07,867 - asky.research.tools - WARNING - Finding embedding failed (will still be saved): Embedding API unavailable
2026-02-08 03:48:07,871 - asky.research.tools - WARNING - Semantic search unavailable: API unavailable
2026-02-08 03:48:07,893 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:48:07,904 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 03:48:07,917 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:48:07,918 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:48:07,929 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 03:48:07,929 - asky.research.vector_store - WARNING - Chroma link query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:48:07,949 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:48:07,959 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 03:48:07,962 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:48:07,975 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:48:07,976 - asky.research.vector_store - WARNING - Chroma hybrid query failed; using SQLite dense scores: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:48:07,987 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:48:07,990 - asky.research.vector_store - WARNING - Embedding count mismatch: 2 vs 3
2026-02-08 03:48:07,991 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:48:08,003 - asky.research.vector_store - DEBUG - Stored 5 chunk embeddings for cache_id=1
2026-02-08 03:48:08,003 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:48:08,013 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 03:48:08,024 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 03:48:08,029 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 03:48:08,042 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 03:48:08,047 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 03:48:08,056 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 03:48:08,062 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 03:48:08,081 - asky.core.session_manager - INFO - Session 1 reached threshold (10/5). Compacting...
2026-02-08 03:48:08,081 - asky.core.session_manager - INFO - Found 1 messages to compact for session 1
2026-02-08 03:48:08,081 - asky.core.session_manager - INFO - Compacted content length: 9 chars
2026-02-08 03:48:08,082 - asky.core.session_manager - INFO - Compaction saved for session 1
2026-02-08 03:48:08,091 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=True
2026-02-08 03:48:08,091 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=46 results=2 elapsed=0.00ms
2026-02-08 03:48:08,091 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 03:48:08,091 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://docs.example.com/ai-safety text_len=47 title_len=19 elapsed=0.00ms source_type=search
2026-02-08 03:48:08,091 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://blog.example.com/plants text_len=52 title_len=13 elapsed=0.00ms source_type=search
2026-02-08 03:48:08,091 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 03:48:08,091 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=46 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:48:08,091 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://docs.example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 03:48:08,091 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://blog.example.com/plants semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 03:48:08,091 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.11ms fetch=0.07ms score=0.07ms total=0.26ms seeds=0 query_len=46 keyphrases=0 shortlisted=2 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 03:48:08,092 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 03:48:08,092 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:48:08,092 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 03:48:08,092 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 03:48:08,092 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 03:48:08,092 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:48:08,092 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 03:48:08,092 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.06ms fetch=0.03ms score=0.05ms total=0.15ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 03:48:08,093 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=2 selected=2 added=2 elapsed=0.03ms warning=None
2026-02-08 03:48:08,093 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=2 elapsed=0.05ms max_pages=1 per_page=10
2026-02-08 03:48:08,093 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:48:08,093 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=3 deduped=3 max_candidates=30
2026-02-08 03:48:08,093 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=50 title_len=9 elapsed=0.00ms source_type=seed
2026-02-08 03:48:08,093 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/ai-safety text_len=51 title_len=15 elapsed=0.00ms source_type=seed_link
2026-02-08 03:48:08,093 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/garden text_len=51 title_len=11 elapsed=0.00ms source_type=seed_link
2026-02-08 03:48:08,093 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=3 attempted=3 extracted=3 max_fetch=15
2026-02-08 03:48:08,093 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=39 docs=3 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:48:08,093 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 03:48:08,093 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 03:48:08,093 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/garden semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 03:48:08,093 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.11ms fetch=0.06ms score=0.09ms total=0.27ms seeds=1 query_len=39 keyphrases=0 shortlisted=3 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 3, 'candidate_deduped': 3, 'fetch_calls': 3, 'fetch_success': 3, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 2, 'seed_link_added': 2, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 3} warnings=0
2026-02-08 03:48:08,094 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 03:48:08,094 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:48:08,094 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 03:48:08,094 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 03:48:08,094 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 03:48:08,094 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:48:08,094 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 03:48:08,094 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.13ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 03:48:08,095 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=3 selected=3 added=1 elapsed=0.03ms warning=None
2026-02-08 03:48:08,095 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=1 elapsed=0.05ms max_pages=1 per_page=10
2026-02-08 03:48:08,095 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:48:08,095 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=2 deduped=2 max_candidates=30
2026-02-08 03:48:08,095 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=57 title_len=5 elapsed=0.00ms source_type=seed
2026-02-08 03:48:08,095 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/world text_len=63 title_len=5 elapsed=0.00ms source_type=seed_link
2026-02-08 03:48:08,095 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 03:48:08,095 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=26 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:48:08,095 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 03:48:08,095 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/world semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 03:48:08,096 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.10ms fetch=0.05ms score=0.06ms total=0.23ms seeds=1 query_len=26 keyphrases=0 shortlisted=2 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 3, 'seed_link_added': 1, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 03:48:08,096 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=False
2026-02-08 03:48:08,096 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=43 results=2 elapsed=0.00ms
2026-02-08 03:48:08,096 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 03:48:08,096 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/europe text_len=80 title_len=6 elapsed=0.00ms source_type=search
2026-02-08 03:48:08,096 - asky.research.source_shortlist - DEBUG - source_shortlist fetch canonical dedupe skip url=https://example.com/europe canonical=https://example.com/europe
2026-02-08 03:48:08,097 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=1 max_fetch=15
2026-02-08 03:48:08,097 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=43 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:48:08,097 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/europe semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 03:48:08,097 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.07ms fetch=0.06ms score=0.04ms total=0.18ms seeds=0 query_len=43 keyphrases=0 shortlisted=1 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 1, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 03:48:08,097 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 03:48:08,097 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:48:08,098 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 03:48:08,098 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=54 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 03:48:08,098 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 03:48:08,098 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=27 docs=1
2026-02-08 03:48:08,098 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.0000 final=0.0000
2026-02-08 03:48:08,098 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.14ms seeds=1 query_len=27 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 03:48:08,099 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 03:48:08,099 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:48:08,099 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 03:48:08,099 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 03:48:08,099 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 03:48:08,099 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=31 docs=1
2026-02-08 03:48:08,099 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 03:48:08,099 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.14ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 03:48:08,103 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:08,113 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 03:48:08,117 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:37,955 - asky.research.source_shortlist - DEBUG - source_shortlist disabled for mode=standard in 0.00ms
2026-02-08 03:48:37,955 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.27ms
2026-02-08 03:48:37,962 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.01ms
2026-02-08 03:48:37,981 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:48:37,981 - asky.core.api_client - INFO - Sending request to LLM: test-model
2026-02-08 03:48:37,981 - asky.core.api_client - DEBUG - Payload: {"model": "test-model", "messages": [{"role": "user", "content": "test"}], "tools": [], "tool_choice": "auto"}
2026-02-08 03:48:37,981 - asky.core.api_client - INFO - [test] Sent: 1 tokens
2026-02-08 03:48:37,981 - asky.core.engine - ERROR - API Error 400: 400 Client Error: Bad Request
2026-02-08 03:48:37,982 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:48:37,983 - asky.core.engine - INFO - Context threshold reached (628/500). Compacting...
2026-02-08 03:48:37,983 - asky.core.engine - INFO - Compaction failed to preserve history. Returning minimal context: 625 tokens.
2026-02-08 03:48:37,984 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:48:37,984 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:48:37,985 - asky.core.engine - INFO - Context threshold reached (520/100). Compacting...
2026-02-08 03:48:37,985 - asky.core.engine - DEBUG - [Smart Compaction] Found summary for URL https://example.com/long-article (dict). Replacing content.
2026-02-08 03:48:37,985 - asky.core.engine - INFO - Smart compaction successful. Reduced from 520 to 42
2026-02-08 03:48:37,987 - asky.tools - INFO - Executing custom tool command: ls "."
2026-02-08 03:48:37,988 - asky.tools - INFO - Executing custom tool command: ls "/tmp/test"
2026-02-08 03:48:37,989 - asky.tools - INFO - Executing custom tool command: echo "hello world"
2026-02-08 03:48:37,990 - asky.tools - INFO - Executing custom tool command: echo "already quoted"
2026-02-08 03:48:37,992 - asky.tools - INFO - Executing custom tool command: echo "test"
2026-02-08 03:48:38,000 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 03:48:38,000 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 03:48:38,000 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 03:48:38,001 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 03:48:38,001 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:48:38,001 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 03:48:38,002 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 03:48:38,002 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 03:48:38,002 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 03:48:38,002 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:48:38,002 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 03:48:38,004 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 03:48:38,004 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 03:48:38,004 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 03:48:38,004 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 03:48:38,004 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:48:38,004 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 03:48:38,004 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 03:48:38,004 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 03:48:38,004 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 03:48:38,004 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:48:38,004 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 03:48:38,006 - asky.email_sender - ERROR - SMTP credentials not configured. Please set ASKY_SMTP_USER and ASKY_SMTP_PASSWORD.
2026-02-08 03:48:38,007 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 03:48:38,007 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 03:48:38,007 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 03:48:38,007 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 03:48:38,007 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:48:38,007 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 03:48:38,007 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 03:48:38,007 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 03:48:38,007 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 03:48:38,007 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 03:48:38,007 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 03:48:38,007 - asky.email_sender - ERROR - Failed to send email: Auth failed
2026-02-08 03:48:38,025 - asky.rendering - WARNING - Template not found at <MagicMock name='TEMPLATE_PATH' id='5393855024'>
2026-02-08 03:48:38,028 - asky.rendering - DEBUG - Extracted title for filename: Test Content
2026-02-08 03:48:38,050 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 03:48:38,050 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [{"role": "user", "content": "Hi"}], "tools": null, "tool_choice": "auto"}
2026-02-08 03:48:38,050 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 03:48:38,050 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 03:48:38,052 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 03:48:38,052 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 03:48:38,052 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 03:48:38,052 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 1 seconds...
2026-02-08 03:48:38,052 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 03:48:38,053 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 03:48:38,053 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 03:48:38,053 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 03:48:38,053 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 5 seconds...
2026-02-08 03:48:38,053 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 03:48:38,054 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:48:38,054 - asky.core.engine - DEBUG - Tool call [71 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 03:48:38,054 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 03:48:38,054 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 03:48:38,054 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:48:38,055 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:48:38,055 - asky.core.engine - DEBUG - Tool call [82 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{"q": "test"}'}}
2026-02-08 03:48:38,055 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 03:48:38,055 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 03:48:38,055 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:48:38,059 - asky.rendering - INFO - [Opening browser: /path/to/archive/file.html]
2026-02-08 03:48:38,060 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 03:48:38,060 - asky.core.engine - DEBUG - Tool call [93 chrs]: {'id': 'call_123', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 03:48:38,060 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 03:48:38,060 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 03:48:38,060 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:48:38,062 - asky.core.engine - INFO - Starting turn 1/2
2026-02-08 03:48:38,062 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 03:48:38,062 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 03:48:38,062 - asky.core.engine - INFO - Starting turn 2/2
2026-02-08 03:48:38,062 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_2', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 03:48:38,062 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 03:48:38,062 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 03:48:38,063 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:48:38,064 - asky.core.engine - INFO - Starting turn 1/1
2026-02-08 03:48:38,064 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 03:48:38,064 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 03:48:38,064 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 03:48:38,064 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 03:48:38,066 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 03:48:38,066 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [{"role": "user", "content": "Hi"}], "temperature": 0.5, "top_p": 0.9, "tools": null, "tool_choice": "auto"}
2026-02-08 03:48:38,066 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 03:48:38,066 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 03:48:38,067 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 03:48:38,067 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [], "temperature": 0.7, "tools": null, "tool_choice": "auto"}
2026-02-08 03:48:38,067 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 03:48:38,067 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 03:48:38,085 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 03:48:38,086 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 03:48:38,090 - asky.push_data - ERROR - Failed to push data to 'test_endpoint': Network error
2026-02-08 03:48:38,091 - asky.push_data - ERROR - Failed to build payload for endpoint 'test_endpoint': Missing required parameter: title
2026-02-08 03:48:38,092 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 03:48:38,107 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:38,111 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:38,112 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:48:38,116 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:38,116 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:48:38,466 - chromadb.config - DEBUG - Starting component System
2026-02-08 03:48:38,466 - chromadb.config - DEBUG - Starting component Posthog
2026-02-08 03:48:38,525 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:48:38,529 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:38,529 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 03:48:38,531 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 03:48:38,534 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:38,535 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 03:48:38,536 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 03:48:38,540 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:38,543 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:38,547 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:38,548 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:48:38,553 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:38,553 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:48:38,557 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:38,558 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:48:38,562 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:38,563 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 03:48:38,567 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:38,567 - asky.research.cache - DEBUG - Cached URL http://example1.com with id=1
2026-02-08 03:48:38,568 - asky.research.cache - DEBUG - Cached URL http://example2.com with id=2
2026-02-08 03:48:38,572 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:38,572 - asky.research.cache - DEBUG - Scheduled background summarization for http://example.com
2026-02-08 03:48:38,572 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 03:48:38,573 - asky.research.cache - DEBUG - Background summarization completed for http://example.com
2026-02-08 03:48:39,080 - asky.research.cache - DEBUG - Shutting down research cache executor...
2026-02-08 03:48:39,080 - asky.research.cache - DEBUG - Research cache executor shutdown complete
2026-02-08 03:48:39,093 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:39,104 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:39,112 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:39,118 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:39,124 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:39,125 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:48:39,130 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:39,131 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:48:39,135 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:39,140 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:39,145 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:39,145 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:48:39,146 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 03:48:39,146 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 03:48:39,151 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:39,151 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:48:39,152 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 03:48:39,152 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 03:48:39,153 - asky.research.cache - DEBUG - Saved finding id=4
2026-02-08 03:48:39,153 - asky.research.cache - DEBUG - Saved finding id=5
2026-02-08 03:48:39,154 - asky.research.cache - DEBUG - Saved finding id=6
2026-02-08 03:48:39,154 - asky.research.cache - DEBUG - Saved finding id=7
2026-02-08 03:48:39,154 - asky.research.cache - DEBUG - Saved finding id=8
2026-02-08 03:48:39,155 - asky.research.cache - DEBUG - Saved finding id=9
2026-02-08 03:48:39,155 - asky.research.cache - DEBUG - Saved finding id=10
2026-02-08 03:48:39,159 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:39,160 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:48:39,160 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 03:48:39,161 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 03:48:39,164 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:39,165 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:48:39,166 - asky.research.cache - DEBUG - Deleted finding id=1
2026-02-08 03:48:39,169 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:39,173 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:39,173 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:48:39,177 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:39,178 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:48:39,178 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 03:48:39,182 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:39,183 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:48:39,186 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:39,186 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 03:48:39,210 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:48:39,210 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:48:39,211 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:48:39,211 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:48:39,211 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:48:39,212 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:48:39,212 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:48:39,213 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:48:39,214 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:48:39,214 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:48:39,215 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:48:39,216 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:48:39,216 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:48:39,216 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:48:39,217 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 03:48:39,217 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 03:48:39,218 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 03:48:39,218 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 03:48:39,218 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 03:48:39,218 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 03:48:39,218 - asky.research.embeddings - INFO - Loaded fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' successfully. Update research.embedding.model to avoid repeated primary model load failures.
2026-02-08 03:48:39,219 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 03:48:39,219 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 03:48:39,219 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 03:48:39,219 - asky.research.embeddings - DEBUG - Embedding model 'sentence-transformers/all-MiniLM-L6-v2' not available locally, attempting remote load.
2026-02-08 03:48:39,219 - asky.research.embeddings - ERROR - Failed to load sentence-transformer model 'bad/model': cannot load bad/model
2026-02-08 03:48:39,219 - asky.research.embeddings - ERROR - Fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' also failed: cannot load sentence-transformers/all-MiniLM-L6-v2
2026-02-08 03:48:39,220 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=cached/model, device=cpu
2026-02-08 03:48:39,220 - asky.research.embeddings - DEBUG - Loaded embedding model 'cached/model' from local Hugging Face cache.
2026-02-08 03:48:39,221 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=trunc/model, device=cpu
2026-02-08 03:48:39,221 - asky.research.embeddings - DEBUG - Loaded embedding model 'trunc/model' from local Hugging Face cache.
2026-02-08 03:48:39,225 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 03:48:39,229 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:48:39,229 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 03:48:39,232 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 03:48:39,233 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 03:48:39,234 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:48:39,235 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:48:39,237 - asky.research.tools - DEBUG - Cache hit for http://b.com
2026-02-08 03:48:39,237 - asky.research.tools - DEBUG - Cache hit for http://a.com
2026-02-08 03:48:39,239 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:48:39,240 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 03:48:39,251 - asky.research.tools - DEBUG - Generating chunk embeddings for http://example.com
2026-02-08 03:48:39,252 - asky.research.tools - ERROR - RAG retrieval failed for http://example.com: DB error
2026-02-08 03:48:39,260 - asky.research.tools - WARNING - Finding embedding failed (will still be saved): Embedding API unavailable
2026-02-08 03:48:39,265 - asky.research.tools - WARNING - Semantic search unavailable: API unavailable
2026-02-08 03:48:39,288 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:48:39,299 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 03:48:39,312 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:48:39,312 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:48:39,325 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 03:48:39,326 - asky.research.vector_store - WARNING - Chroma link query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:48:39,343 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:48:39,351 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 03:48:39,354 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:48:39,370 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:48:39,371 - asky.research.vector_store - WARNING - Chroma hybrid query failed; using SQLite dense scores: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:48:39,383 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 03:48:39,386 - asky.research.vector_store - WARNING - Embedding count mismatch: 2 vs 3
2026-02-08 03:48:39,387 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:48:39,399 - asky.research.vector_store - DEBUG - Stored 5 chunk embeddings for cache_id=1
2026-02-08 03:48:39,399 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 03:48:39,408 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 03:48:39,421 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 03:48:39,425 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 03:48:39,440 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 03:48:39,445 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 03:48:39,453 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 03:48:39,457 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 03:48:39,479 - asky.core.session_manager - INFO - Session 1 reached threshold (10/5). Compacting...
2026-02-08 03:48:39,479 - asky.core.session_manager - INFO - Found 1 messages to compact for session 1
2026-02-08 03:48:39,479 - asky.core.session_manager - INFO - Compacted content length: 9 chars
2026-02-08 03:48:39,479 - asky.core.session_manager - INFO - Compaction saved for session 1
2026-02-08 03:48:39,489 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=True
2026-02-08 03:48:39,489 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=46 results=2 elapsed=0.00ms
2026-02-08 03:48:39,489 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 03:48:39,489 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://docs.example.com/ai-safety text_len=47 title_len=19 elapsed=0.00ms source_type=search
2026-02-08 03:48:39,489 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://blog.example.com/plants text_len=52 title_len=13 elapsed=0.00ms source_type=search
2026-02-08 03:48:39,489 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 03:48:39,489 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=46 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:48:39,489 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://docs.example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 03:48:39,489 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://blog.example.com/plants semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 03:48:39,489 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.12ms fetch=0.07ms score=0.08ms total=0.29ms seeds=0 query_len=46 keyphrases=0 shortlisted=2 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 03:48:39,490 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 03:48:39,490 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:48:39,490 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 03:48:39,490 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 03:48:39,490 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 03:48:39,490 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:48:39,490 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 03:48:39,490 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.07ms fetch=0.03ms score=0.05ms total=0.17ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 03:48:39,491 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=2 selected=2 added=2 elapsed=0.03ms warning=None
2026-02-08 03:48:39,491 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=2 elapsed=0.06ms max_pages=1 per_page=10
2026-02-08 03:48:39,491 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:48:39,491 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=3 deduped=3 max_candidates=30
2026-02-08 03:48:39,491 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=50 title_len=9 elapsed=0.00ms source_type=seed
2026-02-08 03:48:39,491 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/ai-safety text_len=51 title_len=15 elapsed=0.00ms source_type=seed_link
2026-02-08 03:48:39,491 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/garden text_len=51 title_len=11 elapsed=0.00ms source_type=seed_link
2026-02-08 03:48:39,491 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=3 attempted=3 extracted=3 max_fetch=15
2026-02-08 03:48:39,491 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=39 docs=3 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:48:39,491 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 03:48:39,491 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 03:48:39,491 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/garden semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 03:48:39,491 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.12ms fetch=0.07ms score=0.09ms total=0.29ms seeds=1 query_len=39 keyphrases=0 shortlisted=3 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 3, 'candidate_deduped': 3, 'fetch_calls': 3, 'fetch_success': 3, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 2, 'seed_link_added': 2, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 3} warnings=0
2026-02-08 03:48:39,492 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 03:48:39,492 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:48:39,492 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 03:48:39,492 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 03:48:39,492 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 03:48:39,492 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:48:39,492 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 03:48:39,492 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.07ms fetch=0.03ms score=0.05ms total=0.16ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 03:48:39,493 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=3 selected=3 added=1 elapsed=0.03ms warning=None
2026-02-08 03:48:39,493 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=1 elapsed=0.06ms max_pages=1 per_page=10
2026-02-08 03:48:39,493 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:48:39,493 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=2 deduped=2 max_candidates=30
2026-02-08 03:48:39,493 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=57 title_len=5 elapsed=0.00ms source_type=seed
2026-02-08 03:48:39,493 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/world text_len=63 title_len=5 elapsed=0.00ms source_type=seed_link
2026-02-08 03:48:39,493 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 03:48:39,493 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=26 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:48:39,493 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 03:48:39,493 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/world semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 03:48:39,493 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.11ms fetch=0.05ms score=0.07ms total=0.24ms seeds=1 query_len=26 keyphrases=0 shortlisted=2 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 3, 'seed_link_added': 1, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 03:48:39,494 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=False
2026-02-08 03:48:39,494 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=43 results=2 elapsed=0.00ms
2026-02-08 03:48:39,495 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 03:48:39,495 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/europe text_len=80 title_len=6 elapsed=0.00ms source_type=search
2026-02-08 03:48:39,495 - asky.research.source_shortlist - DEBUG - source_shortlist fetch canonical dedupe skip url=https://example.com/europe canonical=https://example.com/europe
2026-02-08 03:48:39,495 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=1 max_fetch=15
2026-02-08 03:48:39,495 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=43 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 03:48:39,495 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/europe semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 03:48:39,495 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.08ms fetch=0.06ms score=0.04ms total=0.19ms seeds=0 query_len=43 keyphrases=0 shortlisted=1 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 1, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 03:48:39,496 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 03:48:39,496 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:48:39,496 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 03:48:39,496 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=54 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 03:48:39,496 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 03:48:39,496 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=27 docs=1
2026-02-08 03:48:39,496 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.0000 final=0.0000
2026-02-08 03:48:39,496 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.15ms seeds=1 query_len=27 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 03:48:39,497 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 03:48:39,497 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 03:48:39,497 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 03:48:39,497 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 03:48:39,497 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 03:48:39,497 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=31 docs=1
2026-02-08 03:48:39,497 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 03:48:39,497 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.14ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 03:48:39,501 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 03:48:39,511 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 03:48:39,515 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:36,545 - asky.research.source_shortlist - DEBUG - source_shortlist disabled for mode=standard in 0.00ms
2026-02-08 04:00:36,545 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.15ms
2026-02-08 04:00:36,552 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.00ms
2026-02-08 04:00:36,574 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 04:00:36,574 - asky.core.api_client - INFO - Sending request to LLM: test-model
2026-02-08 04:00:36,574 - asky.core.api_client - DEBUG - Payload: {"model": "test-model", "messages": [{"role": "user", "content": "test"}], "tools": [], "tool_choice": "auto"}
2026-02-08 04:00:36,574 - asky.core.api_client - INFO - [test] Sent: 1 tokens
2026-02-08 04:00:36,574 - asky.core.engine - ERROR - API Error 400: 400 Client Error: Bad Request
2026-02-08 04:00:36,574 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 04:00:36,575 - asky.core.engine - INFO - Context threshold reached (628/500). Compacting...
2026-02-08 04:00:36,575 - asky.core.engine - INFO - Compaction failed to preserve history. Returning minimal context: 625 tokens.
2026-02-08 04:00:36,576 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 04:00:36,577 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 04:00:36,578 - asky.core.engine - INFO - Context threshold reached (520/100). Compacting...
2026-02-08 04:00:36,578 - asky.core.engine - DEBUG - [Smart Compaction] Found summary for URL https://example.com/long-article (dict). Replacing content.
2026-02-08 04:00:36,578 - asky.core.engine - INFO - Smart compaction successful. Reduced from 520 to 42
2026-02-08 04:00:36,579 - asky.tools - INFO - Executing custom tool command: ls "."
2026-02-08 04:00:36,581 - asky.tools - INFO - Executing custom tool command: ls "/tmp/test"
2026-02-08 04:00:36,582 - asky.tools - INFO - Executing custom tool command: echo "hello world"
2026-02-08 04:00:36,583 - asky.tools - INFO - Executing custom tool command: echo "already quoted"
2026-02-08 04:00:36,584 - asky.tools - INFO - Executing custom tool command: echo "test"
2026-02-08 04:00:36,593 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 04:00:36,594 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 04:00:36,594 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 04:00:36,594 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 04:00:36,595 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 04:00:36,595 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 04:00:36,596 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 04:00:36,596 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 04:00:36,596 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 04:00:36,596 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 04:00:36,596 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 04:00:36,598 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 04:00:36,598 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 04:00:36,598 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 04:00:36,598 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 04:00:36,598 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 04:00:36,598 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 04:00:36,598 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 04:00:36,598 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 04:00:36,598 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 04:00:36,598 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 04:00:36,598 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 04:00:36,600 - asky.email_sender - ERROR - SMTP credentials not configured. Please set ASKY_SMTP_USER and ASKY_SMTP_PASSWORD.
2026-02-08 04:00:36,601 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 04:00:36,601 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 04:00:36,601 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 04:00:36,601 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 04:00:36,601 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 04:00:36,601 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 04:00:36,601 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 04:00:36,601 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 04:00:36,601 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 04:00:36,601 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 04:00:36,601 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 04:00:36,601 - asky.email_sender - ERROR - Failed to send email: Auth failed
2026-02-08 04:00:36,622 - asky.rendering - WARNING - Template not found at <MagicMock name='TEMPLATE_PATH' id='4583911984'>
2026-02-08 04:00:36,625 - asky.rendering - DEBUG - Extracted title for filename: Test Content
2026-02-08 04:00:36,651 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 04:00:36,651 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [{"role": "user", "content": "Hi"}], "tools": null, "tool_choice": "auto"}
2026-02-08 04:00:36,651 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 04:00:36,651 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 04:00:36,652 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 04:00:36,652 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 04:00:36,652 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 04:00:36,652 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 1 seconds...
2026-02-08 04:00:36,652 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 04:00:36,653 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 04:00:36,653 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 04:00:36,653 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 04:00:36,653 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 5 seconds...
2026-02-08 04:00:36,653 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 04:00:36,655 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 04:00:36,655 - asky.core.engine - DEBUG - Tool call [71 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 04:00:36,655 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 04:00:36,655 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 04:00:36,656 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 04:00:36,657 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 04:00:36,657 - asky.core.engine - DEBUG - Tool call [82 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{"q": "test"}'}}
2026-02-08 04:00:36,657 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 04:00:36,657 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 04:00:36,657 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 04:00:36,680 - asky.rendering - INFO - [Opening browser: /path/to/archive/file.html]
2026-02-08 04:00:36,681 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 04:00:36,681 - asky.core.engine - DEBUG - Tool call [93 chrs]: {'id': 'call_123', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 04:00:36,681 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 04:00:36,682 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 04:00:36,682 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 04:00:36,683 - asky.core.engine - INFO - Starting turn 1/2
2026-02-08 04:00:36,683 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 04:00:36,683 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 04:00:36,683 - asky.core.engine - INFO - Starting turn 2/2
2026-02-08 04:00:36,683 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_2', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 04:00:36,683 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 04:00:36,683 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 04:00:36,683 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 04:00:36,684 - asky.core.engine - INFO - Starting turn 1/1
2026-02-08 04:00:36,684 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 04:00:36,684 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 04:00:36,684 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 04:00:36,684 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 04:00:36,686 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 04:00:36,686 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [{"role": "user", "content": "Hi"}], "temperature": 0.5, "top_p": 0.9, "tools": null, "tool_choice": "auto"}
2026-02-08 04:00:36,686 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 04:00:36,686 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 04:00:36,689 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 04:00:36,689 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [], "temperature": 0.7, "tools": null, "tool_choice": "auto"}
2026-02-08 04:00:36,689 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 04:00:36,689 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 04:00:36,711 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 04:00:36,712 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 04:00:36,715 - asky.push_data - ERROR - Failed to push data to 'test_endpoint': Network error
2026-02-08 04:00:36,716 - asky.push_data - ERROR - Failed to build payload for endpoint 'test_endpoint': Missing required parameter: title
2026-02-08 04:00:36,717 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 04:00:36,733 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:36,738 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:36,739 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 04:00:36,824 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:36,825 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 04:00:37,118 - chromadb.config - DEBUG - Starting component System
2026-02-08 04:00:37,118 - chromadb.config - DEBUG - Starting component Posthog
2026-02-08 04:00:37,165 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 04:00:37,170 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:37,171 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 04:00:37,172 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 04:00:37,177 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:37,177 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 04:00:37,178 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 04:00:37,182 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:37,186 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:37,191 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:37,191 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 04:00:37,195 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:37,196 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 04:00:37,200 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:37,200 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 04:00:37,204 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:37,206 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 04:00:37,210 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:37,210 - asky.research.cache - DEBUG - Cached URL http://example1.com with id=1
2026-02-08 04:00:37,211 - asky.research.cache - DEBUG - Cached URL http://example2.com with id=2
2026-02-08 04:00:37,215 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:37,216 - asky.research.cache - DEBUG - Scheduled background summarization for http://example.com
2026-02-08 04:00:37,216 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 04:00:37,218 - asky.research.cache - DEBUG - Background summarization completed for http://example.com
2026-02-08 04:00:37,723 - asky.research.cache - DEBUG - Shutting down research cache executor...
2026-02-08 04:00:37,723 - asky.research.cache - DEBUG - Research cache executor shutdown complete
2026-02-08 04:00:37,734 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:37,741 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:37,745 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:37,750 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:37,754 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:37,754 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 04:00:37,758 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:37,759 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 04:00:37,763 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:37,767 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:37,772 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:37,772 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 04:00:37,773 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 04:00:37,773 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 04:00:37,777 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:37,778 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 04:00:37,778 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 04:00:37,779 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 04:00:37,779 - asky.research.cache - DEBUG - Saved finding id=4
2026-02-08 04:00:37,780 - asky.research.cache - DEBUG - Saved finding id=5
2026-02-08 04:00:37,780 - asky.research.cache - DEBUG - Saved finding id=6
2026-02-08 04:00:37,781 - asky.research.cache - DEBUG - Saved finding id=7
2026-02-08 04:00:37,781 - asky.research.cache - DEBUG - Saved finding id=8
2026-02-08 04:00:37,781 - asky.research.cache - DEBUG - Saved finding id=9
2026-02-08 04:00:37,782 - asky.research.cache - DEBUG - Saved finding id=10
2026-02-08 04:00:37,789 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:37,790 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 04:00:37,790 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 04:00:37,790 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 04:00:37,794 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:37,795 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 04:00:37,796 - asky.research.cache - DEBUG - Deleted finding id=1
2026-02-08 04:00:37,800 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:37,804 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:37,804 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 04:00:37,809 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:37,810 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 04:00:37,810 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 04:00:37,815 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:37,815 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 04:00:37,819 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:37,819 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 04:00:37,846 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 04:00:37,847 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 04:00:37,847 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 04:00:37,848 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 04:00:37,848 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 04:00:37,849 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 04:00:37,849 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 04:00:37,850 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 04:00:37,851 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 04:00:37,851 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 04:00:37,852 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 04:00:37,852 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 04:00:37,853 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 04:00:37,853 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 04:00:37,854 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 04:00:37,854 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 04:00:37,855 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 04:00:37,855 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 04:00:37,855 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 04:00:37,855 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 04:00:37,855 - asky.research.embeddings - INFO - Loaded fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' successfully. Update research.embedding.model to avoid repeated primary model load failures.
2026-02-08 04:00:37,856 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 04:00:37,856 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 04:00:37,856 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 04:00:37,856 - asky.research.embeddings - DEBUG - Embedding model 'sentence-transformers/all-MiniLM-L6-v2' not available locally, attempting remote load.
2026-02-08 04:00:37,857 - asky.research.embeddings - ERROR - Failed to load sentence-transformer model 'bad/model': cannot load bad/model
2026-02-08 04:00:37,857 - asky.research.embeddings - ERROR - Fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' also failed: cannot load sentence-transformers/all-MiniLM-L6-v2
2026-02-08 04:00:37,857 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=cached/model, device=cpu
2026-02-08 04:00:37,857 - asky.research.embeddings - DEBUG - Loaded embedding model 'cached/model' from local Hugging Face cache.
2026-02-08 04:00:37,858 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=trunc/model, device=cpu
2026-02-08 04:00:37,858 - asky.research.embeddings - DEBUG - Loaded embedding model 'trunc/model' from local Hugging Face cache.
2026-02-08 04:00:37,862 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 04:00:37,868 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 04:00:37,868 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 04:00:37,870 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 04:00:37,871 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 04:00:37,873 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 04:00:37,875 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 04:00:37,876 - asky.research.tools - DEBUG - Cache hit for http://b.com
2026-02-08 04:00:37,877 - asky.research.tools - DEBUG - Cache hit for http://a.com
2026-02-08 04:00:37,878 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 04:00:37,880 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 04:00:37,892 - asky.research.tools - DEBUG - Generating chunk embeddings for http://example.com
2026-02-08 04:00:37,893 - asky.research.tools - ERROR - RAG retrieval failed for http://example.com: DB error
2026-02-08 04:00:37,901 - asky.research.tools - WARNING - Finding embedding failed (will still be saved): Embedding API unavailable
2026-02-08 04:00:37,907 - asky.research.tools - WARNING - Semantic search unavailable: API unavailable
2026-02-08 04:00:37,929 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 04:00:37,940 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 04:00:37,954 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 04:00:37,954 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 04:00:37,966 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 04:00:37,967 - asky.research.vector_store - WARNING - Chroma link query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 04:00:37,984 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 04:00:37,992 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 04:00:37,996 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 04:00:38,008 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 04:00:38,009 - asky.research.vector_store - WARNING - Chroma hybrid query failed; using SQLite dense scores: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 04:00:38,021 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 04:00:38,024 - asky.research.vector_store - WARNING - Embedding count mismatch: 2 vs 3
2026-02-08 04:00:38,026 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 04:00:38,038 - asky.research.vector_store - DEBUG - Stored 5 chunk embeddings for cache_id=1
2026-02-08 04:00:38,038 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 04:00:38,051 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 04:00:38,065 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 04:00:38,071 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 04:00:38,090 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 04:00:38,095 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 04:00:38,107 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 04:00:38,113 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 04:00:38,135 - asky.core.session_manager - INFO - Session 1 reached threshold (10/5). Compacting...
2026-02-08 04:00:38,135 - asky.core.session_manager - INFO - Found 1 messages to compact for session 1
2026-02-08 04:00:38,135 - asky.core.session_manager - INFO - Compacted content length: 9 chars
2026-02-08 04:00:38,136 - asky.core.session_manager - INFO - Compaction saved for session 1
2026-02-08 04:00:38,146 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=True
2026-02-08 04:00:38,146 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=46 results=2 elapsed=0.00ms
2026-02-08 04:00:38,146 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 04:00:38,146 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://docs.example.com/ai-safety text_len=47 title_len=19 elapsed=0.00ms source_type=search
2026-02-08 04:00:38,146 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://blog.example.com/plants text_len=52 title_len=13 elapsed=0.00ms source_type=search
2026-02-08 04:00:38,146 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 04:00:38,146 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=46 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 04:00:38,146 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://docs.example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 04:00:38,146 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://blog.example.com/plants semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 04:00:38,146 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.12ms fetch=0.06ms score=0.07ms total=0.27ms seeds=0 query_len=46 keyphrases=0 shortlisted=2 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 04:00:38,147 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 04:00:38,147 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 04:00:38,147 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 04:00:38,147 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 04:00:38,147 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 04:00:38,147 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 04:00:38,147 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 04:00:38,147 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.07ms fetch=0.03ms score=0.05ms total=0.16ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 04:00:38,148 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=2 selected=2 added=2 elapsed=0.03ms warning=None
2026-02-08 04:00:38,148 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=2 elapsed=0.05ms max_pages=1 per_page=10
2026-02-08 04:00:38,148 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 04:00:38,148 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=3 deduped=3 max_candidates=30
2026-02-08 04:00:38,148 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=50 title_len=9 elapsed=0.00ms source_type=seed
2026-02-08 04:00:38,148 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/ai-safety text_len=51 title_len=15 elapsed=0.00ms source_type=seed_link
2026-02-08 04:00:38,148 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/garden text_len=51 title_len=11 elapsed=0.00ms source_type=seed_link
2026-02-08 04:00:38,148 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=3 attempted=3 extracted=3 max_fetch=15
2026-02-08 04:00:38,148 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=39 docs=3 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 04:00:38,148 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 04:00:38,148 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 04:00:38,148 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/garden semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 04:00:38,148 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.11ms fetch=0.06ms score=0.08ms total=0.27ms seeds=1 query_len=39 keyphrases=0 shortlisted=3 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 3, 'candidate_deduped': 3, 'fetch_calls': 3, 'fetch_success': 3, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 2, 'seed_link_added': 2, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 3} warnings=0
2026-02-08 04:00:38,149 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 04:00:38,149 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 04:00:38,149 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 04:00:38,149 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 04:00:38,149 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 04:00:38,149 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 04:00:38,149 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 04:00:38,149 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.14ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 04:00:38,150 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=3 selected=3 added=1 elapsed=0.03ms warning=None
2026-02-08 04:00:38,150 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=1 elapsed=0.07ms max_pages=1 per_page=10
2026-02-08 04:00:38,150 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 04:00:38,150 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=2 deduped=2 max_candidates=30
2026-02-08 04:00:38,150 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=57 title_len=5 elapsed=0.00ms source_type=seed
2026-02-08 04:00:38,150 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/world text_len=63 title_len=5 elapsed=0.00ms source_type=seed_link
2026-02-08 04:00:38,150 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 04:00:38,150 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=26 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 04:00:38,150 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 04:00:38,150 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/world semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 04:00:38,150 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.12ms fetch=0.05ms score=0.06ms total=0.24ms seeds=1 query_len=26 keyphrases=0 shortlisted=2 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 3, 'seed_link_added': 1, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 04:00:38,151 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=False
2026-02-08 04:00:38,151 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=43 results=2 elapsed=0.00ms
2026-02-08 04:00:38,151 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 04:00:38,151 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/europe text_len=80 title_len=6 elapsed=0.00ms source_type=search
2026-02-08 04:00:38,151 - asky.research.source_shortlist - DEBUG - source_shortlist fetch canonical dedupe skip url=https://example.com/europe canonical=https://example.com/europe
2026-02-08 04:00:38,151 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=1 max_fetch=15
2026-02-08 04:00:38,151 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=43 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 04:00:38,151 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/europe semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 04:00:38,151 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.07ms fetch=0.05ms score=0.04ms total=0.17ms seeds=0 query_len=43 keyphrases=0 shortlisted=1 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 1, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 04:00:38,152 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 04:00:38,152 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 04:00:38,152 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 04:00:38,152 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=54 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 04:00:38,152 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 04:00:38,152 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=27 docs=1
2026-02-08 04:00:38,152 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.0000 final=0.0000
2026-02-08 04:00:38,152 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.13ms seeds=1 query_len=27 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 04:00:38,154 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 04:00:38,154 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 04:00:38,154 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 04:00:38,154 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 04:00:38,154 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 04:00:38,154 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=31 docs=1
2026-02-08 04:00:38,154 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 04:00:38,154 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.09ms fetch=0.04ms score=0.05ms total=0.20ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 04:00:38,159 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:00:38,169 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 04:00:38,173 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:54,346 - asky.research.source_shortlist - DEBUG - source_shortlist disabled for mode=standard in 0.00ms
2026-02-08 04:06:54,346 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.21ms
2026-02-08 04:06:54,352 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.00ms
2026-02-08 04:06:54,370 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 04:06:54,370 - asky.core.api_client - INFO - Sending request to LLM: test-model
2026-02-08 04:06:54,370 - asky.core.api_client - DEBUG - Payload: {"model": "test-model", "messages": [{"role": "user", "content": "test"}], "tools": [], "tool_choice": "auto"}
2026-02-08 04:06:54,370 - asky.core.api_client - INFO - [test] Sent: 1 tokens
2026-02-08 04:06:54,370 - asky.core.engine - ERROR - API Error 400: 400 Client Error: Bad Request
2026-02-08 04:06:54,371 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 04:06:54,372 - asky.core.engine - INFO - Context threshold reached (628/500). Compacting...
2026-02-08 04:06:54,372 - asky.core.engine - INFO - Compaction failed to preserve history. Returning minimal context: 625 tokens.
2026-02-08 04:06:54,373 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 04:06:54,373 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 04:06:54,374 - asky.core.engine - INFO - Context threshold reached (520/100). Compacting...
2026-02-08 04:06:54,374 - asky.core.engine - DEBUG - [Smart Compaction] Found summary for URL https://example.com/long-article (dict). Replacing content.
2026-02-08 04:06:54,374 - asky.core.engine - INFO - Smart compaction successful. Reduced from 520 to 42
2026-02-08 04:06:54,376 - asky.tools - INFO - Executing custom tool command: ls "."
2026-02-08 04:06:54,377 - asky.tools - INFO - Executing custom tool command: ls "/tmp/test"
2026-02-08 04:06:54,379 - asky.tools - INFO - Executing custom tool command: echo "hello world"
2026-02-08 04:06:54,380 - asky.tools - INFO - Executing custom tool command: echo "already quoted"
2026-02-08 04:06:54,381 - asky.tools - INFO - Executing custom tool command: echo "test"
2026-02-08 04:06:54,394 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 04:06:54,395 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 04:06:54,395 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 04:06:54,395 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 04:06:54,396 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 04:06:54,397 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 04:06:54,397 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 04:06:54,397 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 04:06:54,397 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 04:06:54,397 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 04:06:54,398 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 04:06:54,399 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 04:06:54,399 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 04:06:54,400 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 04:06:54,400 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 04:06:54,400 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 04:06:54,400 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 04:06:54,400 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 04:06:54,400 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 04:06:54,400 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 04:06:54,400 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 04:06:54,400 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 04:06:54,401 - asky.email_sender - ERROR - SMTP credentials not configured. Please set ASKY_SMTP_USER and ASKY_SMTP_PASSWORD.
2026-02-08 04:06:54,402 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 04:06:54,402 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 04:06:54,402 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 04:06:54,402 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 04:06:54,402 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 04:06:54,402 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 04:06:54,402 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 04:06:54,402 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 04:06:54,402 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 04:06:54,402 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 04:06:54,402 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 04:06:54,402 - asky.email_sender - ERROR - Failed to send email: Auth failed
2026-02-08 04:06:54,421 - asky.rendering - WARNING - Template not found at <MagicMock name='TEMPLATE_PATH' id='4621538640'>
2026-02-08 04:06:54,424 - asky.rendering - DEBUG - Extracted title for filename: Test Content
2026-02-08 04:06:54,446 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 04:06:54,446 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [{"role": "user", "content": "Hi"}], "tools": null, "tool_choice": "auto"}
2026-02-08 04:06:54,446 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 04:06:54,446 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 04:06:54,447 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 04:06:54,447 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 04:06:54,447 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 04:06:54,447 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 1 seconds...
2026-02-08 04:06:54,447 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 04:06:54,448 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 04:06:54,448 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 04:06:54,448 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 04:06:54,449 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 5 seconds...
2026-02-08 04:06:54,449 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 04:06:54,449 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 04:06:54,450 - asky.core.engine - DEBUG - Tool call [71 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 04:06:54,450 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 04:06:54,450 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 04:06:54,450 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 04:06:54,451 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 04:06:54,451 - asky.core.engine - DEBUG - Tool call [82 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{"q": "test"}'}}
2026-02-08 04:06:54,451 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 04:06:54,451 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 04:06:54,451 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 04:06:54,454 - asky.rendering - INFO - [Opening browser: /path/to/archive/file.html]
2026-02-08 04:06:54,455 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 04:06:54,455 - asky.core.engine - DEBUG - Tool call [93 chrs]: {'id': 'call_123', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 04:06:54,455 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 04:06:54,455 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 04:06:54,455 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 04:06:54,456 - asky.core.engine - INFO - Starting turn 1/2
2026-02-08 04:06:54,456 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 04:06:54,456 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 04:06:54,456 - asky.core.engine - INFO - Starting turn 2/2
2026-02-08 04:06:54,456 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_2', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 04:06:54,456 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 04:06:54,456 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 04:06:54,456 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 04:06:54,457 - asky.core.engine - INFO - Starting turn 1/1
2026-02-08 04:06:54,457 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 04:06:54,457 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 04:06:54,457 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 04:06:54,457 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 04:06:54,459 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 04:06:54,459 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [{"role": "user", "content": "Hi"}], "temperature": 0.5, "top_p": 0.9, "tools": null, "tool_choice": "auto"}
2026-02-08 04:06:54,459 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 04:06:54,459 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 04:06:54,460 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 04:06:54,460 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [], "temperature": 0.7, "tools": null, "tool_choice": "auto"}
2026-02-08 04:06:54,460 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 04:06:54,460 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 04:06:54,479 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 04:06:54,480 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 04:06:54,483 - asky.push_data - ERROR - Failed to push data to 'test_endpoint': Network error
2026-02-08 04:06:54,484 - asky.push_data - ERROR - Failed to build payload for endpoint 'test_endpoint': Missing required parameter: title
2026-02-08 04:06:54,485 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 04:06:54,573 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:54,577 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:54,578 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 04:06:54,582 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:54,583 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 04:06:54,801 - chromadb.config - DEBUG - Starting component System
2026-02-08 04:06:54,801 - chromadb.config - DEBUG - Starting component Posthog
2026-02-08 04:06:54,815 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 04:06:54,820 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:54,821 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 04:06:54,823 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 04:06:54,826 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:54,827 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 04:06:54,828 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 04:06:54,832 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:54,835 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:54,840 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:54,840 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 04:06:54,844 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:54,845 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 04:06:54,848 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:54,849 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 04:06:54,853 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:54,854 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 04:06:54,858 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:54,858 - asky.research.cache - DEBUG - Cached URL http://example1.com with id=1
2026-02-08 04:06:54,859 - asky.research.cache - DEBUG - Cached URL http://example2.com with id=2
2026-02-08 04:06:54,862 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:54,863 - asky.research.cache - DEBUG - Scheduled background summarization for http://example.com
2026-02-08 04:06:54,863 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 04:06:54,864 - asky.research.cache - DEBUG - Background summarization completed for http://example.com
2026-02-08 04:06:55,369 - asky.research.cache - DEBUG - Shutting down research cache executor...
2026-02-08 04:06:55,370 - asky.research.cache - DEBUG - Research cache executor shutdown complete
2026-02-08 04:06:55,382 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:55,392 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:55,399 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:55,405 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:55,411 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:55,411 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 04:06:55,416 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:55,417 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 04:06:55,422 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:55,426 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:55,431 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:55,432 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 04:06:55,432 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 04:06:55,433 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 04:06:55,436 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:55,437 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 04:06:55,437 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 04:06:55,438 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 04:06:55,438 - asky.research.cache - DEBUG - Saved finding id=4
2026-02-08 04:06:55,439 - asky.research.cache - DEBUG - Saved finding id=5
2026-02-08 04:06:55,439 - asky.research.cache - DEBUG - Saved finding id=6
2026-02-08 04:06:55,440 - asky.research.cache - DEBUG - Saved finding id=7
2026-02-08 04:06:55,440 - asky.research.cache - DEBUG - Saved finding id=8
2026-02-08 04:06:55,440 - asky.research.cache - DEBUG - Saved finding id=9
2026-02-08 04:06:55,441 - asky.research.cache - DEBUG - Saved finding id=10
2026-02-08 04:06:55,445 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:55,445 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 04:06:55,446 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 04:06:55,446 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 04:06:55,450 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:55,450 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 04:06:55,451 - asky.research.cache - DEBUG - Deleted finding id=1
2026-02-08 04:06:55,455 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:55,458 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:55,459 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 04:06:55,463 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:55,463 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 04:06:55,464 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 04:06:55,467 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:55,468 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 04:06:55,471 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:55,472 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 04:06:55,494 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 04:06:55,495 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 04:06:55,495 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 04:06:55,496 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 04:06:55,496 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 04:06:55,496 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 04:06:55,497 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 04:06:55,497 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 04:06:55,498 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 04:06:55,498 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 04:06:55,499 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 04:06:55,500 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 04:06:55,500 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 04:06:55,501 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 04:06:55,501 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 04:06:55,502 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 04:06:55,502 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 04:06:55,502 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 04:06:55,502 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 04:06:55,503 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 04:06:55,503 - asky.research.embeddings - INFO - Loaded fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' successfully. Update research.embedding.model to avoid repeated primary model load failures.
2026-02-08 04:06:55,503 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 04:06:55,503 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 04:06:55,503 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 04:06:55,503 - asky.research.embeddings - DEBUG - Embedding model 'sentence-transformers/all-MiniLM-L6-v2' not available locally, attempting remote load.
2026-02-08 04:06:55,503 - asky.research.embeddings - ERROR - Failed to load sentence-transformer model 'bad/model': cannot load bad/model
2026-02-08 04:06:55,503 - asky.research.embeddings - ERROR - Fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' also failed: cannot load sentence-transformers/all-MiniLM-L6-v2
2026-02-08 04:06:55,504 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=cached/model, device=cpu
2026-02-08 04:06:55,504 - asky.research.embeddings - DEBUG - Loaded embedding model 'cached/model' from local Hugging Face cache.
2026-02-08 04:06:55,505 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=trunc/model, device=cpu
2026-02-08 04:06:55,505 - asky.research.embeddings - DEBUG - Loaded embedding model 'trunc/model' from local Hugging Face cache.
2026-02-08 04:06:55,509 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 04:06:55,513 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 04:06:55,513 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 04:06:55,515 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 04:06:55,516 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 04:06:55,517 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 04:06:55,519 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 04:06:55,520 - asky.research.tools - DEBUG - Cache hit for http://b.com
2026-02-08 04:06:55,521 - asky.research.tools - DEBUG - Cache hit for http://a.com
2026-02-08 04:06:55,522 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 04:06:55,524 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 04:06:55,535 - asky.research.tools - DEBUG - Generating chunk embeddings for http://example.com
2026-02-08 04:06:55,536 - asky.research.tools - ERROR - RAG retrieval failed for http://example.com: DB error
2026-02-08 04:06:55,544 - asky.research.tools - WARNING - Finding embedding failed (will still be saved): Embedding API unavailable
2026-02-08 04:06:55,549 - asky.research.tools - WARNING - Semantic search unavailable: API unavailable
2026-02-08 04:06:55,571 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 04:06:55,583 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 04:06:55,598 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 04:06:55,598 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 04:06:55,618 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 04:06:55,619 - asky.research.vector_store - WARNING - Chroma link query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 04:06:55,652 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 04:06:55,670 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 04:06:55,674 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 04:06:55,688 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 04:06:55,688 - asky.research.vector_store - WARNING - Chroma hybrid query failed; using SQLite dense scores: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 04:06:55,701 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 04:06:55,704 - asky.research.vector_store - WARNING - Embedding count mismatch: 2 vs 3
2026-02-08 04:06:55,705 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 04:06:55,717 - asky.research.vector_store - DEBUG - Stored 5 chunk embeddings for cache_id=1
2026-02-08 04:06:55,717 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 04:06:55,728 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 04:06:55,741 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 04:06:55,746 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 04:06:55,761 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 04:06:55,766 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 04:06:55,774 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 04:06:55,779 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 04:06:55,801 - asky.core.session_manager - INFO - Session 1 reached threshold (10/5). Compacting...
2026-02-08 04:06:55,801 - asky.core.session_manager - INFO - Found 1 messages to compact for session 1
2026-02-08 04:06:55,801 - asky.core.session_manager - INFO - Compacted content length: 9 chars
2026-02-08 04:06:55,801 - asky.core.session_manager - INFO - Compaction saved for session 1
2026-02-08 04:06:55,811 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=True
2026-02-08 04:06:55,811 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=46 results=2 elapsed=0.00ms
2026-02-08 04:06:55,811 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 04:06:55,811 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://docs.example.com/ai-safety text_len=47 title_len=19 elapsed=0.00ms source_type=search
2026-02-08 04:06:55,811 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://blog.example.com/plants text_len=52 title_len=13 elapsed=0.00ms source_type=search
2026-02-08 04:06:55,811 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 04:06:55,812 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=46 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 04:06:55,812 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://docs.example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 04:06:55,812 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://blog.example.com/plants semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 04:06:55,812 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.12ms fetch=0.07ms score=0.08ms total=0.29ms seeds=0 query_len=46 keyphrases=0 shortlisted=2 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 04:06:55,813 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 04:06:55,813 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 04:06:55,813 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 04:06:55,813 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 04:06:55,813 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 04:06:55,813 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 04:06:55,813 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 04:06:55,813 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.09ms fetch=0.04ms score=0.05ms total=0.20ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 04:06:55,814 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=2 selected=2 added=2 elapsed=0.03ms warning=None
2026-02-08 04:06:55,814 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=2 elapsed=0.07ms max_pages=1 per_page=10
2026-02-08 04:06:55,814 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 04:06:55,814 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=3 deduped=3 max_candidates=30
2026-02-08 04:06:55,814 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=50 title_len=9 elapsed=0.00ms source_type=seed
2026-02-08 04:06:55,814 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/ai-safety text_len=51 title_len=15 elapsed=0.00ms source_type=seed_link
2026-02-08 04:06:55,814 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/garden text_len=51 title_len=11 elapsed=0.00ms source_type=seed_link
2026-02-08 04:06:55,814 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=3 attempted=3 extracted=3 max_fetch=15
2026-02-08 04:06:55,814 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=39 docs=3 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 04:06:55,814 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 04:06:55,814 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 04:06:55,814 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/garden semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 04:06:55,814 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.14ms fetch=0.07ms score=0.09ms total=0.32ms seeds=1 query_len=39 keyphrases=0 shortlisted=3 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 3, 'candidate_deduped': 3, 'fetch_calls': 3, 'fetch_success': 3, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 2, 'seed_link_added': 2, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 3} warnings=0
2026-02-08 04:06:55,815 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 04:06:55,815 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 04:06:55,815 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 04:06:55,815 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 04:06:55,815 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 04:06:55,815 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 04:06:55,815 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 04:06:55,815 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.07ms fetch=0.03ms score=0.05ms total=0.16ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 04:06:55,816 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=3 selected=3 added=1 elapsed=0.03ms warning=None
2026-02-08 04:06:55,816 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=1 elapsed=0.05ms max_pages=1 per_page=10
2026-02-08 04:06:55,816 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 04:06:55,816 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=2 deduped=2 max_candidates=30
2026-02-08 04:06:55,816 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=57 title_len=5 elapsed=0.00ms source_type=seed
2026-02-08 04:06:55,816 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/world text_len=63 title_len=5 elapsed=0.00ms source_type=seed_link
2026-02-08 04:06:55,816 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 04:06:55,816 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=26 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 04:06:55,816 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 04:06:55,816 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/world semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 04:06:55,816 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.10ms fetch=0.05ms score=0.06ms total=0.23ms seeds=1 query_len=26 keyphrases=0 shortlisted=2 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 3, 'seed_link_added': 1, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 04:06:55,817 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=False
2026-02-08 04:06:55,817 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=43 results=2 elapsed=0.00ms
2026-02-08 04:06:55,817 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 04:06:55,817 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/europe text_len=80 title_len=6 elapsed=0.00ms source_type=search
2026-02-08 04:06:55,817 - asky.research.source_shortlist - DEBUG - source_shortlist fetch canonical dedupe skip url=https://example.com/europe canonical=https://example.com/europe
2026-02-08 04:06:55,817 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=1 max_fetch=15
2026-02-08 04:06:55,817 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=43 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 04:06:55,818 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/europe semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 04:06:55,818 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.07ms fetch=0.06ms score=0.04ms total=0.18ms seeds=0 query_len=43 keyphrases=0 shortlisted=1 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 1, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 04:06:55,818 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 04:06:55,818 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 04:06:55,818 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 04:06:55,818 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=54 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 04:06:55,819 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 04:06:55,819 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=27 docs=1
2026-02-08 04:06:55,819 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.0000 final=0.0000
2026-02-08 04:06:55,819 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.14ms seeds=1 query_len=27 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 04:06:55,820 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 04:06:55,820 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 04:06:55,820 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 04:06:55,820 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 04:06:55,820 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 04:06:55,820 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=31 docs=1
2026-02-08 04:06:55,820 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 04:06:55,820 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.14ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 04:06:55,824 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:55,834 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 04:06:55,838 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:06:55,863 - asky.summarization - DEBUG - summarization hierarchical start input_len=5196 chunks=6 target_chunk=180
2026-02-08 04:06:55,864 - asky.summarization - DEBUG - summarization hierarchical complete chunks=6 rounds=3 elapsed=0.10ms
2026-02-08 04:07:43,509 - asky.research.source_shortlist - DEBUG - source_shortlist disabled for mode=standard in 0.00ms
2026-02-08 04:07:43,510 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.28ms
2026-02-08 04:07:43,515 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.00ms
2026-02-08 04:07:43,532 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 04:07:43,532 - asky.core.api_client - INFO - Sending request to LLM: test-model
2026-02-08 04:07:43,532 - asky.core.api_client - DEBUG - Payload: {"model": "test-model", "messages": [{"role": "user", "content": "test"}], "tools": [], "tool_choice": "auto"}
2026-02-08 04:07:43,532 - asky.core.api_client - INFO - [test] Sent: 1 tokens
2026-02-08 04:07:43,532 - asky.core.engine - ERROR - API Error 400: 400 Client Error: Bad Request
2026-02-08 04:07:43,533 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 04:07:43,533 - asky.core.engine - INFO - Context threshold reached (628/500). Compacting...
2026-02-08 04:07:43,534 - asky.core.engine - INFO - Compaction failed to preserve history. Returning minimal context: 625 tokens.
2026-02-08 04:07:43,535 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 04:07:43,535 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 04:07:43,536 - asky.core.engine - INFO - Context threshold reached (520/100). Compacting...
2026-02-08 04:07:43,536 - asky.core.engine - DEBUG - [Smart Compaction] Found summary for URL https://example.com/long-article (dict). Replacing content.
2026-02-08 04:07:43,536 - asky.core.engine - INFO - Smart compaction successful. Reduced from 520 to 42
2026-02-08 04:07:43,537 - asky.tools - INFO - Executing custom tool command: ls "."
2026-02-08 04:07:43,538 - asky.tools - INFO - Executing custom tool command: ls "/tmp/test"
2026-02-08 04:07:43,539 - asky.tools - INFO - Executing custom tool command: echo "hello world"
2026-02-08 04:07:43,540 - asky.tools - INFO - Executing custom tool command: echo "already quoted"
2026-02-08 04:07:43,541 - asky.tools - INFO - Executing custom tool command: echo "test"
2026-02-08 04:07:43,548 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 04:07:43,548 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 04:07:43,549 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 04:07:43,549 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 04:07:43,549 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 04:07:43,550 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 04:07:43,550 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 04:07:43,550 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 04:07:43,550 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 04:07:43,550 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 04:07:43,551 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 04:07:43,552 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 04:07:43,552 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 04:07:43,552 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 04:07:43,552 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 04:07:43,552 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 04:07:43,552 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 04:07:43,552 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 04:07:43,552 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 04:07:43,552 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 04:07:43,552 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 04:07:43,552 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 04:07:43,553 - asky.email_sender - ERROR - SMTP credentials not configured. Please set ASKY_SMTP_USER and ASKY_SMTP_PASSWORD.
2026-02-08 04:07:43,554 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 04:07:43,554 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 04:07:43,554 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 04:07:43,554 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 04:07:43,554 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 04:07:43,554 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 04:07:43,554 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 04:07:43,554 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 04:07:43,554 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 04:07:43,554 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 04:07:43,554 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 04:07:43,554 - asky.email_sender - ERROR - Failed to send email: Auth failed
2026-02-08 04:07:43,571 - asky.rendering - WARNING - Template not found at <MagicMock name='TEMPLATE_PATH' id='4626814288'>
2026-02-08 04:07:43,574 - asky.rendering - DEBUG - Extracted title for filename: Test Content
2026-02-08 04:07:43,593 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 04:07:43,593 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [{"role": "user", "content": "Hi"}], "tools": null, "tool_choice": "auto"}
2026-02-08 04:07:43,593 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 04:07:43,593 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 04:07:43,594 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 04:07:43,594 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 04:07:43,594 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 04:07:43,594 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 1 seconds...
2026-02-08 04:07:43,594 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 04:07:43,595 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 04:07:43,595 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 04:07:43,595 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 04:07:43,595 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 5 seconds...
2026-02-08 04:07:43,595 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 04:07:43,596 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 04:07:43,596 - asky.core.engine - DEBUG - Tool call [71 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 04:07:43,596 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 04:07:43,596 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 04:07:43,597 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 04:07:43,597 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 04:07:43,597 - asky.core.engine - DEBUG - Tool call [82 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{"q": "test"}'}}
2026-02-08 04:07:43,597 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 04:07:43,597 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 04:07:43,598 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 04:07:43,601 - asky.rendering - INFO - [Opening browser: /path/to/archive/file.html]
2026-02-08 04:07:43,602 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 04:07:43,602 - asky.core.engine - DEBUG - Tool call [93 chrs]: {'id': 'call_123', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 04:07:43,602 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 04:07:43,602 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 04:07:43,602 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 04:07:43,603 - asky.core.engine - INFO - Starting turn 1/2
2026-02-08 04:07:43,603 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 04:07:43,603 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 04:07:43,603 - asky.core.engine - INFO - Starting turn 2/2
2026-02-08 04:07:43,603 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_2', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 04:07:43,603 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 04:07:43,603 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 04:07:43,603 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 04:07:43,604 - asky.core.engine - INFO - Starting turn 1/1
2026-02-08 04:07:43,604 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 04:07:43,604 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 04:07:43,604 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 04:07:43,604 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 04:07:43,606 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 04:07:43,606 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [{"role": "user", "content": "Hi"}], "temperature": 0.5, "top_p": 0.9, "tools": null, "tool_choice": "auto"}
2026-02-08 04:07:43,606 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 04:07:43,606 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 04:07:43,607 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 04:07:43,607 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [], "temperature": 0.7, "tools": null, "tool_choice": "auto"}
2026-02-08 04:07:43,607 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 04:07:43,607 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 04:07:43,624 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 04:07:43,625 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 04:07:43,628 - asky.push_data - ERROR - Failed to push data to 'test_endpoint': Network error
2026-02-08 04:07:43,629 - asky.push_data - ERROR - Failed to build payload for endpoint 'test_endpoint': Missing required parameter: title
2026-02-08 04:07:43,630 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 04:07:43,705 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:43,708 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:43,709 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 04:07:43,712 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:43,713 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 04:07:44,009 - chromadb.config - DEBUG - Starting component System
2026-02-08 04:07:44,009 - chromadb.config - DEBUG - Starting component Posthog
2026-02-08 04:07:44,065 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 04:07:44,069 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:44,070 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 04:07:44,071 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 04:07:44,075 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:44,076 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 04:07:44,077 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 04:07:44,081 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:44,085 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:44,090 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:44,090 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 04:07:44,094 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:44,095 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 04:07:44,099 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:44,100 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 04:07:44,104 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:44,105 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 04:07:44,109 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:44,110 - asky.research.cache - DEBUG - Cached URL http://example1.com with id=1
2026-02-08 04:07:44,110 - asky.research.cache - DEBUG - Cached URL http://example2.com with id=2
2026-02-08 04:07:44,114 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:44,115 - asky.research.cache - DEBUG - Scheduled background summarization for http://example.com
2026-02-08 04:07:44,115 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 04:07:44,116 - asky.research.cache - DEBUG - Background summarization completed for http://example.com
2026-02-08 04:07:44,622 - asky.research.cache - DEBUG - Shutting down research cache executor...
2026-02-08 04:07:44,623 - asky.research.cache - DEBUG - Research cache executor shutdown complete
2026-02-08 04:07:44,633 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:44,640 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:44,644 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:44,647 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:44,651 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:44,651 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 04:07:44,655 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:44,656 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 04:07:44,662 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:44,665 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:44,669 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:44,670 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 04:07:44,670 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 04:07:44,671 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 04:07:44,674 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:44,675 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 04:07:44,675 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 04:07:44,676 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 04:07:44,676 - asky.research.cache - DEBUG - Saved finding id=4
2026-02-08 04:07:44,676 - asky.research.cache - DEBUG - Saved finding id=5
2026-02-08 04:07:44,677 - asky.research.cache - DEBUG - Saved finding id=6
2026-02-08 04:07:44,677 - asky.research.cache - DEBUG - Saved finding id=7
2026-02-08 04:07:44,678 - asky.research.cache - DEBUG - Saved finding id=8
2026-02-08 04:07:44,678 - asky.research.cache - DEBUG - Saved finding id=9
2026-02-08 04:07:44,678 - asky.research.cache - DEBUG - Saved finding id=10
2026-02-08 04:07:44,682 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:44,683 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 04:07:44,683 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 04:07:44,683 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 04:07:44,687 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:44,688 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 04:07:44,689 - asky.research.cache - DEBUG - Deleted finding id=1
2026-02-08 04:07:44,692 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:44,697 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:44,697 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 04:07:44,702 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:44,702 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 04:07:44,703 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 04:07:44,707 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:44,707 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 04:07:44,711 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:44,711 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 04:07:44,736 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 04:07:44,737 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 04:07:44,737 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 04:07:44,738 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 04:07:44,738 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 04:07:44,739 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 04:07:44,739 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 04:07:44,740 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 04:07:44,741 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 04:07:44,741 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 04:07:44,742 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 04:07:44,742 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 04:07:44,743 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 04:07:44,743 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 04:07:44,744 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 04:07:44,745 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 04:07:44,745 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 04:07:44,745 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 04:07:44,745 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 04:07:44,746 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 04:07:44,746 - asky.research.embeddings - INFO - Loaded fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' successfully. Update research.embedding.model to avoid repeated primary model load failures.
2026-02-08 04:07:44,746 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 04:07:44,746 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 04:07:44,746 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 04:07:44,747 - asky.research.embeddings - DEBUG - Embedding model 'sentence-transformers/all-MiniLM-L6-v2' not available locally, attempting remote load.
2026-02-08 04:07:44,747 - asky.research.embeddings - ERROR - Failed to load sentence-transformer model 'bad/model': cannot load bad/model
2026-02-08 04:07:44,747 - asky.research.embeddings - ERROR - Fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' also failed: cannot load sentence-transformers/all-MiniLM-L6-v2
2026-02-08 04:07:44,747 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=cached/model, device=cpu
2026-02-08 04:07:44,747 - asky.research.embeddings - DEBUG - Loaded embedding model 'cached/model' from local Hugging Face cache.
2026-02-08 04:07:44,748 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=trunc/model, device=cpu
2026-02-08 04:07:44,748 - asky.research.embeddings - DEBUG - Loaded embedding model 'trunc/model' from local Hugging Face cache.
2026-02-08 04:07:44,752 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 04:07:44,757 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 04:07:44,757 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 04:07:44,759 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 04:07:44,760 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 04:07:44,761 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 04:07:44,763 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 04:07:44,765 - asky.research.tools - DEBUG - Cache hit for http://b.com
2026-02-08 04:07:44,765 - asky.research.tools - DEBUG - Cache hit for http://a.com
2026-02-08 04:07:44,767 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 04:07:44,768 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 04:07:44,780 - asky.research.tools - DEBUG - Generating chunk embeddings for http://example.com
2026-02-08 04:07:44,781 - asky.research.tools - ERROR - RAG retrieval failed for http://example.com: DB error
2026-02-08 04:07:44,790 - asky.research.tools - WARNING - Finding embedding failed (will still be saved): Embedding API unavailable
2026-02-08 04:07:44,795 - asky.research.tools - WARNING - Semantic search unavailable: API unavailable
2026-02-08 04:07:44,817 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 04:07:44,830 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 04:07:44,845 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 04:07:44,845 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 04:07:44,861 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 04:07:44,861 - asky.research.vector_store - WARNING - Chroma link query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 04:07:44,879 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 04:07:44,888 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 04:07:44,894 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 04:07:44,910 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 04:07:44,910 - asky.research.vector_store - WARNING - Chroma hybrid query failed; using SQLite dense scores: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 04:07:44,925 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 04:07:44,928 - asky.research.vector_store - WARNING - Embedding count mismatch: 2 vs 3
2026-02-08 04:07:44,929 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 04:07:44,941 - asky.research.vector_store - DEBUG - Stored 5 chunk embeddings for cache_id=1
2026-02-08 04:07:44,941 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 04:07:44,953 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 04:07:44,966 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 04:07:44,971 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 04:07:44,986 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 04:07:44,991 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 04:07:44,999 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 04:07:45,005 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 04:07:45,031 - asky.core.session_manager - INFO - Session 1 reached threshold (10/5). Compacting...
2026-02-08 04:07:45,031 - asky.core.session_manager - INFO - Found 1 messages to compact for session 1
2026-02-08 04:07:45,031 - asky.core.session_manager - INFO - Compacted content length: 9 chars
2026-02-08 04:07:45,031 - asky.core.session_manager - INFO - Compaction saved for session 1
2026-02-08 04:07:45,042 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=True
2026-02-08 04:07:45,042 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=46 results=2 elapsed=0.00ms
2026-02-08 04:07:45,042 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 04:07:45,042 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://docs.example.com/ai-safety text_len=47 title_len=19 elapsed=0.00ms source_type=search
2026-02-08 04:07:45,042 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://blog.example.com/plants text_len=52 title_len=13 elapsed=0.00ms source_type=search
2026-02-08 04:07:45,042 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 04:07:45,042 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=46 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 04:07:45,042 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://docs.example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 04:07:45,042 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://blog.example.com/plants semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 04:07:45,042 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.14ms fetch=0.06ms score=0.08ms total=0.30ms seeds=0 query_len=46 keyphrases=0 shortlisted=2 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 04:07:45,043 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 04:07:45,043 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 04:07:45,043 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 04:07:45,043 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 04:07:45,043 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 04:07:45,043 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 04:07:45,043 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 04:07:45,043 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.07ms fetch=0.04ms score=0.05ms total=0.17ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 04:07:45,044 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=2 selected=2 added=2 elapsed=0.03ms warning=None
2026-02-08 04:07:45,044 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=2 elapsed=0.06ms max_pages=1 per_page=10
2026-02-08 04:07:45,044 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 04:07:45,045 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=3 deduped=3 max_candidates=30
2026-02-08 04:07:45,045 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=50 title_len=9 elapsed=0.00ms source_type=seed
2026-02-08 04:07:45,045 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/ai-safety text_len=51 title_len=15 elapsed=0.00ms source_type=seed_link
2026-02-08 04:07:45,045 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/garden text_len=51 title_len=11 elapsed=0.00ms source_type=seed_link
2026-02-08 04:07:45,045 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=3 attempted=3 extracted=3 max_fetch=15
2026-02-08 04:07:45,045 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=39 docs=3 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 04:07:45,045 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 04:07:45,045 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 04:07:45,045 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/garden semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 04:07:45,045 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.12ms fetch=0.07ms score=0.09ms total=0.30ms seeds=1 query_len=39 keyphrases=0 shortlisted=3 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 3, 'candidate_deduped': 3, 'fetch_calls': 3, 'fetch_success': 3, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 2, 'seed_link_added': 2, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 3} warnings=0
2026-02-08 04:07:45,046 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 04:07:45,046 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 04:07:45,046 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 04:07:45,046 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 04:07:45,046 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 04:07:45,046 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 04:07:45,046 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 04:07:45,046 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.09ms fetch=0.04ms score=0.05ms total=0.19ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 04:07:45,047 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=3 selected=3 added=1 elapsed=0.03ms warning=None
2026-02-08 04:07:45,047 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=1 elapsed=0.06ms max_pages=1 per_page=10
2026-02-08 04:07:45,047 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 04:07:45,047 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=2 deduped=2 max_candidates=30
2026-02-08 04:07:45,047 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=57 title_len=5 elapsed=0.00ms source_type=seed
2026-02-08 04:07:45,047 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/world text_len=63 title_len=5 elapsed=0.00ms source_type=seed_link
2026-02-08 04:07:45,047 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 04:07:45,047 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=26 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 04:07:45,047 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 04:07:45,047 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/world semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 04:07:45,047 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.12ms fetch=0.05ms score=0.07ms total=0.26ms seeds=1 query_len=26 keyphrases=0 shortlisted=2 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 3, 'seed_link_added': 1, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 04:07:45,048 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=False
2026-02-08 04:07:45,048 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=43 results=2 elapsed=0.00ms
2026-02-08 04:07:45,048 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 04:07:45,048 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/europe text_len=80 title_len=6 elapsed=0.00ms source_type=search
2026-02-08 04:07:45,048 - asky.research.source_shortlist - DEBUG - source_shortlist fetch canonical dedupe skip url=https://example.com/europe canonical=https://example.com/europe
2026-02-08 04:07:45,048 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=1 max_fetch=15
2026-02-08 04:07:45,048 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=43 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 04:07:45,048 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/europe semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 04:07:45,048 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.09ms fetch=0.07ms score=0.04ms total=0.21ms seeds=0 query_len=43 keyphrases=0 shortlisted=1 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 1, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 04:07:45,050 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 04:07:45,050 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 04:07:45,050 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 04:07:45,050 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=54 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 04:07:45,050 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 04:07:45,050 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=27 docs=1
2026-02-08 04:07:45,050 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.0000 final=0.0000
2026-02-08 04:07:45,050 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.09ms fetch=0.04ms score=0.05ms total=0.20ms seeds=1 query_len=27 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 04:07:45,052 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 04:07:45,052 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 04:07:45,052 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 04:07:45,052 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 04:07:45,052 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 04:07:45,052 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=31 docs=1
2026-02-08 04:07:45,052 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 04:07:45,052 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.09ms fetch=0.04ms score=0.05ms total=0.19ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 04:07:45,056 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:45,066 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 04:07:45,070 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 04:07:45,097 - asky.summarization - DEBUG - summarization hierarchical start input_len=5196 chunks=6 target_chunk=180
2026-02-08 04:07:45,097 - asky.summarization - DEBUG - summarization hierarchical complete chunks=6 rounds=3 elapsed=0.11ms
2026-02-08 12:53:00,122 - asky.research.source_shortlist - DEBUG - source_shortlist disabled for mode=standard in 0.00ms
2026-02-08 12:53:00,122 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.21ms
2026-02-08 12:53:00,128 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.00ms
2026-02-08 12:53:00,145 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 12:53:00,145 - asky.core.api_client - INFO - Sending request to LLM: test-model
2026-02-08 12:53:00,145 - asky.core.api_client - DEBUG - Payload: {"model": "test-model", "messages": [{"role": "user", "content": "test"}], "tools": [], "tool_choice": "auto"}
2026-02-08 12:53:00,145 - asky.core.api_client - INFO - [test] Sent: 1 tokens
2026-02-08 12:53:00,145 - asky.core.engine - ERROR - API Error 400: 400 Client Error: Bad Request
2026-02-08 12:53:00,145 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 12:53:00,146 - asky.core.engine - INFO - Context threshold reached (628/500). Compacting...
2026-02-08 12:53:00,146 - asky.core.engine - INFO - Compaction failed to preserve history. Returning minimal context: 625 tokens.
2026-02-08 12:53:00,147 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 12:53:00,147 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 12:53:00,148 - asky.core.engine - INFO - Context threshold reached (520/100). Compacting...
2026-02-08 12:53:00,148 - asky.core.engine - DEBUG - [Smart Compaction] Found summary for URL https://example.com/long-article (dict). Replacing content.
2026-02-08 12:53:00,148 - asky.core.engine - INFO - Smart compaction successful. Reduced from 520 to 42
2026-02-08 12:53:00,150 - asky.tools - INFO - Executing custom tool command: ls "."
2026-02-08 12:53:00,151 - asky.tools - INFO - Executing custom tool command: ls "/tmp/test"
2026-02-08 12:53:00,152 - asky.tools - INFO - Executing custom tool command: echo "hello world"
2026-02-08 12:53:00,153 - asky.tools - INFO - Executing custom tool command: echo "already quoted"
2026-02-08 12:53:00,154 - asky.tools - INFO - Executing custom tool command: echo "test"
2026-02-08 12:53:00,161 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 12:53:00,161 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 12:53:00,161 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 12:53:00,161 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 12:53:00,162 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 12:53:00,162 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 12:53:00,163 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 12:53:00,163 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 12:53:00,163 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 12:53:00,163 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 12:53:00,163 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 12:53:00,164 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 12:53:00,164 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 12:53:00,164 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 12:53:00,164 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 12:53:00,164 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 12:53:00,164 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 12:53:00,164 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 12:53:00,164 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 12:53:00,164 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 12:53:00,164 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 12:53:00,165 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 12:53:00,166 - asky.email_sender - ERROR - SMTP credentials not configured. Please set ASKY_SMTP_USER and ASKY_SMTP_PASSWORD.
2026-02-08 12:53:00,166 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 12:53:00,166 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 12:53:00,167 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 12:53:00,167 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 12:53:00,167 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 12:53:00,167 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 12:53:00,167 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 12:53:00,167 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 12:53:00,167 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 12:53:00,167 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 12:53:00,167 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 12:53:00,167 - asky.email_sender - ERROR - Failed to send email: Auth failed
2026-02-08 12:53:00,183 - asky.rendering - WARNING - Template not found at <MagicMock name='TEMPLATE_PATH' id='5442606080'>
2026-02-08 12:53:00,186 - asky.rendering - DEBUG - Extracted title for filename: Test Content
2026-02-08 12:53:00,205 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 12:53:00,205 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [{"role": "user", "content": "Hi"}], "tools": null, "tool_choice": "auto"}
2026-02-08 12:53:00,205 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 12:53:00,205 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 12:53:00,206 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 12:53:00,206 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 12:53:00,206 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 12:53:00,206 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 1 seconds...
2026-02-08 12:53:00,206 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 12:53:00,207 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 12:53:00,207 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 12:53:00,207 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 12:53:00,207 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 5 seconds...
2026-02-08 12:53:00,207 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 12:53:00,208 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 12:53:00,208 - asky.core.engine - DEBUG - Tool call [71 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 12:53:00,208 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 12:53:00,208 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 12:53:00,208 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 12:53:00,209 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 12:53:00,209 - asky.core.engine - DEBUG - Tool call [82 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{"q": "test"}'}}
2026-02-08 12:53:00,209 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 12:53:00,209 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 12:53:00,209 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 12:53:00,212 - asky.rendering - INFO - [Opening browser: /path/to/archive/file.html]
2026-02-08 12:53:00,213 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 12:53:00,213 - asky.core.engine - DEBUG - Tool call [93 chrs]: {'id': 'call_123', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 12:53:00,213 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 12:53:00,214 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 12:53:00,214 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 12:53:00,214 - asky.core.engine - INFO - Starting turn 1/2
2026-02-08 12:53:00,215 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 12:53:00,215 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 12:53:00,215 - asky.core.engine - INFO - Starting turn 2/2
2026-02-08 12:53:00,215 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_2', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 12:53:00,215 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 12:53:00,215 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 12:53:00,215 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 12:53:00,215 - asky.core.engine - INFO - Starting turn 1/1
2026-02-08 12:53:00,216 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 12:53:00,216 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 12:53:00,216 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 12:53:00,216 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 12:53:00,217 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 12:53:00,217 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [{"role": "user", "content": "Hi"}], "temperature": 0.5, "top_p": 0.9, "tools": null, "tool_choice": "auto"}
2026-02-08 12:53:00,217 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 12:53:00,217 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 12:53:00,218 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 12:53:00,218 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [], "temperature": 0.7, "tools": null, "tool_choice": "auto"}
2026-02-08 12:53:00,218 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 12:53:00,218 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 12:53:00,236 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 12:53:00,237 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 12:53:00,240 - asky.push_data - ERROR - Failed to push data to 'test_endpoint': Network error
2026-02-08 12:53:00,240 - asky.push_data - ERROR - Failed to build payload for endpoint 'test_endpoint': Missing required parameter: title
2026-02-08 12:53:00,241 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 12:53:00,317 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:00,321 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:00,322 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 12:53:00,326 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:00,326 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 12:53:00,575 - chromadb.config - DEBUG - Starting component System
2026-02-08 12:53:00,575 - chromadb.config - DEBUG - Starting component Posthog
2026-02-08 12:53:00,634 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 12:53:00,638 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:00,639 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 12:53:00,641 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 12:53:00,644 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:00,646 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 12:53:00,647 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 12:53:00,651 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:00,654 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:00,658 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:00,659 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 12:53:00,662 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:00,663 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 12:53:00,666 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:00,667 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 12:53:00,671 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:00,672 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 12:53:00,675 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:00,676 - asky.research.cache - DEBUG - Cached URL http://example1.com with id=1
2026-02-08 12:53:00,676 - asky.research.cache - DEBUG - Cached URL http://example2.com with id=2
2026-02-08 12:53:00,680 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:00,681 - asky.research.cache - DEBUG - Scheduled background summarization for http://example.com
2026-02-08 12:53:00,681 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 12:53:00,681 - asky.research.cache - DEBUG - Background summarization completed for http://example.com
2026-02-08 12:53:01,188 - asky.research.cache - DEBUG - Shutting down research cache executor...
2026-02-08 12:53:01,188 - asky.research.cache - DEBUG - Research cache executor shutdown complete
2026-02-08 12:53:01,201 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:01,211 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:01,219 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:01,225 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:01,230 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:01,231 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 12:53:01,236 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:01,237 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 12:53:01,242 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:01,246 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:01,250 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:01,251 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 12:53:01,252 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 12:53:01,252 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 12:53:01,256 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:01,257 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 12:53:01,257 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 12:53:01,258 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 12:53:01,258 - asky.research.cache - DEBUG - Saved finding id=4
2026-02-08 12:53:01,258 - asky.research.cache - DEBUG - Saved finding id=5
2026-02-08 12:53:01,259 - asky.research.cache - DEBUG - Saved finding id=6
2026-02-08 12:53:01,259 - asky.research.cache - DEBUG - Saved finding id=7
2026-02-08 12:53:01,260 - asky.research.cache - DEBUG - Saved finding id=8
2026-02-08 12:53:01,260 - asky.research.cache - DEBUG - Saved finding id=9
2026-02-08 12:53:01,261 - asky.research.cache - DEBUG - Saved finding id=10
2026-02-08 12:53:01,265 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:01,265 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 12:53:01,266 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 12:53:01,266 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 12:53:01,270 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:01,270 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 12:53:01,271 - asky.research.cache - DEBUG - Deleted finding id=1
2026-02-08 12:53:01,275 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:01,280 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:01,280 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 12:53:01,284 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:01,285 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 12:53:01,286 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 12:53:01,289 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:01,290 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 12:53:01,293 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:01,294 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 12:53:01,314 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 12:53:01,314 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 12:53:01,315 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 12:53:01,315 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 12:53:01,315 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 12:53:01,316 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 12:53:01,316 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 12:53:01,317 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 12:53:01,318 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 12:53:01,318 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 12:53:01,319 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 12:53:01,319 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 12:53:01,319 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 12:53:01,320 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 12:53:01,321 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 12:53:01,321 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 12:53:01,322 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 12:53:01,322 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 12:53:01,322 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 12:53:01,322 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 12:53:01,322 - asky.research.embeddings - INFO - Loaded fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' successfully. Update research.embedding.model to avoid repeated primary model load failures.
2026-02-08 12:53:01,323 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 12:53:01,323 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 12:53:01,323 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 12:53:01,323 - asky.research.embeddings - DEBUG - Embedding model 'sentence-transformers/all-MiniLM-L6-v2' not available locally, attempting remote load.
2026-02-08 12:53:01,323 - asky.research.embeddings - ERROR - Failed to load sentence-transformer model 'bad/model': cannot load bad/model
2026-02-08 12:53:01,323 - asky.research.embeddings - ERROR - Fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' also failed: cannot load sentence-transformers/all-MiniLM-L6-v2
2026-02-08 12:53:01,323 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=cached/model, device=cpu
2026-02-08 12:53:01,323 - asky.research.embeddings - DEBUG - Loaded embedding model 'cached/model' from local Hugging Face cache.
2026-02-08 12:53:01,324 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=trunc/model, device=cpu
2026-02-08 12:53:01,324 - asky.research.embeddings - DEBUG - Loaded embedding model 'trunc/model' from local Hugging Face cache.
2026-02-08 12:53:01,328 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 12:53:01,332 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 12:53:01,332 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 12:53:01,334 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 12:53:01,335 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 12:53:01,335 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 12:53:01,337 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 12:53:01,338 - asky.research.tools - DEBUG - Cache hit for http://b.com
2026-02-08 12:53:01,339 - asky.research.tools - DEBUG - Cache hit for http://a.com
2026-02-08 12:53:01,340 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 12:53:01,342 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 12:53:01,352 - asky.research.tools - DEBUG - Generating chunk embeddings for http://example.com
2026-02-08 12:53:01,353 - asky.research.tools - ERROR - RAG retrieval failed for http://example.com: DB error
2026-02-08 12:53:01,360 - asky.research.tools - WARNING - Finding embedding failed (will still be saved): Embedding API unavailable
2026-02-08 12:53:01,365 - asky.research.tools - WARNING - Semantic search unavailable: API unavailable
2026-02-08 12:53:01,385 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 12:53:01,397 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 12:53:01,411 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 12:53:01,412 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 12:53:01,422 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 12:53:01,422 - asky.research.vector_store - WARNING - Chroma link query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 12:53:01,440 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 12:53:01,448 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 12:53:01,451 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 12:53:01,469 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 12:53:01,469 - asky.research.vector_store - WARNING - Chroma hybrid query failed; using SQLite dense scores: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 12:53:01,482 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 12:53:01,485 - asky.research.vector_store - WARNING - Embedding count mismatch: 2 vs 3
2026-02-08 12:53:01,486 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 12:53:01,497 - asky.research.vector_store - DEBUG - Stored 5 chunk embeddings for cache_id=1
2026-02-08 12:53:01,497 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 12:53:01,508 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 12:53:01,520 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 12:53:01,525 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 12:53:01,539 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 12:53:01,544 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 12:53:01,552 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 12:53:01,557 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 12:53:01,576 - asky.core.session_manager - INFO - Session 1 reached threshold (10/5). Compacting...
2026-02-08 12:53:01,576 - asky.core.session_manager - INFO - Found 1 messages to compact for session 1
2026-02-08 12:53:01,576 - asky.core.session_manager - INFO - Compacted content length: 9 chars
2026-02-08 12:53:01,576 - asky.core.session_manager - INFO - Compaction saved for session 1
2026-02-08 12:53:01,585 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=True
2026-02-08 12:53:01,585 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=46 results=2 elapsed=0.00ms
2026-02-08 12:53:01,585 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 12:53:01,585 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://docs.example.com/ai-safety text_len=47 title_len=19 elapsed=0.00ms source_type=search
2026-02-08 12:53:01,585 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://blog.example.com/plants text_len=52 title_len=13 elapsed=0.00ms source_type=search
2026-02-08 12:53:01,585 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 12:53:01,585 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=46 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 12:53:01,586 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://docs.example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 12:53:01,586 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://blog.example.com/plants semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 12:53:01,586 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.10ms fetch=0.06ms score=0.07ms total=0.24ms seeds=0 query_len=46 keyphrases=0 shortlisted=2 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 12:53:01,586 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 12:53:01,586 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 12:53:01,586 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 12:53:01,587 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 12:53:01,587 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 12:53:01,587 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 12:53:01,587 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 12:53:01,587 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.15ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 12:53:01,587 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=2 selected=2 added=2 elapsed=0.02ms warning=None
2026-02-08 12:53:01,587 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=2 elapsed=0.04ms max_pages=1 per_page=10
2026-02-08 12:53:01,587 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 12:53:01,587 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=3 deduped=3 max_candidates=30
2026-02-08 12:53:01,588 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=50 title_len=9 elapsed=0.00ms source_type=seed
2026-02-08 12:53:01,588 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/ai-safety text_len=51 title_len=15 elapsed=0.00ms source_type=seed_link
2026-02-08 12:53:01,588 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/garden text_len=51 title_len=11 elapsed=0.00ms source_type=seed_link
2026-02-08 12:53:01,588 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=3 attempted=3 extracted=3 max_fetch=15
2026-02-08 12:53:01,588 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=39 docs=3 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 12:53:01,588 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 12:53:01,588 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 12:53:01,588 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/garden semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 12:53:01,588 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.10ms fetch=0.06ms score=0.08ms total=0.25ms seeds=1 query_len=39 keyphrases=0 shortlisted=3 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 3, 'candidate_deduped': 3, 'fetch_calls': 3, 'fetch_success': 3, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 2, 'seed_link_added': 2, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 3} warnings=0
2026-02-08 12:53:01,588 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 12:53:01,588 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 12:53:01,589 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 12:53:01,589 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 12:53:01,589 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 12:53:01,589 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 12:53:01,589 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 12:53:01,589 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.05ms fetch=0.03ms score=0.04ms total=0.13ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 12:53:01,589 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=3 selected=3 added=1 elapsed=0.02ms warning=None
2026-02-08 12:53:01,589 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=1 elapsed=0.05ms max_pages=1 per_page=10
2026-02-08 12:53:01,589 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 12:53:01,589 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=2 deduped=2 max_candidates=30
2026-02-08 12:53:01,590 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=57 title_len=5 elapsed=0.00ms source_type=seed
2026-02-08 12:53:01,590 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/world text_len=63 title_len=5 elapsed=0.00ms source_type=seed_link
2026-02-08 12:53:01,590 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 12:53:01,590 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=26 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 12:53:01,590 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 12:53:01,590 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/world semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 12:53:01,590 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.09ms fetch=0.04ms score=0.06ms total=0.20ms seeds=1 query_len=26 keyphrases=0 shortlisted=2 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 3, 'seed_link_added': 1, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 12:53:01,591 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=False
2026-02-08 12:53:01,591 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=43 results=2 elapsed=0.00ms
2026-02-08 12:53:01,591 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 12:53:01,591 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/europe text_len=80 title_len=6 elapsed=0.00ms source_type=search
2026-02-08 12:53:01,591 - asky.research.source_shortlist - DEBUG - source_shortlist fetch canonical dedupe skip url=https://example.com/europe canonical=https://example.com/europe
2026-02-08 12:53:01,591 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=1 max_fetch=15
2026-02-08 12:53:01,591 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=43 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 12:53:01,591 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/europe semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 12:53:01,591 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.05ms score=0.05ms total=0.17ms seeds=0 query_len=43 keyphrases=0 shortlisted=1 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 1, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 12:53:01,592 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 12:53:01,592 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 12:53:01,592 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 12:53:01,592 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=54 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 12:53:01,592 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 12:53:01,592 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=27 docs=1
2026-02-08 12:53:01,592 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.0000 final=0.0000
2026-02-08 12:53:01,592 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.03ms total=0.13ms seeds=1 query_len=27 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 12:53:01,593 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 12:53:01,593 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 12:53:01,593 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 12:53:01,593 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 12:53:01,593 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 12:53:01,593 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=31 docs=1
2026-02-08 12:53:01,593 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 12:53:01,593 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.02ms collect=0.05ms fetch=0.03ms score=0.04ms total=0.14ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 12:53:01,597 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:01,607 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 12:53:01,611 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:53:01,637 - asky.summarization - DEBUG - summarization hierarchical start input_len=5196 chunks=6 target_chunk=180
2026-02-08 12:53:01,637 - asky.summarization - DEBUG - summarization hierarchical complete chunks=6 rounds=3 elapsed=0.08ms
2026-02-08 12:56:54,599 - asky.research.source_shortlist - DEBUG - source_shortlist disabled for mode=standard in 0.00ms
2026-02-08 12:56:54,599 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.18ms
2026-02-08 12:56:54,604 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.00ms
2026-02-08 12:56:54,623 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=True
2026-02-08 12:56:54,623 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=46 results=2 elapsed=0.00ms
2026-02-08 12:56:54,623 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 12:56:54,623 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://docs.example.com/ai-safety text_len=47 title_len=19 elapsed=0.00ms source_type=search
2026-02-08 12:56:54,623 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://blog.example.com/plants text_len=52 title_len=13 elapsed=0.00ms source_type=search
2026-02-08 12:56:54,623 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 12:56:54,623 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=46 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 12:56:54,623 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://docs.example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 12:56:54,623 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://blog.example.com/plants semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 12:56:54,623 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.12ms fetch=0.06ms score=0.07ms total=0.27ms seeds=0 query_len=46 keyphrases=0 shortlisted=2 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 12:56:54,624 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 12:56:54,624 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 12:56:54,624 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 12:56:54,624 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 12:56:54,624 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 12:56:54,624 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 12:56:54,624 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 12:56:54,624 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.07ms fetch=0.03ms score=0.05ms total=0.16ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 12:56:54,625 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=2 selected=2 added=2 elapsed=0.03ms warning=None
2026-02-08 12:56:54,625 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=2 elapsed=0.05ms max_pages=1 per_page=10
2026-02-08 12:56:54,625 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 12:56:54,625 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=3 deduped=3 max_candidates=30
2026-02-08 12:56:54,625 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=50 title_len=9 elapsed=0.00ms source_type=seed
2026-02-08 12:56:54,625 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/ai-safety text_len=51 title_len=15 elapsed=0.00ms source_type=seed_link
2026-02-08 12:56:54,625 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/garden text_len=51 title_len=11 elapsed=0.00ms source_type=seed_link
2026-02-08 12:56:54,625 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=3 attempted=3 extracted=3 max_fetch=15
2026-02-08 12:56:54,625 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=39 docs=3 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 12:56:54,625 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 12:56:54,625 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 12:56:54,625 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/garden semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 12:56:54,625 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.11ms fetch=0.07ms score=0.09ms total=0.28ms seeds=1 query_len=39 keyphrases=0 shortlisted=3 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 3, 'candidate_deduped': 3, 'fetch_calls': 3, 'fetch_success': 3, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 2, 'seed_link_added': 2, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 3} warnings=0
2026-02-08 12:56:54,626 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 12:56:54,626 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 12:56:54,626 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 12:56:54,626 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 12:56:54,626 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 12:56:54,626 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 12:56:54,626 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 12:56:54,626 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.14ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 12:56:54,626 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=3 selected=3 added=1 elapsed=0.02ms warning=None
2026-02-08 12:56:54,626 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=1 elapsed=0.05ms max_pages=1 per_page=10
2026-02-08 12:56:54,626 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 12:56:54,626 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=2 deduped=2 max_candidates=30
2026-02-08 12:56:54,627 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=57 title_len=5 elapsed=0.00ms source_type=seed
2026-02-08 12:56:54,627 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/world text_len=63 title_len=5 elapsed=0.00ms source_type=seed_link
2026-02-08 12:56:54,627 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 12:56:54,627 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=26 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 12:56:54,627 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 12:56:54,627 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/world semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 12:56:54,627 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.09ms fetch=0.04ms score=0.06ms total=0.21ms seeds=1 query_len=26 keyphrases=0 shortlisted=2 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 3, 'seed_link_added': 1, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 12:56:54,627 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=False
2026-02-08 12:56:54,627 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=43 results=2 elapsed=0.00ms
2026-02-08 12:56:54,627 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 12:56:54,627 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/europe text_len=80 title_len=6 elapsed=0.00ms source_type=search
2026-02-08 12:56:54,627 - asky.research.source_shortlist - DEBUG - source_shortlist fetch canonical dedupe skip url=https://example.com/europe canonical=https://example.com/europe
2026-02-08 12:56:54,627 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=1 max_fetch=15
2026-02-08 12:56:54,627 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=43 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 12:56:54,627 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/europe semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 12:56:54,627 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.07ms fetch=0.06ms score=0.04ms total=0.17ms seeds=0 query_len=43 keyphrases=0 shortlisted=1 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 1, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 12:56:54,628 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 12:56:54,628 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 12:56:54,628 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 12:56:54,628 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=54 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 12:56:54,628 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 12:56:54,628 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=27 docs=1
2026-02-08 12:56:54,628 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.0000 final=0.0000
2026-02-08 12:56:54,628 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.13ms seeds=1 query_len=27 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 12:56:54,629 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 12:56:54,630 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 12:56:54,630 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 12:56:54,630 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 12:56:54,630 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 12:56:54,630 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=31 docs=1
2026-02-08 12:56:54,630 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 12:56:54,630 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.13ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 12:57:02,128 - asky.research.source_shortlist - DEBUG - source_shortlist disabled for mode=standard in 0.00ms
2026-02-08 12:57:02,128 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.07ms
2026-02-08 12:57:02,133 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.00ms
2026-02-08 12:57:02,151 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 12:57:02,151 - asky.core.api_client - INFO - Sending request to LLM: test-model
2026-02-08 12:57:02,151 - asky.core.api_client - DEBUG - Payload: {"model": "test-model", "messages": [{"role": "user", "content": "test"}], "tools": [], "tool_choice": "auto"}
2026-02-08 12:57:02,151 - asky.core.api_client - INFO - [test] Sent: 1 tokens
2026-02-08 12:57:02,151 - asky.core.engine - ERROR - API Error 400: 400 Client Error: Bad Request
2026-02-08 12:57:02,152 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 12:57:02,153 - asky.core.engine - INFO - Context threshold reached (628/500). Compacting...
2026-02-08 12:57:02,153 - asky.core.engine - INFO - Compaction failed to preserve history. Returning minimal context: 625 tokens.
2026-02-08 12:57:02,154 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 12:57:02,154 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 12:57:02,155 - asky.core.engine - INFO - Context threshold reached (520/100). Compacting...
2026-02-08 12:57:02,155 - asky.core.engine - DEBUG - [Smart Compaction] Found summary for URL https://example.com/long-article (dict). Replacing content.
2026-02-08 12:57:02,155 - asky.core.engine - INFO - Smart compaction successful. Reduced from 520 to 42
2026-02-08 12:57:02,156 - asky.tools - INFO - Executing custom tool command: ls "."
2026-02-08 12:57:02,157 - asky.tools - INFO - Executing custom tool command: ls "/tmp/test"
2026-02-08 12:57:02,158 - asky.tools - INFO - Executing custom tool command: echo "hello world"
2026-02-08 12:57:02,159 - asky.tools - INFO - Executing custom tool command: echo "already quoted"
2026-02-08 12:57:02,161 - asky.tools - INFO - Executing custom tool command: echo "test"
2026-02-08 12:57:02,168 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 12:57:02,168 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 12:57:02,168 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 12:57:02,169 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 12:57:02,169 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 12:57:02,169 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 12:57:02,170 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 12:57:02,170 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 12:57:02,170 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 12:57:02,170 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 12:57:02,170 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 12:57:02,171 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 12:57:02,171 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 12:57:02,171 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 12:57:02,171 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 12:57:02,171 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 12:57:02,171 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 12:57:02,171 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 12:57:02,171 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 12:57:02,171 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 12:57:02,171 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 12:57:02,171 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 12:57:02,172 - asky.email_sender - ERROR - SMTP credentials not configured. Please set ASKY_SMTP_USER and ASKY_SMTP_PASSWORD.
2026-02-08 12:57:02,173 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 12:57:02,173 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 12:57:02,173 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 12:57:02,173 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 12:57:02,173 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 12:57:02,173 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 12:57:02,173 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 12:57:02,173 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 12:57:02,173 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 12:57:02,173 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 12:57:02,173 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 12:57:02,174 - asky.email_sender - ERROR - Failed to send email: Auth failed
2026-02-08 12:57:02,191 - asky.rendering - WARNING - Template not found at <MagicMock name='TEMPLATE_PATH' id='5809276640'>
2026-02-08 12:57:02,193 - asky.rendering - DEBUG - Extracted title for filename: Test Content
2026-02-08 12:57:02,213 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 12:57:02,214 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [{"role": "user", "content": "Hi"}], "tools": null, "tool_choice": "auto"}
2026-02-08 12:57:02,214 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 12:57:02,214 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 12:57:02,215 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 12:57:02,215 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 12:57:02,215 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 12:57:02,215 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 1 seconds...
2026-02-08 12:57:02,215 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 12:57:02,216 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 12:57:02,216 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 12:57:02,216 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 12:57:02,216 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 5 seconds...
2026-02-08 12:57:02,216 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 12:57:02,217 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 12:57:02,217 - asky.core.engine - DEBUG - Tool call [71 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 12:57:02,217 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 12:57:02,217 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 12:57:02,217 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 12:57:02,218 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 12:57:02,218 - asky.core.engine - DEBUG - Tool call [82 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{"q": "test"}'}}
2026-02-08 12:57:02,218 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 12:57:02,218 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 12:57:02,218 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 12:57:02,223 - asky.rendering - INFO - [Opening browser: /path/to/archive/file.html]
2026-02-08 12:57:02,225 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 12:57:02,225 - asky.core.engine - DEBUG - Tool call [93 chrs]: {'id': 'call_123', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 12:57:02,225 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 12:57:02,225 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 12:57:02,225 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 12:57:02,226 - asky.core.engine - INFO - Starting turn 1/2
2026-02-08 12:57:02,226 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 12:57:02,226 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 12:57:02,226 - asky.core.engine - INFO - Starting turn 2/2
2026-02-08 12:57:02,226 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_2', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 12:57:02,227 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 12:57:02,227 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 12:57:02,227 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 12:57:02,228 - asky.core.engine - INFO - Starting turn 1/1
2026-02-08 12:57:02,228 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 12:57:02,228 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 12:57:02,228 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 12:57:02,228 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 12:57:02,229 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 12:57:02,230 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [{"role": "user", "content": "Hi"}], "temperature": 0.5, "top_p": 0.9, "tools": null, "tool_choice": "auto"}
2026-02-08 12:57:02,230 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 12:57:02,230 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 12:57:02,231 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 12:57:02,231 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [], "temperature": 0.7, "tools": null, "tool_choice": "auto"}
2026-02-08 12:57:02,231 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 12:57:02,231 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 12:57:02,253 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 12:57:02,254 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 12:57:02,258 - asky.push_data - ERROR - Failed to push data to 'test_endpoint': Network error
2026-02-08 12:57:02,259 - asky.push_data - ERROR - Failed to build payload for endpoint 'test_endpoint': Missing required parameter: title
2026-02-08 12:57:02,260 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 12:57:02,276 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:02,280 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:02,281 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 12:57:02,285 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:02,286 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 12:57:02,618 - chromadb.config - DEBUG - Starting component System
2026-02-08 12:57:02,618 - chromadb.config - DEBUG - Starting component Posthog
2026-02-08 12:57:02,681 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 12:57:02,685 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:02,686 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 12:57:02,689 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 12:57:02,693 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:02,693 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 12:57:02,695 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 12:57:02,698 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:02,702 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:02,706 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:02,707 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 12:57:02,710 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:02,711 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 12:57:02,715 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:02,716 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 12:57:02,719 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:02,721 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 12:57:02,725 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:02,727 - asky.research.cache - DEBUG - Cached URL http://example1.com with id=1
2026-02-08 12:57:02,728 - asky.research.cache - DEBUG - Cached URL http://example2.com with id=2
2026-02-08 12:57:02,732 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:02,733 - asky.research.cache - DEBUG - Scheduled background summarization for http://example.com
2026-02-08 12:57:02,733 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 12:57:02,734 - asky.research.cache - DEBUG - Background summarization completed for http://example.com
2026-02-08 12:57:03,235 - asky.research.cache - DEBUG - Shutting down research cache executor...
2026-02-08 12:57:03,236 - asky.research.cache - DEBUG - Research cache executor shutdown complete
2026-02-08 12:57:03,247 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:03,255 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:03,260 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:03,264 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:03,269 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:03,269 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 12:57:03,274 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:03,274 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 12:57:03,279 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:03,284 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:03,288 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:03,289 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 12:57:03,289 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 12:57:03,290 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 12:57:03,294 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:03,294 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 12:57:03,295 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 12:57:03,295 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 12:57:03,295 - asky.research.cache - DEBUG - Saved finding id=4
2026-02-08 12:57:03,296 - asky.research.cache - DEBUG - Saved finding id=5
2026-02-08 12:57:03,296 - asky.research.cache - DEBUG - Saved finding id=6
2026-02-08 12:57:03,296 - asky.research.cache - DEBUG - Saved finding id=7
2026-02-08 12:57:03,297 - asky.research.cache - DEBUG - Saved finding id=8
2026-02-08 12:57:03,297 - asky.research.cache - DEBUG - Saved finding id=9
2026-02-08 12:57:03,298 - asky.research.cache - DEBUG - Saved finding id=10
2026-02-08 12:57:03,302 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:03,302 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 12:57:03,303 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 12:57:03,303 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 12:57:03,307 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:03,308 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 12:57:03,308 - asky.research.cache - DEBUG - Deleted finding id=1
2026-02-08 12:57:03,312 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:03,316 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:03,317 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 12:57:03,321 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:03,322 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 12:57:03,322 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 12:57:03,326 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:03,326 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 12:57:03,330 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:03,330 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 12:57:03,353 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 12:57:03,354 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 12:57:03,354 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 12:57:03,355 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 12:57:03,355 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 12:57:03,356 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 12:57:03,356 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 12:57:03,357 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 12:57:03,358 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 12:57:03,358 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 12:57:03,358 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 12:57:03,359 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 12:57:03,359 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 12:57:03,360 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 12:57:03,361 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 12:57:03,361 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 12:57:03,362 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 12:57:03,362 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 12:57:03,362 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 12:57:03,362 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 12:57:03,362 - asky.research.embeddings - INFO - Loaded fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' successfully. Update research.embedding.model to avoid repeated primary model load failures.
2026-02-08 12:57:03,363 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 12:57:03,363 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 12:57:03,363 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 12:57:03,363 - asky.research.embeddings - DEBUG - Embedding model 'sentence-transformers/all-MiniLM-L6-v2' not available locally, attempting remote load.
2026-02-08 12:57:03,363 - asky.research.embeddings - ERROR - Failed to load sentence-transformer model 'bad/model': cannot load bad/model
2026-02-08 12:57:03,363 - asky.research.embeddings - ERROR - Fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' also failed: cannot load sentence-transformers/all-MiniLM-L6-v2
2026-02-08 12:57:03,364 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=cached/model, device=cpu
2026-02-08 12:57:03,364 - asky.research.embeddings - DEBUG - Loaded embedding model 'cached/model' from local Hugging Face cache.
2026-02-08 12:57:03,364 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=trunc/model, device=cpu
2026-02-08 12:57:03,364 - asky.research.embeddings - DEBUG - Loaded embedding model 'trunc/model' from local Hugging Face cache.
2026-02-08 12:57:03,368 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 12:57:03,373 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 12:57:03,373 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 12:57:03,375 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 12:57:03,376 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 12:57:03,377 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 12:57:03,379 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 12:57:03,381 - asky.research.tools - DEBUG - Cache hit for http://b.com
2026-02-08 12:57:03,381 - asky.research.tools - DEBUG - Cache hit for http://a.com
2026-02-08 12:57:03,383 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 12:57:03,384 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 12:57:03,394 - asky.research.tools - DEBUG - Generating chunk embeddings for http://example.com
2026-02-08 12:57:03,395 - asky.research.tools - ERROR - RAG retrieval failed for http://example.com: DB error
2026-02-08 12:57:03,403 - asky.research.tools - WARNING - Finding embedding failed (will still be saved): Embedding API unavailable
2026-02-08 12:57:03,408 - asky.research.tools - WARNING - Semantic search unavailable: API unavailable
2026-02-08 12:57:03,430 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 12:57:03,443 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 12:57:03,457 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 12:57:03,458 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 12:57:03,470 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 12:57:03,470 - asky.research.vector_store - WARNING - Chroma link query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 12:57:03,491 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 12:57:03,501 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 12:57:03,504 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 12:57:03,520 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 12:57:03,521 - asky.research.vector_store - WARNING - Chroma hybrid query failed; using SQLite dense scores: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 12:57:03,538 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 12:57:03,541 - asky.research.vector_store - WARNING - Embedding count mismatch: 2 vs 3
2026-02-08 12:57:03,542 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 12:57:03,555 - asky.research.vector_store - DEBUG - Stored 5 chunk embeddings for cache_id=1
2026-02-08 12:57:03,555 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 12:57:03,567 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 12:57:03,581 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 12:57:03,586 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 12:57:03,601 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 12:57:03,606 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 12:57:03,616 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 12:57:03,622 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 12:57:03,643 - asky.core.session_manager - INFO - Session 1 reached threshold (10/5). Compacting...
2026-02-08 12:57:03,644 - asky.core.session_manager - INFO - Found 1 messages to compact for session 1
2026-02-08 12:57:03,644 - asky.core.session_manager - INFO - Compacted content length: 9 chars
2026-02-08 12:57:03,644 - asky.core.session_manager - INFO - Compaction saved for session 1
2026-02-08 12:57:03,654 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=True
2026-02-08 12:57:03,654 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=46 results=2 elapsed=0.00ms
2026-02-08 12:57:03,654 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 12:57:03,654 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://docs.example.com/ai-safety text_len=47 title_len=19 elapsed=0.00ms source_type=search
2026-02-08 12:57:03,654 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://blog.example.com/plants text_len=52 title_len=13 elapsed=0.00ms source_type=search
2026-02-08 12:57:03,654 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 12:57:03,654 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=46 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 12:57:03,654 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://docs.example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 12:57:03,654 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://blog.example.com/plants semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 12:57:03,654 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.12ms fetch=0.07ms score=0.08ms total=0.29ms seeds=0 query_len=46 keyphrases=0 shortlisted=2 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 12:57:03,655 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 12:57:03,655 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 12:57:03,655 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 12:57:03,655 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 12:57:03,655 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 12:57:03,655 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 12:57:03,655 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 12:57:03,655 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.08ms fetch=0.04ms score=0.05ms total=0.18ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 12:57:03,656 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=2 selected=2 added=2 elapsed=0.04ms warning=None
2026-02-08 12:57:03,656 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=2 elapsed=0.08ms max_pages=1 per_page=10
2026-02-08 12:57:03,656 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 12:57:03,656 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=3 deduped=3 max_candidates=30
2026-02-08 12:57:03,656 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=50 title_len=9 elapsed=0.00ms source_type=seed
2026-02-08 12:57:03,656 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/ai-safety text_len=51 title_len=15 elapsed=0.00ms source_type=seed_link
2026-02-08 12:57:03,656 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/garden text_len=51 title_len=11 elapsed=0.00ms source_type=seed_link
2026-02-08 12:57:03,657 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=3 attempted=3 extracted=3 max_fetch=15
2026-02-08 12:57:03,657 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=39 docs=3 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 12:57:03,657 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 12:57:03,657 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 12:57:03,657 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/garden semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 12:57:03,657 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.20ms fetch=0.09ms score=0.11ms total=0.41ms seeds=1 query_len=39 keyphrases=0 shortlisted=3 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 3, 'candidate_deduped': 3, 'fetch_calls': 3, 'fetch_success': 3, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 2, 'seed_link_added': 2, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 3} warnings=0
2026-02-08 12:57:03,658 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 12:57:03,658 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 12:57:03,658 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 12:57:03,658 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 12:57:03,658 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 12:57:03,658 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 12:57:03,658 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 12:57:03,658 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.15ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 12:57:03,659 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=3 selected=3 added=1 elapsed=0.03ms warning=None
2026-02-08 12:57:03,659 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=1 elapsed=0.05ms max_pages=1 per_page=10
2026-02-08 12:57:03,659 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 12:57:03,659 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=2 deduped=2 max_candidates=30
2026-02-08 12:57:03,659 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=57 title_len=5 elapsed=0.00ms source_type=seed
2026-02-08 12:57:03,659 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/world text_len=63 title_len=5 elapsed=0.00ms source_type=seed_link
2026-02-08 12:57:03,659 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 12:57:03,659 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=26 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 12:57:03,659 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 12:57:03,659 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/world semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 12:57:03,659 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.10ms fetch=0.05ms score=0.07ms total=0.23ms seeds=1 query_len=26 keyphrases=0 shortlisted=2 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 3, 'seed_link_added': 1, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 12:57:03,660 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=False
2026-02-08 12:57:03,660 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=43 results=2 elapsed=0.00ms
2026-02-08 12:57:03,660 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 12:57:03,660 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/europe text_len=80 title_len=6 elapsed=0.00ms source_type=search
2026-02-08 12:57:03,660 - asky.research.source_shortlist - DEBUG - source_shortlist fetch canonical dedupe skip url=https://example.com/europe canonical=https://example.com/europe
2026-02-08 12:57:03,660 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=1 max_fetch=15
2026-02-08 12:57:03,660 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=43 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 12:57:03,660 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/europe semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 12:57:03,660 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.08ms fetch=0.06ms score=0.04ms total=0.19ms seeds=0 query_len=43 keyphrases=0 shortlisted=1 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 1, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 12:57:03,661 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 12:57:03,661 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 12:57:03,661 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 12:57:03,661 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=54 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 12:57:03,661 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 12:57:03,661 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=27 docs=1
2026-02-08 12:57:03,661 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.0000 final=0.0000
2026-02-08 12:57:03,661 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.14ms seeds=1 query_len=27 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 12:57:03,663 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 12:57:03,663 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 12:57:03,663 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 12:57:03,663 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 12:57:03,663 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 12:57:03,663 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=31 docs=1
2026-02-08 12:57:03,663 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 12:57:03,663 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.14ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 12:57:03,667 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:03,677 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 12:57:03,682 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:03,707 - asky.summarization - DEBUG - summarization hierarchical start input_len=5196 chunks=6 target_chunk=180
2026-02-08 12:57:03,707 - asky.summarization - DEBUG - summarization hierarchical complete chunks=6 rounds=3 elapsed=0.10ms
2026-02-08 12:57:45,250 - asky.research.source_shortlist - DEBUG - source_shortlist disabled for mode=standard in 0.00ms
2026-02-08 12:57:45,251 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.19ms
2026-02-08 12:57:45,256 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.00ms
2026-02-08 12:57:45,274 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 12:57:45,274 - asky.core.api_client - INFO - Sending request to LLM: test-model
2026-02-08 12:57:45,274 - asky.core.api_client - DEBUG - Payload: {"model": "test-model", "messages": [{"role": "user", "content": "test"}], "tools": [], "tool_choice": "auto"}
2026-02-08 12:57:45,274 - asky.core.api_client - INFO - [test] Sent: 1 tokens
2026-02-08 12:57:45,274 - asky.core.engine - ERROR - API Error 400: 400 Client Error: Bad Request
2026-02-08 12:57:45,274 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 12:57:45,275 - asky.core.engine - INFO - Context threshold reached (628/500). Compacting...
2026-02-08 12:57:45,275 - asky.core.engine - INFO - Compaction failed to preserve history. Returning minimal context: 625 tokens.
2026-02-08 12:57:45,276 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 12:57:45,276 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 12:57:45,277 - asky.core.engine - INFO - Context threshold reached (520/100). Compacting...
2026-02-08 12:57:45,277 - asky.core.engine - DEBUG - [Smart Compaction] Found summary for URL https://example.com/long-article (dict). Replacing content.
2026-02-08 12:57:45,277 - asky.core.engine - INFO - Smart compaction successful. Reduced from 520 to 42
2026-02-08 12:57:45,279 - asky.tools - INFO - Executing custom tool command: ls "."
2026-02-08 12:57:45,280 - asky.tools - INFO - Executing custom tool command: ls "/tmp/test"
2026-02-08 12:57:45,281 - asky.tools - INFO - Executing custom tool command: echo "hello world"
2026-02-08 12:57:45,282 - asky.tools - INFO - Executing custom tool command: echo "already quoted"
2026-02-08 12:57:45,283 - asky.tools - INFO - Executing custom tool command: echo "test"
2026-02-08 12:57:45,290 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 12:57:45,291 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 12:57:45,291 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 12:57:45,291 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 12:57:45,291 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 12:57:45,292 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 12:57:45,292 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 12:57:45,292 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 12:57:45,292 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 12:57:45,292 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 12:57:45,293 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 12:57:45,295 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 12:57:45,295 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 12:57:45,295 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 12:57:45,295 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 12:57:45,295 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 12:57:45,295 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 12:57:45,295 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 12:57:45,295 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 12:57:45,295 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 12:57:45,295 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 12:57:45,295 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 12:57:45,296 - asky.email_sender - ERROR - SMTP credentials not configured. Please set ASKY_SMTP_USER and ASKY_SMTP_PASSWORD.
2026-02-08 12:57:45,297 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 12:57:45,297 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 12:57:45,297 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 12:57:45,297 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 12:57:45,297 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 12:57:45,297 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 12:57:45,297 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 12:57:45,297 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 12:57:45,297 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 12:57:45,297 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 12:57:45,297 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 12:57:45,298 - asky.email_sender - ERROR - Failed to send email: Auth failed
2026-02-08 12:57:45,315 - asky.rendering - WARNING - Template not found at <MagicMock name='TEMPLATE_PATH' id='4654794464'>
2026-02-08 12:57:45,317 - asky.rendering - DEBUG - Extracted title for filename: Test Content
2026-02-08 12:57:45,341 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 12:57:45,341 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [{"role": "user", "content": "Hi"}], "tools": null, "tool_choice": "auto"}
2026-02-08 12:57:45,341 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 12:57:45,341 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 12:57:45,342 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 12:57:45,342 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 12:57:45,342 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 12:57:45,342 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 1 seconds...
2026-02-08 12:57:45,342 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 12:57:45,343 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 12:57:45,343 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 12:57:45,343 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 12:57:45,343 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 5 seconds...
2026-02-08 12:57:45,343 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 12:57:45,344 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 12:57:45,344 - asky.core.engine - DEBUG - Tool call [71 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 12:57:45,344 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 12:57:45,344 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 12:57:45,345 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 12:57:45,345 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 12:57:45,346 - asky.core.engine - DEBUG - Tool call [82 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{"q": "test"}'}}
2026-02-08 12:57:45,346 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 12:57:45,346 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 12:57:45,346 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 12:57:45,349 - asky.rendering - INFO - [Opening browser: /path/to/archive/file.html]
2026-02-08 12:57:45,350 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 12:57:45,350 - asky.core.engine - DEBUG - Tool call [93 chrs]: {'id': 'call_123', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 12:57:45,350 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 12:57:45,350 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 12:57:45,350 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 12:57:45,352 - asky.core.engine - INFO - Starting turn 1/2
2026-02-08 12:57:45,352 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 12:57:45,352 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 12:57:45,352 - asky.core.engine - INFO - Starting turn 2/2
2026-02-08 12:57:45,352 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_2', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 12:57:45,352 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 12:57:45,352 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 12:57:45,352 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 12:57:45,353 - asky.core.engine - INFO - Starting turn 1/1
2026-02-08 12:57:45,353 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 12:57:45,353 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 12:57:45,353 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 12:57:45,353 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 12:57:45,355 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 12:57:45,355 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [{"role": "user", "content": "Hi"}], "temperature": 0.5, "top_p": 0.9, "tools": null, "tool_choice": "auto"}
2026-02-08 12:57:45,355 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 12:57:45,355 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 12:57:45,356 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 12:57:45,356 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [], "temperature": 0.7, "tools": null, "tool_choice": "auto"}
2026-02-08 12:57:45,356 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 12:57:45,356 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 12:57:45,381 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 12:57:45,382 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 12:57:45,388 - asky.push_data - ERROR - Failed to push data to 'test_endpoint': Network error
2026-02-08 12:57:45,390 - asky.push_data - ERROR - Failed to build payload for endpoint 'test_endpoint': Missing required parameter: title
2026-02-08 12:57:45,397 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 12:57:45,411 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:45,415 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:45,415 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 12:57:45,419 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:45,420 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 12:57:45,755 - chromadb.config - DEBUG - Starting component System
2026-02-08 12:57:45,755 - chromadb.config - DEBUG - Starting component Posthog
2026-02-08 12:57:45,799 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 12:57:45,803 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:45,804 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 12:57:45,805 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 12:57:45,809 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:45,810 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 12:57:45,811 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 12:57:45,816 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:45,819 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:45,826 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:45,827 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 12:57:45,831 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:45,832 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 12:57:45,836 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:45,836 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 12:57:45,840 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:45,841 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 12:57:45,844 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:45,845 - asky.research.cache - DEBUG - Cached URL http://example1.com with id=1
2026-02-08 12:57:45,845 - asky.research.cache - DEBUG - Cached URL http://example2.com with id=2
2026-02-08 12:57:45,849 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:45,850 - asky.research.cache - DEBUG - Scheduled background summarization for http://example.com
2026-02-08 12:57:45,850 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 12:57:45,851 - asky.research.cache - DEBUG - Background summarization completed for http://example.com
2026-02-08 12:57:46,357 - asky.research.cache - DEBUG - Shutting down research cache executor...
2026-02-08 12:57:46,358 - asky.research.cache - DEBUG - Research cache executor shutdown complete
2026-02-08 12:57:46,369 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:46,376 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:46,381 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:46,386 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:46,390 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:46,391 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 12:57:46,395 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:46,396 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 12:57:46,399 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:46,403 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:46,407 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:46,407 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 12:57:46,407 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 12:57:46,408 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 12:57:46,411 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:46,412 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 12:57:46,412 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 12:57:46,413 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 12:57:46,413 - asky.research.cache - DEBUG - Saved finding id=4
2026-02-08 12:57:46,413 - asky.research.cache - DEBUG - Saved finding id=5
2026-02-08 12:57:46,414 - asky.research.cache - DEBUG - Saved finding id=6
2026-02-08 12:57:46,414 - asky.research.cache - DEBUG - Saved finding id=7
2026-02-08 12:57:46,415 - asky.research.cache - DEBUG - Saved finding id=8
2026-02-08 12:57:46,415 - asky.research.cache - DEBUG - Saved finding id=9
2026-02-08 12:57:46,415 - asky.research.cache - DEBUG - Saved finding id=10
2026-02-08 12:57:46,419 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:46,420 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 12:57:46,420 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 12:57:46,421 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 12:57:46,424 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:46,425 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 12:57:46,425 - asky.research.cache - DEBUG - Deleted finding id=1
2026-02-08 12:57:46,429 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:46,432 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:46,433 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 12:57:46,437 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:46,438 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 12:57:46,438 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 12:57:46,442 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:46,442 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 12:57:46,446 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:46,446 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 12:57:46,469 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 12:57:46,470 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 12:57:46,470 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 12:57:46,471 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 12:57:46,471 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 12:57:46,472 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 12:57:46,472 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 12:57:46,473 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 12:57:46,473 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 12:57:46,473 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 12:57:46,474 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 12:57:46,475 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 12:57:46,475 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 12:57:46,476 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 12:57:46,477 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 12:57:46,477 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 12:57:46,478 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 12:57:46,478 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 12:57:46,478 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 12:57:46,478 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 12:57:46,478 - asky.research.embeddings - INFO - Loaded fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' successfully. Update research.embedding.model to avoid repeated primary model load failures.
2026-02-08 12:57:46,479 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 12:57:46,479 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 12:57:46,479 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 12:57:46,479 - asky.research.embeddings - DEBUG - Embedding model 'sentence-transformers/all-MiniLM-L6-v2' not available locally, attempting remote load.
2026-02-08 12:57:46,479 - asky.research.embeddings - ERROR - Failed to load sentence-transformer model 'bad/model': cannot load bad/model
2026-02-08 12:57:46,479 - asky.research.embeddings - ERROR - Fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' also failed: cannot load sentence-transformers/all-MiniLM-L6-v2
2026-02-08 12:57:46,480 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=cached/model, device=cpu
2026-02-08 12:57:46,480 - asky.research.embeddings - DEBUG - Loaded embedding model 'cached/model' from local Hugging Face cache.
2026-02-08 12:57:46,481 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=trunc/model, device=cpu
2026-02-08 12:57:46,481 - asky.research.embeddings - DEBUG - Loaded embedding model 'trunc/model' from local Hugging Face cache.
2026-02-08 12:57:46,485 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 12:57:46,489 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 12:57:46,489 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 12:57:46,491 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 12:57:46,492 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 12:57:46,493 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 12:57:46,495 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 12:57:46,496 - asky.research.tools - DEBUG - Cache hit for http://b.com
2026-02-08 12:57:46,497 - asky.research.tools - DEBUG - Cache hit for http://a.com
2026-02-08 12:57:46,498 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 12:57:46,500 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 12:57:46,510 - asky.research.tools - DEBUG - Generating chunk embeddings for http://example.com
2026-02-08 12:57:46,511 - asky.research.tools - ERROR - RAG retrieval failed for http://example.com: DB error
2026-02-08 12:57:46,519 - asky.research.tools - WARNING - Finding embedding failed (will still be saved): Embedding API unavailable
2026-02-08 12:57:46,523 - asky.research.tools - WARNING - Semantic search unavailable: API unavailable
2026-02-08 12:57:46,544 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 12:57:46,556 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 12:57:46,570 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 12:57:46,570 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 12:57:46,582 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 12:57:46,583 - asky.research.vector_store - WARNING - Chroma link query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 12:57:46,604 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 12:57:46,614 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 12:57:46,618 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 12:57:46,636 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 12:57:46,637 - asky.research.vector_store - WARNING - Chroma hybrid query failed; using SQLite dense scores: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 12:57:46,651 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 12:57:46,654 - asky.research.vector_store - WARNING - Embedding count mismatch: 2 vs 3
2026-02-08 12:57:46,655 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 12:57:46,668 - asky.research.vector_store - DEBUG - Stored 5 chunk embeddings for cache_id=1
2026-02-08 12:57:46,668 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 12:57:46,679 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 12:57:46,692 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 12:57:46,697 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 12:57:46,712 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 12:57:46,719 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 12:57:46,728 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 12:57:46,733 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 12:57:46,754 - asky.core.session_manager - INFO - Session 1 reached threshold (10/5). Compacting...
2026-02-08 12:57:46,755 - asky.core.session_manager - INFO - Found 1 messages to compact for session 1
2026-02-08 12:57:46,755 - asky.core.session_manager - INFO - Compacted content length: 9 chars
2026-02-08 12:57:46,755 - asky.core.session_manager - INFO - Compaction saved for session 1
2026-02-08 12:57:46,764 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=True
2026-02-08 12:57:46,764 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=46 results=2 elapsed=0.00ms
2026-02-08 12:57:46,764 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 12:57:46,764 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://docs.example.com/ai-safety text_len=47 title_len=19 elapsed=0.00ms source_type=search
2026-02-08 12:57:46,764 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://blog.example.com/plants text_len=52 title_len=13 elapsed=0.00ms source_type=search
2026-02-08 12:57:46,764 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 12:57:46,764 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=46 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 12:57:46,765 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://docs.example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 12:57:46,765 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://blog.example.com/plants semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 12:57:46,765 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.11ms fetch=0.07ms score=0.08ms total=0.27ms seeds=0 query_len=46 keyphrases=0 shortlisted=2 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 12:57:46,765 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 12:57:46,766 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 12:57:46,766 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 12:57:46,766 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 12:57:46,766 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 12:57:46,766 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 12:57:46,766 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 12:57:46,766 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.07ms fetch=0.03ms score=0.05ms total=0.16ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 12:57:46,767 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=2 selected=2 added=2 elapsed=0.03ms warning=None
2026-02-08 12:57:46,767 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=2 elapsed=0.05ms max_pages=1 per_page=10
2026-02-08 12:57:46,767 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 12:57:46,767 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=3 deduped=3 max_candidates=30
2026-02-08 12:57:46,767 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=50 title_len=9 elapsed=0.00ms source_type=seed
2026-02-08 12:57:46,767 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/ai-safety text_len=51 title_len=15 elapsed=0.00ms source_type=seed_link
2026-02-08 12:57:46,767 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/garden text_len=51 title_len=11 elapsed=0.00ms source_type=seed_link
2026-02-08 12:57:46,767 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=3 attempted=3 extracted=3 max_fetch=15
2026-02-08 12:57:46,767 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=39 docs=3 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 12:57:46,767 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 12:57:46,767 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 12:57:46,767 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/garden semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 12:57:46,767 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.11ms fetch=0.07ms score=0.09ms total=0.28ms seeds=1 query_len=39 keyphrases=0 shortlisted=3 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 3, 'candidate_deduped': 3, 'fetch_calls': 3, 'fetch_success': 3, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 2, 'seed_link_added': 2, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 3} warnings=0
2026-02-08 12:57:46,768 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 12:57:46,768 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 12:57:46,768 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 12:57:46,768 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 12:57:46,768 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 12:57:46,768 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 12:57:46,768 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 12:57:46,768 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.15ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 12:57:46,769 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=3 selected=3 added=1 elapsed=0.03ms warning=None
2026-02-08 12:57:46,769 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=1 elapsed=0.05ms max_pages=1 per_page=10
2026-02-08 12:57:46,769 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 12:57:46,769 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=2 deduped=2 max_candidates=30
2026-02-08 12:57:46,769 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=57 title_len=5 elapsed=0.00ms source_type=seed
2026-02-08 12:57:46,769 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/world text_len=63 title_len=5 elapsed=0.00ms source_type=seed_link
2026-02-08 12:57:46,769 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 12:57:46,769 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=26 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 12:57:46,769 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 12:57:46,769 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/world semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 12:57:46,769 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.10ms fetch=0.05ms score=0.06ms total=0.22ms seeds=1 query_len=26 keyphrases=0 shortlisted=2 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 3, 'seed_link_added': 1, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 12:57:46,770 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=False
2026-02-08 12:57:46,770 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=43 results=2 elapsed=0.00ms
2026-02-08 12:57:46,770 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 12:57:46,770 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/europe text_len=80 title_len=6 elapsed=0.00ms source_type=search
2026-02-08 12:57:46,770 - asky.research.source_shortlist - DEBUG - source_shortlist fetch canonical dedupe skip url=https://example.com/europe canonical=https://example.com/europe
2026-02-08 12:57:46,770 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=1 max_fetch=15
2026-02-08 12:57:46,770 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=43 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 12:57:46,770 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/europe semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 12:57:46,770 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.07ms fetch=0.05ms score=0.04ms total=0.18ms seeds=0 query_len=43 keyphrases=0 shortlisted=1 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 1, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 12:57:46,771 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 12:57:46,771 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 12:57:46,771 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 12:57:46,771 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=54 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 12:57:46,771 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 12:57:46,771 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=27 docs=1
2026-02-08 12:57:46,771 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.0000 final=0.0000
2026-02-08 12:57:46,771 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.14ms seeds=1 query_len=27 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 12:57:46,773 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 12:57:46,773 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 12:57:46,773 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 12:57:46,773 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 12:57:46,773 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 12:57:46,773 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=31 docs=1
2026-02-08 12:57:46,773 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 12:57:46,773 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.14ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 12:57:46,777 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:46,786 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 12:57:46,791 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 12:57:46,816 - asky.summarization - DEBUG - summarization hierarchical start input_len=5196 chunks=6 target_chunk=180
2026-02-08 12:57:46,816 - asky.summarization - DEBUG - summarization hierarchical complete chunks=6 rounds=3 elapsed=0.09ms
2026-02-08 13:08:47,860 - asky.research.cache - WARNING - FTS5 unavailable, BM25 lexical search disabled: attempt to write a readonly database
2026-02-08 13:08:47,860 - asky.research.cache - WARNING - FTS5 unavailable, BM25 lexical search disabled: attempt to write a readonly database
2026-02-08 13:08:47,860 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:08:47,860 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:44,046 - asky.research.source_shortlist - DEBUG - source_shortlist disabled for mode=standard in 0.00ms
2026-02-08 13:13:44,047 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.20ms
2026-02-08 13:13:44,051 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.00ms
2026-02-08 13:13:44,073 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 13:13:44,073 - asky.core.api_client - INFO - Sending request to LLM: test-model
2026-02-08 13:13:44,073 - asky.core.api_client - DEBUG - Payload: {"model": "test-model", "messages": [{"role": "user", "content": "test"}], "tools": [], "tool_choice": "auto"}
2026-02-08 13:13:44,073 - asky.core.api_client - INFO - [test] Sent: 1 tokens
2026-02-08 13:13:44,073 - asky.core.engine - ERROR - API Error 400: 400 Client Error: Bad Request
2026-02-08 13:13:44,073 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:13:44,074 - asky.core.engine - INFO - Context threshold reached (628/500). Compacting...
2026-02-08 13:13:44,074 - asky.core.engine - INFO - Compaction failed to preserve history. Returning minimal context: 625 tokens.
2026-02-08 13:13:44,075 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 13:13:44,075 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:13:44,076 - asky.core.engine - INFO - Context threshold reached (520/100). Compacting...
2026-02-08 13:13:44,076 - asky.core.engine - DEBUG - [Smart Compaction] Found summary for URL https://example.com/long-article (dict). Replacing content.
2026-02-08 13:13:44,076 - asky.core.engine - INFO - Smart compaction successful. Reduced from 520 to 42
2026-02-08 13:13:44,078 - asky.tools - INFO - Executing custom tool command: ls "."
2026-02-08 13:13:44,079 - asky.tools - INFO - Executing custom tool command: ls "/tmp/test"
2026-02-08 13:13:44,080 - asky.tools - INFO - Executing custom tool command: echo "hello world"
2026-02-08 13:13:44,081 - asky.tools - INFO - Executing custom tool command: echo "already quoted"
2026-02-08 13:13:44,082 - asky.tools - INFO - Executing custom tool command: echo "test"
2026-02-08 13:13:44,089 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 13:13:44,090 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 13:13:44,090 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 13:13:44,090 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 13:13:44,091 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:13:44,091 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 13:13:44,091 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 13:13:44,092 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 13:13:44,092 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 13:13:44,092 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:13:44,092 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 13:13:44,094 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 13:13:44,094 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 13:13:44,094 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 13:13:44,094 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 13:13:44,094 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:13:44,094 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 13:13:44,094 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 13:13:44,094 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 13:13:44,094 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 13:13:44,094 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:13:44,094 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 13:13:44,096 - asky.email_sender - ERROR - SMTP credentials not configured. Please set ASKY_SMTP_USER and ASKY_SMTP_PASSWORD.
2026-02-08 13:13:44,097 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 13:13:44,097 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 13:13:44,098 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 13:13:44,098 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 13:13:44,098 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:13:44,098 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 13:13:44,098 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 13:13:44,098 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 13:13:44,098 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 13:13:44,098 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:13:44,098 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 13:13:44,098 - asky.email_sender - ERROR - Failed to send email: Auth failed
2026-02-08 13:13:44,121 - asky.rendering - WARNING - Template not found at <MagicMock name='TEMPLATE_PATH' id='5496781328'>
2026-02-08 13:13:44,124 - asky.rendering - DEBUG - Extracted title for filename: Test Content
2026-02-08 13:13:44,145 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 13:13:44,145 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [{"role": "user", "content": "Hi"}], "tools": null, "tool_choice": "auto"}
2026-02-08 13:13:44,145 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 13:13:44,145 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 13:13:44,146 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 13:13:44,146 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 13:13:44,146 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 13:13:44,146 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 1 seconds...
2026-02-08 13:13:44,147 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 13:13:44,148 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 13:13:44,148 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 13:13:44,148 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 13:13:44,148 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 5 seconds...
2026-02-08 13:13:44,148 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 13:13:44,149 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 13:13:44,149 - asky.core.engine - DEBUG - Tool call [71 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 13:13:44,149 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 13:13:44,149 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 13:13:44,149 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:13:44,150 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 13:13:44,150 - asky.core.engine - DEBUG - Tool call [82 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{"q": "test"}'}}
2026-02-08 13:13:44,150 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 13:13:44,150 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 13:13:44,150 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:13:44,153 - asky.rendering - INFO - [Opening browser: /path/to/archive/file.html]
2026-02-08 13:13:44,154 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 13:13:44,154 - asky.core.engine - DEBUG - Tool call [93 chrs]: {'id': 'call_123', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 13:13:44,154 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 13:13:44,155 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 13:13:44,155 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:13:44,156 - asky.core.engine - INFO - Starting turn 1/2
2026-02-08 13:13:44,156 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 13:13:44,156 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 13:13:44,156 - asky.core.engine - INFO - Starting turn 2/2
2026-02-08 13:13:44,156 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_2', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 13:13:44,156 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 13:13:44,156 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 13:13:44,156 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:13:44,158 - asky.core.engine - INFO - Starting turn 1/1
2026-02-08 13:13:44,158 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 13:13:44,158 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 13:13:44,158 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 13:13:44,158 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:13:44,160 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 13:13:44,160 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [{"role": "user", "content": "Hi"}], "temperature": 0.5, "top_p": 0.9, "tools": null, "tool_choice": "auto"}
2026-02-08 13:13:44,160 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 13:13:44,160 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 13:13:44,161 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 13:13:44,161 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [], "temperature": 0.7, "tools": null, "tool_choice": "auto"}
2026-02-08 13:13:44,161 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 13:13:44,161 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 13:13:44,183 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 13:13:44,185 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 13:13:44,189 - asky.push_data - ERROR - Failed to push data to 'test_endpoint': Network error
2026-02-08 13:13:44,190 - asky.push_data - ERROR - Failed to build payload for endpoint 'test_endpoint': Missing required parameter: title
2026-02-08 13:13:44,192 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 13:13:44,206 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:44,210 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:44,210 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:13:44,214 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:44,215 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:13:44,564 - chromadb.config - DEBUG - Starting component System
2026-02-08 13:13:44,564 - chromadb.config - DEBUG - Starting component Posthog
2026-02-08 13:13:44,628 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:13:44,632 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:44,632 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 13:13:44,634 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 13:13:44,639 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:44,639 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 13:13:44,641 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 13:13:44,644 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:44,648 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:44,653 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:44,654 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:13:44,659 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:44,660 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:13:44,665 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:44,665 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:13:44,669 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:44,670 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 13:13:44,674 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:44,674 - asky.research.cache - DEBUG - Cached URL http://example1.com with id=1
2026-02-08 13:13:44,675 - asky.research.cache - DEBUG - Cached URL http://example2.com with id=2
2026-02-08 13:13:44,679 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:44,679 - asky.research.cache - DEBUG - Scheduled background summarization for http://example.com
2026-02-08 13:13:44,679 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:13:44,680 - asky.research.cache - DEBUG - Background summarization completed for http://example.com
2026-02-08 13:13:45,182 - asky.research.cache - DEBUG - Shutting down research cache executor...
2026-02-08 13:13:45,183 - asky.research.cache - DEBUG - Research cache executor shutdown complete
2026-02-08 13:13:45,191 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:45,197 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:45,201 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:45,206 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:45,210 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:45,210 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:13:45,214 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:45,215 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:13:45,221 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:45,225 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:45,229 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:45,230 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:13:45,230 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 13:13:45,231 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 13:13:45,234 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:45,235 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:13:45,235 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 13:13:45,236 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 13:13:45,236 - asky.research.cache - DEBUG - Saved finding id=4
2026-02-08 13:13:45,236 - asky.research.cache - DEBUG - Saved finding id=5
2026-02-08 13:13:45,237 - asky.research.cache - DEBUG - Saved finding id=6
2026-02-08 13:13:45,237 - asky.research.cache - DEBUG - Saved finding id=7
2026-02-08 13:13:45,238 - asky.research.cache - DEBUG - Saved finding id=8
2026-02-08 13:13:45,238 - asky.research.cache - DEBUG - Saved finding id=9
2026-02-08 13:13:45,238 - asky.research.cache - DEBUG - Saved finding id=10
2026-02-08 13:13:45,242 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:45,243 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:13:45,243 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 13:13:45,244 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 13:13:45,248 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:45,249 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:13:45,249 - asky.research.cache - DEBUG - Deleted finding id=1
2026-02-08 13:13:45,254 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:45,266 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:45,267 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:13:45,272 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:45,273 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:13:45,273 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 13:13:45,277 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:45,278 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:13:45,282 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:45,283 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:13:45,306 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:13:45,307 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:13:45,307 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:13:45,308 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:13:45,308 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:13:45,309 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:13:45,309 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:13:45,310 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:13:45,311 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:13:45,311 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:13:45,311 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:13:45,312 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:13:45,312 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:13:45,313 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:13:45,314 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:13:45,314 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:13:45,315 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 13:13:45,315 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 13:13:45,315 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 13:13:45,315 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 13:13:45,315 - asky.research.embeddings - INFO - Loaded fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' successfully. Update research.embedding.model to avoid repeated primary model load failures.
2026-02-08 13:13:45,316 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 13:13:45,316 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 13:13:45,316 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 13:13:45,316 - asky.research.embeddings - DEBUG - Embedding model 'sentence-transformers/all-MiniLM-L6-v2' not available locally, attempting remote load.
2026-02-08 13:13:45,316 - asky.research.embeddings - ERROR - Failed to load sentence-transformer model 'bad/model': cannot load bad/model
2026-02-08 13:13:45,316 - asky.research.embeddings - ERROR - Fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' also failed: cannot load sentence-transformers/all-MiniLM-L6-v2
2026-02-08 13:13:45,316 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=cached/model, device=cpu
2026-02-08 13:13:45,317 - asky.research.embeddings - DEBUG - Loaded embedding model 'cached/model' from local Hugging Face cache.
2026-02-08 13:13:45,317 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=trunc/model, device=cpu
2026-02-08 13:13:45,317 - asky.research.embeddings - DEBUG - Loaded embedding model 'trunc/model' from local Hugging Face cache.
2026-02-08 13:13:45,321 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 13:13:45,326 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 13:13:45,326 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 13:13:45,328 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 13:13:45,330 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 13:13:45,331 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 13:13:45,332 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 13:13:45,335 - asky.research.tools - DEBUG - Cache hit for http://b.com
2026-02-08 13:13:45,336 - asky.research.tools - DEBUG - Cache hit for http://a.com
2026-02-08 13:13:45,337 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 13:13:45,339 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 13:13:45,348 - asky.research.tools - DEBUG - Generating chunk embeddings for http://example.com
2026-02-08 13:13:45,349 - asky.research.tools - ERROR - RAG retrieval failed for http://example.com: DB error
2026-02-08 13:13:45,357 - asky.research.tools - WARNING - Finding embedding failed (will still be saved): Embedding API unavailable
2026-02-08 13:13:45,362 - asky.research.tools - WARNING - Semantic search unavailable: API unavailable
2026-02-08 13:13:45,384 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:13:45,399 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 13:13:45,425 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:13:45,425 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 13:13:45,437 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 13:13:45,437 - asky.research.vector_store - WARNING - Chroma link query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 13:13:45,456 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:13:45,465 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 13:13:45,468 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:13:45,483 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:13:45,484 - asky.research.vector_store - WARNING - Chroma hybrid query failed; using SQLite dense scores: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 13:13:45,498 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:13:45,501 - asky.research.vector_store - WARNING - Embedding count mismatch: 2 vs 3
2026-02-08 13:13:45,502 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 13:13:45,513 - asky.research.vector_store - DEBUG - Stored 5 chunk embeddings for cache_id=1
2026-02-08 13:13:45,513 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 13:13:45,524 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 13:13:45,537 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 13:13:45,544 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 13:13:45,559 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 13:13:45,565 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 13:13:45,574 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 13:13:45,579 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 13:13:45,599 - asky.core.session_manager - INFO - Session 1 reached threshold (10/5). Compacting...
2026-02-08 13:13:45,599 - asky.core.session_manager - INFO - Found 1 messages to compact for session 1
2026-02-08 13:13:45,599 - asky.core.session_manager - INFO - Compacted content length: 9 chars
2026-02-08 13:13:45,599 - asky.core.session_manager - INFO - Compaction saved for session 1
2026-02-08 13:13:45,610 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=True
2026-02-08 13:13:45,610 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=46 results=2 elapsed=0.00ms
2026-02-08 13:13:45,610 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 13:13:45,610 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://docs.example.com/ai-safety text_len=47 title_len=19 elapsed=0.00ms source_type=search
2026-02-08 13:13:45,610 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://blog.example.com/plants text_len=52 title_len=13 elapsed=0.00ms source_type=search
2026-02-08 13:13:45,610 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 13:13:45,610 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=46 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:13:45,610 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://docs.example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 13:13:45,610 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://blog.example.com/plants semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 13:13:45,610 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.13ms fetch=0.06ms score=0.07ms total=0.28ms seeds=0 query_len=46 keyphrases=0 shortlisted=2 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 13:13:45,611 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 13:13:45,611 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:13:45,611 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 13:13:45,611 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 13:13:45,611 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 13:13:45,611 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:13:45,611 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 13:13:45,611 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.07ms fetch=0.04ms score=0.05ms total=0.17ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 13:13:45,612 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=2 selected=2 added=2 elapsed=0.02ms warning=None
2026-02-08 13:13:45,612 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=2 elapsed=0.05ms max_pages=1 per_page=10
2026-02-08 13:13:45,612 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:13:45,612 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=3 deduped=3 max_candidates=30
2026-02-08 13:13:45,612 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=50 title_len=9 elapsed=0.00ms source_type=seed
2026-02-08 13:13:45,612 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/ai-safety text_len=51 title_len=15 elapsed=0.00ms source_type=seed_link
2026-02-08 13:13:45,612 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/garden text_len=51 title_len=11 elapsed=0.00ms source_type=seed_link
2026-02-08 13:13:45,612 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=3 attempted=3 extracted=3 max_fetch=15
2026-02-08 13:13:45,612 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=39 docs=3 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:13:45,612 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 13:13:45,612 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 13:13:45,612 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/garden semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 13:13:45,612 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.11ms fetch=0.07ms score=0.09ms total=0.29ms seeds=1 query_len=39 keyphrases=0 shortlisted=3 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 3, 'candidate_deduped': 3, 'fetch_calls': 3, 'fetch_success': 3, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 2, 'seed_link_added': 2, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 3} warnings=0
2026-02-08 13:13:45,613 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 13:13:45,613 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:13:45,613 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 13:13:45,613 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 13:13:45,613 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 13:13:45,613 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:13:45,613 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 13:13:45,613 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.05ms total=0.15ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 13:13:45,614 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=3 selected=3 added=1 elapsed=0.02ms warning=None
2026-02-08 13:13:45,614 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=1 elapsed=0.05ms max_pages=1 per_page=10
2026-02-08 13:13:45,614 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:13:45,614 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=2 deduped=2 max_candidates=30
2026-02-08 13:13:45,614 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=57 title_len=5 elapsed=0.00ms source_type=seed
2026-02-08 13:13:45,614 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/world text_len=63 title_len=5 elapsed=0.00ms source_type=seed_link
2026-02-08 13:13:45,614 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 13:13:45,614 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=26 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:13:45,614 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 13:13:45,614 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/world semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 13:13:45,614 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.10ms fetch=0.05ms score=0.07ms total=0.23ms seeds=1 query_len=26 keyphrases=0 shortlisted=2 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 3, 'seed_link_added': 1, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 13:13:45,615 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=False
2026-02-08 13:13:45,615 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=43 results=2 elapsed=0.00ms
2026-02-08 13:13:45,615 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 13:13:45,615 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/europe text_len=80 title_len=6 elapsed=0.00ms source_type=search
2026-02-08 13:13:45,615 - asky.research.source_shortlist - DEBUG - source_shortlist fetch canonical dedupe skip url=https://example.com/europe canonical=https://example.com/europe
2026-02-08 13:13:45,615 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=1 max_fetch=15
2026-02-08 13:13:45,615 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=43 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:13:45,615 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/europe semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 13:13:45,615 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.08ms fetch=0.06ms score=0.04ms total=0.19ms seeds=0 query_len=43 keyphrases=0 shortlisted=1 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 1, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 13:13:45,616 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 13:13:45,616 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:13:45,616 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 13:13:45,616 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=54 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 13:13:45,616 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 13:13:45,616 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=27 docs=1
2026-02-08 13:13:45,616 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.0000 final=0.0000
2026-02-08 13:13:45,616 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.07ms fetch=0.03ms score=0.04ms total=0.16ms seeds=1 query_len=27 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 13:13:45,618 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 13:13:45,618 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:13:45,618 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 13:13:45,618 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 13:13:45,618 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 13:13:45,618 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=31 docs=1
2026-02-08 13:13:45,618 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 13:13:45,618 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.08ms fetch=0.04ms score=0.04ms total=0.18ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 13:13:45,663 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:45,681 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 13:13:45,687 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:13:45,713 - asky.summarization - DEBUG - summarization hierarchical start input_len=5196 chunks=6 target_chunk=180
2026-02-08 13:13:45,713 - asky.summarization - DEBUG - summarization hierarchical complete chunks=6 rounds=3 elapsed=0.10ms
2026-02-08 13:20:10,895 - asky.research.source_shortlist - DEBUG - source_shortlist disabled for mode=standard in 0.00ms
2026-02-08 13:20:10,895 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.15ms
2026-02-08 13:20:10,897 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:20:10,901 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.00ms
2026-02-08 13:20:10,918 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:20:12,458 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:20:12,494 - asky.core.session_manager - INFO - Session 1 reached threshold (10/5). Compacting...
2026-02-08 13:20:12,494 - asky.core.session_manager - INFO - Found 1 messages to compact for session 1
2026-02-08 13:20:12,494 - asky.core.session_manager - INFO - Compacted content length: 9 chars
2026-02-08 13:20:12,495 - asky.core.session_manager - INFO - Compaction saved for session 1
2026-02-08 13:20:35,337 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:20:35,339 - asky.research.source_shortlist - DEBUG - source_shortlist disabled for mode=standard in 0.00ms
2026-02-08 13:20:35,339 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.04ms
2026-02-08 13:20:35,344 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.01ms
2026-02-08 13:20:35,360 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:20:36,987 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:20:37,167 - asky.core.session_manager - INFO - Session 1 reached threshold (10/5). Compacting...
2026-02-08 13:20:37,167 - asky.core.session_manager - INFO - Found 1 messages to compact for session 1
2026-02-08 13:20:37,167 - asky.core.session_manager - INFO - Compacted content length: 9 chars
2026-02-08 13:20:37,170 - asky.core.session_manager - INFO - Compaction saved for session 1
2026-02-08 13:21:54,989 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:21:54,991 - asky.research.source_shortlist - DEBUG - source_shortlist disabled for mode=standard in 0.00ms
2026-02-08 13:21:54,991 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.05ms
2026-02-08 13:21:54,999 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.00ms
2026-02-08 13:23:22,016 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:22,018 - asky.research.source_shortlist - DEBUG - source_shortlist disabled for mode=standard in 0.00ms
2026-02-08 13:23:22,018 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.04ms
2026-02-08 13:23:22,024 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.00ms
2026-02-08 13:23:22,040 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 13:23:22,041 - asky.core.api_client - INFO - Sending request to LLM: test-model
2026-02-08 13:23:22,041 - asky.core.api_client - DEBUG - Payload: {"model": "test-model", "messages": [{"role": "user", "content": "test"}], "tools": [], "tool_choice": "auto"}
2026-02-08 13:23:22,041 - asky.core.api_client - INFO - [test] Sent: 1 tokens
2026-02-08 13:23:22,041 - asky.core.engine - ERROR - API Error 400: 400 Client Error: Bad Request
2026-02-08 13:23:22,041 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:23:22,042 - asky.core.engine - INFO - Context threshold reached (628/500). Compacting...
2026-02-08 13:23:22,042 - asky.core.engine - INFO - Compaction failed to preserve history. Returning minimal context: 625 tokens.
2026-02-08 13:23:22,043 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 13:23:22,043 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:23:22,064 - asky.tools - INFO - Executing custom tool command: ls "."
2026-02-08 13:23:22,065 - asky.tools - INFO - Executing custom tool command: ls "/tmp/test"
2026-02-08 13:23:22,066 - asky.tools - INFO - Executing custom tool command: echo "hello world"
2026-02-08 13:23:22,068 - asky.tools - INFO - Executing custom tool command: echo "already quoted"
2026-02-08 13:23:22,069 - asky.tools - INFO - Executing custom tool command: echo "test"
2026-02-08 13:23:22,076 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 13:23:22,076 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 13:23:22,076 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 13:23:22,077 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 13:23:22,077 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:23:22,077 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 13:23:22,078 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 13:23:22,078 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 13:23:22,078 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 13:23:22,078 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:23:22,078 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 13:23:22,080 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 13:23:22,080 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 13:23:22,080 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 13:23:22,080 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 13:23:22,080 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:23:22,080 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 13:23:22,080 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 13:23:22,080 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 13:23:22,080 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 13:23:22,080 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:23:22,080 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 13:23:22,081 - asky.email_sender - ERROR - SMTP credentials not configured. Please set ASKY_SMTP_USER and ASKY_SMTP_PASSWORD.
2026-02-08 13:23:22,082 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 13:23:22,082 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 13:23:22,082 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 13:23:22,082 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 13:23:22,082 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:23:22,082 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 13:23:22,082 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 13:23:22,082 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 13:23:22,082 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 13:23:22,082 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:23:22,082 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 13:23:22,082 - asky.email_sender - ERROR - Failed to send email: Auth failed
2026-02-08 13:23:22,101 - asky.rendering - WARNING - Template not found at <MagicMock name='TEMPLATE_PATH' id='4646102624'>
2026-02-08 13:23:22,103 - asky.rendering - DEBUG - Extracted title for filename: Test Content
2026-02-08 13:23:22,123 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 13:23:22,124 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [{"role": "user", "content": "Hi"}], "tools": null, "tool_choice": "auto"}
2026-02-08 13:23:22,124 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 13:23:22,124 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 13:23:22,125 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 13:23:22,125 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 13:23:22,125 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 13:23:22,125 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 1 seconds...
2026-02-08 13:23:22,125 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 13:23:22,126 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 13:23:22,126 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 13:23:22,126 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 13:23:22,126 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 5 seconds...
2026-02-08 13:23:22,126 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 13:23:22,127 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 13:23:22,127 - asky.core.engine - DEBUG - Tool call [71 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 13:23:22,127 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 13:23:22,127 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 13:23:22,127 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:23:22,128 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 13:23:22,128 - asky.core.engine - DEBUG - Tool call [82 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{"q": "test"}'}}
2026-02-08 13:23:22,128 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 13:23:22,128 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 13:23:22,128 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:23:22,131 - asky.rendering - INFO - [Opening browser: /path/to/archive/file.html]
2026-02-08 13:23:22,132 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 13:23:22,132 - asky.core.engine - DEBUG - Tool call [93 chrs]: {'id': 'call_123', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 13:23:22,132 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 13:23:22,132 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 13:23:22,132 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:23:22,133 - asky.core.engine - INFO - Starting turn 1/2
2026-02-08 13:23:22,133 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 13:23:22,133 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 13:23:22,133 - asky.core.engine - INFO - Starting turn 2/2
2026-02-08 13:23:22,133 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_2', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 13:23:22,133 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 13:23:22,134 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 13:23:22,134 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:23:22,134 - asky.core.engine - INFO - Starting turn 1/1
2026-02-08 13:23:22,134 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 13:23:22,135 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 13:23:22,135 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 13:23:22,135 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:23:22,136 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 13:23:22,136 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [{"role": "user", "content": "Hi"}], "temperature": 0.5, "top_p": 0.9, "tools": null, "tool_choice": "auto"}
2026-02-08 13:23:22,136 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 13:23:22,136 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 13:23:22,137 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 13:23:22,137 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [], "temperature": 0.7, "tools": null, "tool_choice": "auto"}
2026-02-08 13:23:22,137 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 13:23:22,137 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 13:23:22,158 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 13:23:22,159 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 13:23:22,163 - asky.push_data - ERROR - Failed to push data to 'test_endpoint': Network error
2026-02-08 13:23:22,163 - asky.push_data - ERROR - Failed to build payload for endpoint 'test_endpoint': Missing required parameter: title
2026-02-08 13:23:22,164 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 13:23:22,178 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:22,181 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:22,182 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:23:22,186 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:22,186 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:23:22,514 - chromadb.config - DEBUG - Starting component System
2026-02-08 13:23:22,515 - chromadb.config - DEBUG - Starting component Posthog
2026-02-08 13:23:22,578 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:23:22,582 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:22,583 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 13:23:22,584 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 13:23:22,588 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:22,589 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 13:23:22,590 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 13:23:22,594 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:22,597 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:22,602 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:22,602 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:23:22,606 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:22,607 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:23:22,610 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:22,611 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:23:22,614 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:22,615 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 13:23:22,619 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:22,619 - asky.research.cache - DEBUG - Cached URL http://example1.com with id=1
2026-02-08 13:23:22,620 - asky.research.cache - DEBUG - Cached URL http://example2.com with id=2
2026-02-08 13:23:22,624 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:22,625 - asky.research.cache - DEBUG - Scheduled background summarization for http://example.com
2026-02-08 13:23:22,625 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:23:22,626 - asky.research.cache - DEBUG - Background summarization completed for http://example.com
2026-02-08 13:23:23,134 - asky.research.cache - DEBUG - Shutting down research cache executor...
2026-02-08 13:23:23,134 - asky.research.cache - DEBUG - Research cache executor shutdown complete
2026-02-08 13:23:23,148 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:23,159 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:23,166 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:23,172 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:23,178 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:23,179 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:23:23,184 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:23,185 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:23:23,190 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:23,194 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:23,199 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:23,199 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:23:23,200 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 13:23:23,200 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 13:23:23,205 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:23,205 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:23:23,206 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 13:23:23,206 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 13:23:23,207 - asky.research.cache - DEBUG - Saved finding id=4
2026-02-08 13:23:23,207 - asky.research.cache - DEBUG - Saved finding id=5
2026-02-08 13:23:23,208 - asky.research.cache - DEBUG - Saved finding id=6
2026-02-08 13:23:23,208 - asky.research.cache - DEBUG - Saved finding id=7
2026-02-08 13:23:23,209 - asky.research.cache - DEBUG - Saved finding id=8
2026-02-08 13:23:23,209 - asky.research.cache - DEBUG - Saved finding id=9
2026-02-08 13:23:23,209 - asky.research.cache - DEBUG - Saved finding id=10
2026-02-08 13:23:23,214 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:23,214 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:23:23,214 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 13:23:23,215 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 13:23:23,218 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:23,219 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:23:23,220 - asky.research.cache - DEBUG - Deleted finding id=1
2026-02-08 13:23:23,223 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:23,227 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:23,227 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:23:23,232 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:23,233 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:23:23,233 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 13:23:23,236 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:23,237 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:23:23,241 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:23,241 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:23:23,262 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:23:23,262 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:23:23,262 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:23:23,263 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:23:23,263 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:23:23,264 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:23:23,264 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:23:23,265 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:23:23,266 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:23:23,266 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:23:23,266 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:23:23,267 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:23:23,267 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:23:23,268 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:23:23,269 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:23:23,269 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:23:23,270 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 13:23:23,270 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 13:23:23,270 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 13:23:23,270 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 13:23:23,270 - asky.research.embeddings - INFO - Loaded fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' successfully. Update research.embedding.model to avoid repeated primary model load failures.
2026-02-08 13:23:23,271 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 13:23:23,271 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 13:23:23,271 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 13:23:23,271 - asky.research.embeddings - DEBUG - Embedding model 'sentence-transformers/all-MiniLM-L6-v2' not available locally, attempting remote load.
2026-02-08 13:23:23,271 - asky.research.embeddings - ERROR - Failed to load sentence-transformer model 'bad/model': cannot load bad/model
2026-02-08 13:23:23,271 - asky.research.embeddings - ERROR - Fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' also failed: cannot load sentence-transformers/all-MiniLM-L6-v2
2026-02-08 13:23:23,272 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=cached/model, device=cpu
2026-02-08 13:23:23,272 - asky.research.embeddings - DEBUG - Loaded embedding model 'cached/model' from local Hugging Face cache.
2026-02-08 13:23:23,272 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=trunc/model, device=cpu
2026-02-08 13:23:23,273 - asky.research.embeddings - DEBUG - Loaded embedding model 'trunc/model' from local Hugging Face cache.
2026-02-08 13:23:23,276 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 13:23:23,280 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 13:23:23,280 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 13:23:23,282 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 13:23:23,283 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 13:23:23,284 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 13:23:23,286 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 13:23:23,288 - asky.research.tools - DEBUG - Cache hit for http://b.com
2026-02-08 13:23:23,288 - asky.research.tools - DEBUG - Cache hit for http://a.com
2026-02-08 13:23:23,290 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 13:23:23,291 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 13:23:23,300 - asky.research.tools - DEBUG - Generating chunk embeddings for http://example.com
2026-02-08 13:23:23,301 - asky.research.tools - ERROR - RAG retrieval failed for http://example.com: DB error
2026-02-08 13:23:23,309 - asky.research.tools - WARNING - Finding embedding failed (will still be saved): Embedding API unavailable
2026-02-08 13:23:23,313 - asky.research.tools - WARNING - Semantic search unavailable: API unavailable
2026-02-08 13:23:23,335 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:23:23,348 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 13:23:23,364 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:23:23,364 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 13:23:23,376 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 13:23:23,376 - asky.research.vector_store - WARNING - Chroma link query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 13:23:23,397 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:23:23,406 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 13:23:23,409 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:23:23,418 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:23:23,418 - asky.research.vector_store - WARNING - Chroma hybrid query failed; using SQLite dense scores: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 13:23:23,426 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:23:23,428 - asky.research.vector_store - WARNING - Embedding count mismatch: 2 vs 3
2026-02-08 13:23:23,429 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 13:23:23,435 - asky.research.vector_store - DEBUG - Stored 5 chunk embeddings for cache_id=1
2026-02-08 13:23:23,435 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 13:23:23,446 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 13:23:23,458 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 13:23:23,464 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 13:23:23,478 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 13:23:23,483 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 13:23:23,491 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 13:23:23,496 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 13:23:23,515 - asky.core.session_manager - INFO - Session 1 reached threshold (10/5). Compacting...
2026-02-08 13:23:23,515 - asky.core.session_manager - INFO - Found 1 messages to compact for session 1
2026-02-08 13:23:23,515 - asky.core.session_manager - INFO - Compacted content length: 9 chars
2026-02-08 13:23:23,515 - asky.core.session_manager - INFO - Compaction saved for session 1
2026-02-08 13:23:23,525 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=True
2026-02-08 13:23:23,525 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=46 results=2 elapsed=0.00ms
2026-02-08 13:23:23,525 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 13:23:23,525 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://docs.example.com/ai-safety text_len=47 title_len=19 elapsed=0.00ms source_type=search
2026-02-08 13:23:23,525 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://blog.example.com/plants text_len=52 title_len=13 elapsed=0.00ms source_type=search
2026-02-08 13:23:23,525 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 13:23:23,525 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=46 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:23:23,525 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://docs.example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 13:23:23,525 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://blog.example.com/plants semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 13:23:23,525 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.11ms fetch=0.06ms score=0.08ms total=0.26ms seeds=0 query_len=46 keyphrases=0 shortlisted=2 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 13:23:23,526 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 13:23:23,526 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:23:23,526 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 13:23:23,526 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 13:23:23,526 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 13:23:23,526 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:23:23,526 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 13:23:23,526 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.07ms fetch=0.03ms score=0.05ms total=0.16ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 13:23:23,527 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=2 selected=2 added=2 elapsed=0.02ms warning=None
2026-02-08 13:23:23,527 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=2 elapsed=0.05ms max_pages=1 per_page=10
2026-02-08 13:23:23,527 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:23:23,527 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=3 deduped=3 max_candidates=30
2026-02-08 13:23:23,527 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=50 title_len=9 elapsed=0.00ms source_type=seed
2026-02-08 13:23:23,527 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/ai-safety text_len=51 title_len=15 elapsed=0.00ms source_type=seed_link
2026-02-08 13:23:23,527 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/garden text_len=51 title_len=11 elapsed=0.00ms source_type=seed_link
2026-02-08 13:23:23,527 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=3 attempted=3 extracted=3 max_fetch=15
2026-02-08 13:23:23,527 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=39 docs=3 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:23:23,527 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 13:23:23,527 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 13:23:23,527 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/garden semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 13:23:23,527 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.11ms fetch=0.06ms score=0.09ms total=0.27ms seeds=1 query_len=39 keyphrases=0 shortlisted=3 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 3, 'candidate_deduped': 3, 'fetch_calls': 3, 'fetch_success': 3, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 2, 'seed_link_added': 2, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 3} warnings=0
2026-02-08 13:23:23,528 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 13:23:23,528 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:23:23,528 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 13:23:23,528 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 13:23:23,528 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 13:23:23,528 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:23:23,528 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 13:23:23,528 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.05ms fetch=0.03ms score=0.04ms total=0.14ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 13:23:23,529 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=3 selected=3 added=1 elapsed=0.03ms warning=None
2026-02-08 13:23:23,529 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=1 elapsed=0.06ms max_pages=1 per_page=10
2026-02-08 13:23:23,529 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:23:23,529 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=2 deduped=2 max_candidates=30
2026-02-08 13:23:23,529 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=57 title_len=5 elapsed=0.00ms source_type=seed
2026-02-08 13:23:23,529 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/world text_len=63 title_len=5 elapsed=0.00ms source_type=seed_link
2026-02-08 13:23:23,529 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 13:23:23,529 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=26 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:23:23,529 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 13:23:23,529 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/world semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 13:23:23,529 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.12ms fetch=0.05ms score=0.07ms total=0.25ms seeds=1 query_len=26 keyphrases=0 shortlisted=2 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 3, 'seed_link_added': 1, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 13:23:23,530 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=False
2026-02-08 13:23:23,530 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=43 results=2 elapsed=0.00ms
2026-02-08 13:23:23,530 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 13:23:23,530 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/europe text_len=80 title_len=6 elapsed=0.00ms source_type=search
2026-02-08 13:23:23,531 - asky.research.source_shortlist - DEBUG - source_shortlist fetch canonical dedupe skip url=https://example.com/europe canonical=https://example.com/europe
2026-02-08 13:23:23,531 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=1 max_fetch=15
2026-02-08 13:23:23,531 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=43 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:23:23,531 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/europe semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 13:23:23,531 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.09ms fetch=0.06ms score=0.04ms total=0.20ms seeds=0 query_len=43 keyphrases=0 shortlisted=1 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 1, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 13:23:23,531 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 13:23:23,531 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:23:23,531 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 13:23:23,532 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=54 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 13:23:23,532 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 13:23:23,532 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=27 docs=1
2026-02-08 13:23:23,532 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.0000 final=0.0000
2026-02-08 13:23:23,532 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.14ms seeds=1 query_len=27 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 13:23:23,533 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 13:23:23,533 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:23:23,533 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 13:23:23,533 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 13:23:23,533 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 13:23:23,533 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=31 docs=1
2026-02-08 13:23:23,533 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 13:23:23,533 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.14ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 13:23:23,537 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:23,544 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 13:23:23,548 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:23,572 - asky.summarization - DEBUG - summarization hierarchical start input_len=5196 chunks=6 target_chunk=180
2026-02-08 13:23:23,572 - asky.summarization - DEBUG - summarization hierarchical complete chunks=6 rounds=3 elapsed=0.08ms
2026-02-08 13:23:55,175 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:55,177 - asky.research.source_shortlist - DEBUG - source_shortlist disabled for mode=standard in 0.00ms
2026-02-08 13:23:55,177 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.06ms
2026-02-08 13:23:55,193 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.01ms
2026-02-08 13:23:55,281 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 13:23:55,283 - asky.core.api_client - INFO - Sending request to LLM: test-model
2026-02-08 13:23:55,283 - asky.core.api_client - DEBUG - Payload: {"model": "test-model", "messages": [{"role": "user", "content": "test"}], "tools": [], "tool_choice": "auto"}
2026-02-08 13:23:55,283 - asky.core.api_client - INFO - [test] Sent: 1 tokens
2026-02-08 13:23:55,283 - asky.core.engine - ERROR - API Error 400: 400 Client Error: Bad Request
2026-02-08 13:23:55,286 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:23:55,288 - asky.core.engine - INFO - Context threshold reached (628/500). Compacting...
2026-02-08 13:23:55,288 - asky.core.engine - INFO - Compaction failed to preserve history. Returning minimal context: 625 tokens.
2026-02-08 13:23:55,290 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 13:23:55,290 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:23:55,291 - asky.core.engine - INFO - Context threshold reached (520/100). Compacting...
2026-02-08 13:23:55,292 - asky.core.engine - DEBUG - [Smart Compaction] Found summary for URL https://example.com/long-article (dict). Replacing content.
2026-02-08 13:23:55,292 - asky.core.engine - INFO - Smart compaction successful. Reduced from 520 to 42
2026-02-08 13:23:55,294 - asky.tools - INFO - Executing custom tool command: ls "."
2026-02-08 13:23:55,295 - asky.tools - INFO - Executing custom tool command: ls "/tmp/test"
2026-02-08 13:23:55,297 - asky.tools - INFO - Executing custom tool command: echo "hello world"
2026-02-08 13:23:55,298 - asky.tools - INFO - Executing custom tool command: echo "already quoted"
2026-02-08 13:23:55,300 - asky.tools - INFO - Executing custom tool command: echo "test"
2026-02-08 13:23:55,307 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 13:23:55,308 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 13:23:55,308 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 13:23:55,308 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 13:23:55,309 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:23:55,309 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 13:23:55,310 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 13:23:55,310 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 13:23:55,310 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 13:23:55,310 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:23:55,310 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 13:23:55,311 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 13:23:55,311 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 13:23:55,312 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 13:23:55,312 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 13:23:55,312 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:23:55,312 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 13:23:55,312 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 13:23:55,312 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 13:23:55,312 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 13:23:55,312 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:23:55,312 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 13:23:55,313 - asky.email_sender - ERROR - SMTP credentials not configured. Please set ASKY_SMTP_USER and ASKY_SMTP_PASSWORD.
2026-02-08 13:23:55,314 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 13:23:55,314 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 13:23:55,314 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 13:23:55,314 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 13:23:55,314 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:23:55,314 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 13:23:55,314 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 13:23:55,314 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 13:23:55,314 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 13:23:55,314 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:23:55,314 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 13:23:55,315 - asky.email_sender - ERROR - Failed to send email: Auth failed
2026-02-08 13:23:55,332 - asky.rendering - WARNING - Template not found at <MagicMock name='TEMPLATE_PATH' id='4572286656'>
2026-02-08 13:23:55,335 - asky.rendering - DEBUG - Extracted title for filename: Test Content
2026-02-08 13:23:55,356 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 13:23:55,356 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [{"role": "user", "content": "Hi"}], "tools": null, "tool_choice": "auto"}
2026-02-08 13:23:55,356 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 13:23:55,357 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 13:23:55,358 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 13:23:55,358 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 13:23:55,358 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 13:23:55,358 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 1 seconds...
2026-02-08 13:23:55,358 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 13:23:55,359 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 13:23:55,359 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 13:23:55,359 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 13:23:55,359 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 5 seconds...
2026-02-08 13:23:55,359 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 13:23:55,360 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 13:23:55,360 - asky.core.engine - DEBUG - Tool call [71 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 13:23:55,360 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 13:23:55,360 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 13:23:55,360 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:23:55,361 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 13:23:55,361 - asky.core.engine - DEBUG - Tool call [82 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{"q": "test"}'}}
2026-02-08 13:23:55,361 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 13:23:55,361 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 13:23:55,361 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:23:55,364 - asky.rendering - INFO - [Opening browser: /path/to/archive/file.html]
2026-02-08 13:23:55,365 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 13:23:55,365 - asky.core.engine - DEBUG - Tool call [93 chrs]: {'id': 'call_123', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 13:23:55,365 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 13:23:55,365 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 13:23:55,365 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:23:55,366 - asky.core.engine - INFO - Starting turn 1/2
2026-02-08 13:23:55,366 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 13:23:55,366 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 13:23:55,366 - asky.core.engine - INFO - Starting turn 2/2
2026-02-08 13:23:55,366 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_2', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 13:23:55,366 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 13:23:55,366 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 13:23:55,367 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:23:55,367 - asky.core.engine - INFO - Starting turn 1/1
2026-02-08 13:23:55,368 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 13:23:55,368 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 13:23:55,368 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 13:23:55,368 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:23:55,369 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 13:23:55,369 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [{"role": "user", "content": "Hi"}], "temperature": 0.5, "top_p": 0.9, "tools": null, "tool_choice": "auto"}
2026-02-08 13:23:55,369 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 13:23:55,370 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 13:23:55,371 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 13:23:55,371 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [], "temperature": 0.7, "tools": null, "tool_choice": "auto"}
2026-02-08 13:23:55,371 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 13:23:55,371 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 13:23:55,392 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 13:23:55,393 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 13:23:55,396 - asky.push_data - ERROR - Failed to push data to 'test_endpoint': Network error
2026-02-08 13:23:55,397 - asky.push_data - ERROR - Failed to build payload for endpoint 'test_endpoint': Missing required parameter: title
2026-02-08 13:23:55,399 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 13:23:55,412 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:55,416 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:55,417 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:23:55,421 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:55,422 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:23:55,751 - chromadb.config - DEBUG - Starting component System
2026-02-08 13:23:55,751 - chromadb.config - DEBUG - Starting component Posthog
2026-02-08 13:23:55,805 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:23:55,809 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:55,810 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 13:23:55,812 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 13:23:55,815 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:55,815 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 13:23:55,816 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 13:23:55,820 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:55,824 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:55,828 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:55,829 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:23:55,832 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:55,833 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:23:55,836 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:55,837 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:23:55,841 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:55,842 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 13:23:55,845 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:55,845 - asky.research.cache - DEBUG - Cached URL http://example1.com with id=1
2026-02-08 13:23:55,846 - asky.research.cache - DEBUG - Cached URL http://example2.com with id=2
2026-02-08 13:23:55,849 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:55,850 - asky.research.cache - DEBUG - Scheduled background summarization for http://example.com
2026-02-08 13:23:55,850 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:23:55,850 - asky.research.cache - DEBUG - Background summarization completed for http://example.com
2026-02-08 13:23:56,358 - asky.research.cache - DEBUG - Shutting down research cache executor...
2026-02-08 13:23:56,359 - asky.research.cache - DEBUG - Research cache executor shutdown complete
2026-02-08 13:23:56,377 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:56,385 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:56,391 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:56,398 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:56,404 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:56,404 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:23:56,409 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:56,410 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:23:56,415 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:56,419 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:56,423 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:56,424 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:23:56,424 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 13:23:56,425 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 13:23:56,429 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:56,429 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:23:56,430 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 13:23:56,430 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 13:23:56,431 - asky.research.cache - DEBUG - Saved finding id=4
2026-02-08 13:23:56,431 - asky.research.cache - DEBUG - Saved finding id=5
2026-02-08 13:23:56,432 - asky.research.cache - DEBUG - Saved finding id=6
2026-02-08 13:23:56,432 - asky.research.cache - DEBUG - Saved finding id=7
2026-02-08 13:23:56,432 - asky.research.cache - DEBUG - Saved finding id=8
2026-02-08 13:23:56,433 - asky.research.cache - DEBUG - Saved finding id=9
2026-02-08 13:23:56,433 - asky.research.cache - DEBUG - Saved finding id=10
2026-02-08 13:23:56,437 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:56,438 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:23:56,438 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 13:23:56,439 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 13:23:56,443 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:56,444 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:23:56,444 - asky.research.cache - DEBUG - Deleted finding id=1
2026-02-08 13:23:56,448 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:56,452 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:56,452 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:23:56,456 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:56,457 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:23:56,458 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 13:23:56,461 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:56,461 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:23:56,465 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:56,465 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:23:56,486 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:23:56,486 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:23:56,486 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:23:56,487 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:23:56,487 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:23:56,488 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:23:56,488 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:23:56,489 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:23:56,490 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:23:56,490 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:23:56,491 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:23:56,492 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:23:56,492 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:23:56,492 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:23:56,493 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:23:56,493 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:23:56,494 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 13:23:56,494 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 13:23:56,494 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 13:23:56,494 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 13:23:56,494 - asky.research.embeddings - INFO - Loaded fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' successfully. Update research.embedding.model to avoid repeated primary model load failures.
2026-02-08 13:23:56,495 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 13:23:56,495 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 13:23:56,495 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 13:23:56,495 - asky.research.embeddings - DEBUG - Embedding model 'sentence-transformers/all-MiniLM-L6-v2' not available locally, attempting remote load.
2026-02-08 13:23:56,495 - asky.research.embeddings - ERROR - Failed to load sentence-transformer model 'bad/model': cannot load bad/model
2026-02-08 13:23:56,495 - asky.research.embeddings - ERROR - Fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' also failed: cannot load sentence-transformers/all-MiniLM-L6-v2
2026-02-08 13:23:56,496 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=cached/model, device=cpu
2026-02-08 13:23:56,496 - asky.research.embeddings - DEBUG - Loaded embedding model 'cached/model' from local Hugging Face cache.
2026-02-08 13:23:56,496 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=trunc/model, device=cpu
2026-02-08 13:23:56,497 - asky.research.embeddings - DEBUG - Loaded embedding model 'trunc/model' from local Hugging Face cache.
2026-02-08 13:23:56,500 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 13:23:56,504 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 13:23:56,504 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 13:23:56,506 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 13:23:56,507 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 13:23:56,508 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 13:23:56,510 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 13:23:56,511 - asky.research.tools - DEBUG - Cache hit for http://b.com
2026-02-08 13:23:56,511 - asky.research.tools - DEBUG - Cache hit for http://a.com
2026-02-08 13:23:56,513 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 13:23:56,515 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 13:23:56,524 - asky.research.tools - DEBUG - Generating chunk embeddings for http://example.com
2026-02-08 13:23:56,525 - asky.research.tools - ERROR - RAG retrieval failed for http://example.com: DB error
2026-02-08 13:23:56,533 - asky.research.tools - WARNING - Finding embedding failed (will still be saved): Embedding API unavailable
2026-02-08 13:23:56,537 - asky.research.tools - WARNING - Semantic search unavailable: API unavailable
2026-02-08 13:23:56,555 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:23:56,568 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 13:23:56,577 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:23:56,577 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 13:23:56,588 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 13:23:56,589 - asky.research.vector_store - WARNING - Chroma link query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 13:23:56,600 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:23:56,609 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 13:23:56,612 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:23:56,621 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:23:56,621 - asky.research.vector_store - WARNING - Chroma hybrid query failed; using SQLite dense scores: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 13:23:56,629 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:23:56,631 - asky.research.vector_store - WARNING - Embedding count mismatch: 2 vs 3
2026-02-08 13:23:56,632 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 13:23:56,638 - asky.research.vector_store - DEBUG - Stored 5 chunk embeddings for cache_id=1
2026-02-08 13:23:56,638 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 13:23:56,649 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 13:23:56,661 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 13:23:56,666 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 13:23:56,680 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 13:23:56,685 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 13:23:56,693 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 13:23:56,699 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 13:23:56,719 - asky.core.session_manager - INFO - Session 1 reached threshold (10/5). Compacting...
2026-02-08 13:23:56,719 - asky.core.session_manager - INFO - Found 1 messages to compact for session 1
2026-02-08 13:23:56,719 - asky.core.session_manager - INFO - Compacted content length: 9 chars
2026-02-08 13:23:56,719 - asky.core.session_manager - INFO - Compaction saved for session 1
2026-02-08 13:23:56,728 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=True
2026-02-08 13:23:56,728 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=46 results=2 elapsed=0.00ms
2026-02-08 13:23:56,729 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 13:23:56,729 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://docs.example.com/ai-safety text_len=47 title_len=19 elapsed=0.00ms source_type=search
2026-02-08 13:23:56,729 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://blog.example.com/plants text_len=52 title_len=13 elapsed=0.00ms source_type=search
2026-02-08 13:23:56,729 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 13:23:56,729 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=46 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:23:56,729 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://docs.example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 13:23:56,729 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://blog.example.com/plants semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 13:23:56,729 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.10ms fetch=0.06ms score=0.07ms total=0.24ms seeds=0 query_len=46 keyphrases=0 shortlisted=2 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 13:23:56,730 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 13:23:56,730 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:23:56,730 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 13:23:56,730 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 13:23:56,730 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 13:23:56,730 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:23:56,730 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 13:23:56,730 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.05ms total=0.16ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 13:23:56,731 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=2 selected=2 added=2 elapsed=0.03ms warning=None
2026-02-08 13:23:56,731 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=2 elapsed=0.06ms max_pages=1 per_page=10
2026-02-08 13:23:56,731 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:23:56,731 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=3 deduped=3 max_candidates=30
2026-02-08 13:23:56,731 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=50 title_len=9 elapsed=0.00ms source_type=seed
2026-02-08 13:23:56,731 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/ai-safety text_len=51 title_len=15 elapsed=0.00ms source_type=seed_link
2026-02-08 13:23:56,731 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/garden text_len=51 title_len=11 elapsed=0.00ms source_type=seed_link
2026-02-08 13:23:56,731 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=3 attempted=3 extracted=3 max_fetch=15
2026-02-08 13:23:56,731 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=39 docs=3 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:23:56,731 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 13:23:56,731 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 13:23:56,731 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/garden semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 13:23:56,731 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.12ms fetch=0.06ms score=0.08ms total=0.28ms seeds=1 query_len=39 keyphrases=0 shortlisted=3 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 3, 'candidate_deduped': 3, 'fetch_calls': 3, 'fetch_success': 3, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 2, 'seed_link_added': 2, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 3} warnings=0
2026-02-08 13:23:56,732 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 13:23:56,732 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:23:56,732 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 13:23:56,732 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 13:23:56,732 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 13:23:56,732 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:23:56,732 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 13:23:56,732 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.14ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 13:23:56,733 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=3 selected=3 added=1 elapsed=0.03ms warning=None
2026-02-08 13:23:56,733 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=1 elapsed=0.06ms max_pages=1 per_page=10
2026-02-08 13:23:56,733 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:23:56,733 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=2 deduped=2 max_candidates=30
2026-02-08 13:23:56,733 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=57 title_len=5 elapsed=0.00ms source_type=seed
2026-02-08 13:23:56,733 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/world text_len=63 title_len=5 elapsed=0.00ms source_type=seed_link
2026-02-08 13:23:56,733 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 13:23:56,733 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=26 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:23:56,733 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 13:23:56,733 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/world semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 13:23:56,733 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.11ms fetch=0.05ms score=0.07ms total=0.24ms seeds=1 query_len=26 keyphrases=0 shortlisted=2 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 3, 'seed_link_added': 1, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 13:23:56,734 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=False
2026-02-08 13:23:56,734 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=43 results=2 elapsed=0.00ms
2026-02-08 13:23:56,734 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 13:23:56,734 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/europe text_len=80 title_len=6 elapsed=0.00ms source_type=search
2026-02-08 13:23:56,734 - asky.research.source_shortlist - DEBUG - source_shortlist fetch canonical dedupe skip url=https://example.com/europe canonical=https://example.com/europe
2026-02-08 13:23:56,734 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=1 max_fetch=15
2026-02-08 13:23:56,734 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=43 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:23:56,734 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/europe semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 13:23:56,734 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.07ms fetch=0.05ms score=0.04ms total=0.17ms seeds=0 query_len=43 keyphrases=0 shortlisted=1 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 1, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 13:23:56,735 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 13:23:56,735 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:23:56,735 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 13:23:56,735 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=54 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 13:23:56,735 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 13:23:56,735 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=27 docs=1
2026-02-08 13:23:56,735 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.0000 final=0.0000
2026-02-08 13:23:56,735 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.05ms fetch=0.03ms score=0.04ms total=0.13ms seeds=1 query_len=27 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 13:23:56,737 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 13:23:56,737 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:23:56,737 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 13:23:56,737 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 13:23:56,737 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 13:23:56,737 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=31 docs=1
2026-02-08 13:23:56,737 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 13:23:56,737 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.13ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 13:23:56,741 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:56,749 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 13:23:56,753 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:23:56,776 - asky.summarization - DEBUG - summarization hierarchical start input_len=5196 chunks=6 target_chunk=180
2026-02-08 13:23:56,776 - asky.summarization - DEBUG - summarization hierarchical complete chunks=6 rounds=3 elapsed=0.09ms
2026-02-08 13:27:25,146 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:25,148 - asky.research.source_shortlist - DEBUG - source_shortlist disabled for mode=standard in 0.00ms
2026-02-08 13:27:25,148 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.07ms
2026-02-08 13:27:25,155 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.00ms
2026-02-08 13:27:25,177 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 13:27:25,178 - asky.core.api_client - INFO - Sending request to LLM: test-model
2026-02-08 13:27:25,178 - asky.core.api_client - DEBUG - Payload: {"model": "test-model", "messages": [{"role": "user", "content": "test"}], "tools": [], "tool_choice": "auto"}
2026-02-08 13:27:25,178 - asky.core.api_client - INFO - [test] Sent: 1 tokens
2026-02-08 13:27:25,178 - asky.core.engine - ERROR - API Error 400: 400 Client Error: Bad Request
2026-02-08 13:27:25,178 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:27:25,179 - asky.core.engine - INFO - Context threshold reached (628/500). Compacting...
2026-02-08 13:27:25,180 - asky.core.engine - INFO - Compaction failed to preserve history. Returning minimal context: 625 tokens.
2026-02-08 13:27:25,181 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 13:27:25,181 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:27:25,183 - asky.core.engine - INFO - Context threshold reached (520/100). Compacting...
2026-02-08 13:27:25,183 - asky.core.engine - DEBUG - [Smart Compaction] Found summary for URL https://example.com/long-article (dict). Replacing content.
2026-02-08 13:27:25,183 - asky.core.engine - INFO - Smart compaction successful. Reduced from 520 to 42
2026-02-08 13:27:25,185 - asky.tools - INFO - Executing custom tool command: ls "."
2026-02-08 13:27:25,186 - asky.tools - INFO - Executing custom tool command: ls "/tmp/test"
2026-02-08 13:27:25,189 - asky.tools - INFO - Executing custom tool command: echo "hello world"
2026-02-08 13:27:25,190 - asky.tools - INFO - Executing custom tool command: echo "already quoted"
2026-02-08 13:27:25,192 - asky.tools - INFO - Executing custom tool command: echo "test"
2026-02-08 13:27:25,201 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 13:27:25,202 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 13:27:25,202 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 13:27:25,202 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 13:27:25,203 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:27:25,203 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 13:27:25,204 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 13:27:25,204 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 13:27:25,204 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 13:27:25,204 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:27:25,204 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 13:27:25,206 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 13:27:25,206 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 13:27:25,206 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 13:27:25,206 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 13:27:25,206 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:27:25,206 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 13:27:25,206 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 13:27:25,206 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 13:27:25,206 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 13:27:25,206 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:27:25,206 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 13:27:25,208 - asky.email_sender - ERROR - SMTP credentials not configured. Please set ASKY_SMTP_USER and ASKY_SMTP_PASSWORD.
2026-02-08 13:27:25,209 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 13:27:25,209 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 13:27:25,209 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 13:27:25,209 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 13:27:25,209 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:27:25,209 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 13:27:25,209 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 13:27:25,209 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 13:27:25,209 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 13:27:25,209 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:27:25,209 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 13:27:25,209 - asky.email_sender - ERROR - Failed to send email: Auth failed
2026-02-08 13:27:25,231 - asky.rendering - WARNING - Template not found at <MagicMock name='TEMPLATE_PATH' id='5143826112'>
2026-02-08 13:27:25,234 - asky.rendering - DEBUG - Extracted title for filename: Test Content
2026-02-08 13:27:25,258 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 13:27:25,258 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [{"role": "user", "content": "Hi"}], "tools": null, "tool_choice": "auto"}
2026-02-08 13:27:25,258 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 13:27:25,259 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 13:27:25,260 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 13:27:25,260 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 13:27:25,260 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 13:27:25,260 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 1 seconds...
2026-02-08 13:27:25,260 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 13:27:25,263 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 13:27:25,263 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 13:27:25,263 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 13:27:25,263 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 5 seconds...
2026-02-08 13:27:25,263 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 13:27:25,264 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 13:27:25,264 - asky.core.engine - DEBUG - Tool call [71 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 13:27:25,264 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 13:27:25,264 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 13:27:25,266 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:27:25,267 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 13:27:25,267 - asky.core.engine - DEBUG - Tool call [82 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{"q": "test"}'}}
2026-02-08 13:27:25,267 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 13:27:25,268 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 13:27:25,268 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:27:25,271 - asky.rendering - INFO - [Opening browser: /path/to/archive/file.html]
2026-02-08 13:27:25,272 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 13:27:25,272 - asky.core.engine - DEBUG - Tool call [93 chrs]: {'id': 'call_123', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 13:27:25,272 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 13:27:25,273 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 13:27:25,273 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:27:25,274 - asky.core.engine - INFO - Starting turn 1/2
2026-02-08 13:27:25,274 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 13:27:25,274 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 13:27:25,274 - asky.core.engine - INFO - Starting turn 2/2
2026-02-08 13:27:25,274 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_2', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 13:27:25,274 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 13:27:25,274 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 13:27:25,274 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:27:25,275 - asky.core.engine - INFO - Starting turn 1/1
2026-02-08 13:27:25,275 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 13:27:25,275 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 13:27:25,275 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 13:27:25,275 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:27:25,277 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 13:27:25,277 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [{"role": "user", "content": "Hi"}], "temperature": 0.5, "top_p": 0.9, "tools": null, "tool_choice": "auto"}
2026-02-08 13:27:25,277 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 13:27:25,277 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 13:27:25,278 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 13:27:25,278 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [], "temperature": 0.7, "tools": null, "tool_choice": "auto"}
2026-02-08 13:27:25,278 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 13:27:25,278 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 13:27:25,303 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 13:27:25,304 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 13:27:25,307 - asky.push_data - ERROR - Failed to push data to 'test_endpoint': Network error
2026-02-08 13:27:25,308 - asky.push_data - ERROR - Failed to build payload for endpoint 'test_endpoint': Missing required parameter: title
2026-02-08 13:27:25,310 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 13:27:25,324 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:25,330 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:25,331 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:27:25,335 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:25,335 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:27:25,710 - chromadb.config - DEBUG - Starting component System
2026-02-08 13:27:25,710 - chromadb.config - DEBUG - Starting component Posthog
2026-02-08 13:27:25,752 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:27:25,756 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:25,757 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 13:27:25,759 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 13:27:25,764 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:25,765 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 13:27:25,766 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 13:27:25,770 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:25,774 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:25,779 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:25,779 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:27:25,783 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:25,784 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:27:25,788 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:25,788 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:27:25,793 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:25,794 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 13:27:25,797 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:25,798 - asky.research.cache - DEBUG - Cached URL http://example1.com with id=1
2026-02-08 13:27:25,799 - asky.research.cache - DEBUG - Cached URL http://example2.com with id=2
2026-02-08 13:27:25,802 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:25,803 - asky.research.cache - DEBUG - Scheduled background summarization for http://example.com
2026-02-08 13:27:25,803 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:27:25,804 - asky.research.cache - DEBUG - Background summarization completed for http://example.com
2026-02-08 13:27:26,311 - asky.research.cache - DEBUG - Shutting down research cache executor...
2026-02-08 13:27:26,312 - asky.research.cache - DEBUG - Research cache executor shutdown complete
2026-02-08 13:27:26,326 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:26,335 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:26,342 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:26,348 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:26,354 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:26,355 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:27:26,360 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:26,361 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:27:26,366 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:26,371 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:26,376 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:26,377 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:27:26,377 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 13:27:26,378 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 13:27:26,382 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:26,383 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:27:26,383 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 13:27:26,384 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 13:27:26,384 - asky.research.cache - DEBUG - Saved finding id=4
2026-02-08 13:27:26,385 - asky.research.cache - DEBUG - Saved finding id=5
2026-02-08 13:27:26,385 - asky.research.cache - DEBUG - Saved finding id=6
2026-02-08 13:27:26,385 - asky.research.cache - DEBUG - Saved finding id=7
2026-02-08 13:27:26,386 - asky.research.cache - DEBUG - Saved finding id=8
2026-02-08 13:27:26,386 - asky.research.cache - DEBUG - Saved finding id=9
2026-02-08 13:27:26,387 - asky.research.cache - DEBUG - Saved finding id=10
2026-02-08 13:27:26,391 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:26,391 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:27:26,392 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 13:27:26,393 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 13:27:26,397 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:26,398 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:27:26,399 - asky.research.cache - DEBUG - Deleted finding id=1
2026-02-08 13:27:26,404 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:26,408 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:26,408 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:27:26,412 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:26,413 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:27:26,414 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 13:27:26,417 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:26,418 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:27:26,421 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:26,422 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:27:26,451 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:27:26,452 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:27:26,452 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:27:26,453 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:27:26,453 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:27:26,454 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:27:26,454 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:27:26,455 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:27:26,455 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:27:26,456 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:27:26,456 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:27:26,457 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:27:26,457 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:27:26,458 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:27:26,459 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:27:26,459 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:27:26,460 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 13:27:26,460 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 13:27:26,460 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 13:27:26,460 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 13:27:26,460 - asky.research.embeddings - INFO - Loaded fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' successfully. Update research.embedding.model to avoid repeated primary model load failures.
2026-02-08 13:27:26,461 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 13:27:26,461 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 13:27:26,461 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 13:27:26,461 - asky.research.embeddings - DEBUG - Embedding model 'sentence-transformers/all-MiniLM-L6-v2' not available locally, attempting remote load.
2026-02-08 13:27:26,461 - asky.research.embeddings - ERROR - Failed to load sentence-transformer model 'bad/model': cannot load bad/model
2026-02-08 13:27:26,461 - asky.research.embeddings - ERROR - Fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' also failed: cannot load sentence-transformers/all-MiniLM-L6-v2
2026-02-08 13:27:26,462 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=cached/model, device=cpu
2026-02-08 13:27:26,462 - asky.research.embeddings - DEBUG - Loaded embedding model 'cached/model' from local Hugging Face cache.
2026-02-08 13:27:26,463 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=trunc/model, device=cpu
2026-02-08 13:27:26,463 - asky.research.embeddings - DEBUG - Loaded embedding model 'trunc/model' from local Hugging Face cache.
2026-02-08 13:27:26,467 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 13:27:26,471 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 13:27:26,471 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 13:27:26,474 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 13:27:26,475 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 13:27:26,476 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 13:27:26,477 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 13:27:26,479 - asky.research.tools - DEBUG - Cache hit for http://b.com
2026-02-08 13:27:26,480 - asky.research.tools - DEBUG - Cache hit for http://a.com
2026-02-08 13:27:26,481 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 13:27:26,484 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 13:27:26,496 - asky.research.tools - DEBUG - Generating chunk embeddings for http://example.com
2026-02-08 13:27:26,497 - asky.research.tools - ERROR - RAG retrieval failed for http://example.com: DB error
2026-02-08 13:27:26,506 - asky.research.tools - WARNING - Finding embedding failed (will still be saved): Embedding API unavailable
2026-02-08 13:27:26,511 - asky.research.tools - WARNING - Semantic search unavailable: API unavailable
2026-02-08 13:27:26,530 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:27:26,544 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 13:27:26,555 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:27:26,556 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 13:27:26,568 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 13:27:26,568 - asky.research.vector_store - WARNING - Chroma link query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 13:27:26,582 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:27:26,593 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 13:27:26,596 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:27:26,605 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:27:26,605 - asky.research.vector_store - WARNING - Chroma hybrid query failed; using SQLite dense scores: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 13:27:26,614 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:27:26,618 - asky.research.vector_store - WARNING - Embedding count mismatch: 2 vs 3
2026-02-08 13:27:26,619 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 13:27:26,626 - asky.research.vector_store - DEBUG - Stored 5 chunk embeddings for cache_id=1
2026-02-08 13:27:26,626 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 13:27:26,638 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 13:27:26,654 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 13:27:26,660 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 13:27:26,677 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 13:27:26,684 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 13:27:26,694 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 13:27:26,704 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 13:27:26,727 - asky.core.session_manager - INFO - Session 1 reached threshold (10/5). Compacting...
2026-02-08 13:27:26,727 - asky.core.session_manager - INFO - Found 1 messages to compact for session 1
2026-02-08 13:27:26,727 - asky.core.session_manager - INFO - Compacted content length: 9 chars
2026-02-08 13:27:26,727 - asky.core.session_manager - INFO - Compaction saved for session 1
2026-02-08 13:27:26,738 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=True
2026-02-08 13:27:26,738 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=46 results=2 elapsed=0.00ms
2026-02-08 13:27:26,738 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 13:27:26,738 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://docs.example.com/ai-safety text_len=47 title_len=19 elapsed=0.00ms source_type=search
2026-02-08 13:27:26,738 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://blog.example.com/plants text_len=52 title_len=13 elapsed=0.00ms source_type=search
2026-02-08 13:27:26,738 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 13:27:26,738 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=46 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:27:26,738 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://docs.example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 13:27:26,738 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://blog.example.com/plants semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 13:27:26,738 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.13ms fetch=0.07ms score=0.08ms total=0.29ms seeds=0 query_len=46 keyphrases=0 shortlisted=2 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 13:27:26,739 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 13:27:26,739 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:27:26,739 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 13:27:26,739 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 13:27:26,739 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 13:27:26,739 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:27:26,739 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 13:27:26,739 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.08ms fetch=0.04ms score=0.06ms total=0.19ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 13:27:26,740 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=2 selected=2 added=2 elapsed=0.03ms warning=None
2026-02-08 13:27:26,740 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=2 elapsed=0.06ms max_pages=1 per_page=10
2026-02-08 13:27:26,740 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:27:26,740 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=3 deduped=3 max_candidates=30
2026-02-08 13:27:26,740 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=50 title_len=9 elapsed=0.00ms source_type=seed
2026-02-08 13:27:26,740 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/ai-safety text_len=51 title_len=15 elapsed=0.00ms source_type=seed_link
2026-02-08 13:27:26,740 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/garden text_len=51 title_len=11 elapsed=0.00ms source_type=seed_link
2026-02-08 13:27:26,740 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=3 attempted=3 extracted=3 max_fetch=15
2026-02-08 13:27:26,740 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=39 docs=3 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:27:26,740 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 13:27:26,740 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 13:27:26,741 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/garden semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 13:27:26,741 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.13ms fetch=0.07ms score=0.09ms total=0.30ms seeds=1 query_len=39 keyphrases=0 shortlisted=3 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 3, 'candidate_deduped': 3, 'fetch_calls': 3, 'fetch_success': 3, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 2, 'seed_link_added': 2, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 3} warnings=0
2026-02-08 13:27:26,741 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 13:27:26,742 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:27:26,742 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 13:27:26,742 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 13:27:26,742 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 13:27:26,742 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:27:26,742 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 13:27:26,742 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.07ms fetch=0.04ms score=0.05ms total=0.16ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 13:27:26,743 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=3 selected=3 added=1 elapsed=0.03ms warning=None
2026-02-08 13:27:26,743 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=1 elapsed=0.07ms max_pages=1 per_page=10
2026-02-08 13:27:26,743 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:27:26,743 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=2 deduped=2 max_candidates=30
2026-02-08 13:27:26,743 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=57 title_len=5 elapsed=0.00ms source_type=seed
2026-02-08 13:27:26,743 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/world text_len=63 title_len=5 elapsed=0.00ms source_type=seed_link
2026-02-08 13:27:26,743 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 13:27:26,743 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=26 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:27:26,743 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 13:27:26,743 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/world semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 13:27:26,743 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.14ms fetch=0.05ms score=0.07ms total=0.28ms seeds=1 query_len=26 keyphrases=0 shortlisted=2 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 3, 'seed_link_added': 1, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 13:27:26,744 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=False
2026-02-08 13:27:26,744 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=43 results=2 elapsed=0.00ms
2026-02-08 13:27:26,744 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 13:27:26,744 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/europe text_len=80 title_len=6 elapsed=0.00ms source_type=search
2026-02-08 13:27:26,744 - asky.research.source_shortlist - DEBUG - source_shortlist fetch canonical dedupe skip url=https://example.com/europe canonical=https://example.com/europe
2026-02-08 13:27:26,744 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=1 max_fetch=15
2026-02-08 13:27:26,744 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=43 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:27:26,744 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/europe semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 13:27:26,744 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.08ms fetch=0.06ms score=0.04ms total=0.19ms seeds=0 query_len=43 keyphrases=0 shortlisted=1 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 1, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 13:27:26,745 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 13:27:26,745 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:27:26,745 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 13:27:26,745 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=54 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 13:27:26,745 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 13:27:26,745 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=27 docs=1
2026-02-08 13:27:26,745 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.0000 final=0.0000
2026-02-08 13:27:26,745 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.15ms seeds=1 query_len=27 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 13:27:26,747 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 13:27:26,747 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:27:26,747 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 13:27:26,747 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 13:27:26,747 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 13:27:26,747 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=31 docs=1
2026-02-08 13:27:26,747 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 13:27:26,747 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.07ms fetch=0.04ms score=0.04ms total=0.17ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 13:27:26,752 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:26,760 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 13:27:26,765 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:27:28,294 - asky.summarization - DEBUG - summarization hierarchical start input_len=5196 chunks=6 target_chunk=180
2026-02-08 13:27:28,294 - asky.summarization - DEBUG - summarization hierarchical complete chunks=6 rounds=3 elapsed=0.18ms
2026-02-08 13:28:22,702 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:22,704 - asky.research.source_shortlist - DEBUG - source_shortlist disabled for mode=standard in 0.00ms
2026-02-08 13:28:22,704 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.05ms
2026-02-08 13:28:22,711 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.00ms
2026-02-08 13:28:22,729 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 13:28:22,729 - asky.core.api_client - INFO - Sending request to LLM: test-model
2026-02-08 13:28:22,729 - asky.core.api_client - DEBUG - Payload: {"model": "test-model", "messages": [{"role": "user", "content": "test"}], "tools": [], "tool_choice": "auto"}
2026-02-08 13:28:22,729 - asky.core.api_client - INFO - [test] Sent: 1 tokens
2026-02-08 13:28:22,729 - asky.core.engine - ERROR - API Error 400: 400 Client Error: Bad Request
2026-02-08 13:28:22,729 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:28:22,730 - asky.core.engine - INFO - Context threshold reached (628/500). Compacting...
2026-02-08 13:28:22,730 - asky.core.engine - INFO - Compaction failed to preserve history. Returning minimal context: 625 tokens.
2026-02-08 13:28:22,731 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 13:28:22,732 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:28:22,732 - asky.core.engine - INFO - Context threshold reached (520/100). Compacting...
2026-02-08 13:28:22,733 - asky.core.engine - DEBUG - [Smart Compaction] Found summary for URL https://example.com/long-article (dict). Replacing content.
2026-02-08 13:28:22,733 - asky.core.engine - INFO - Smart compaction successful. Reduced from 520 to 42
2026-02-08 13:28:22,734 - asky.tools - INFO - Executing custom tool command: ls "."
2026-02-08 13:28:22,735 - asky.tools - INFO - Executing custom tool command: ls "/tmp/test"
2026-02-08 13:28:22,736 - asky.tools - INFO - Executing custom tool command: echo "hello world"
2026-02-08 13:28:22,737 - asky.tools - INFO - Executing custom tool command: echo "already quoted"
2026-02-08 13:28:22,738 - asky.tools - INFO - Executing custom tool command: echo "test"
2026-02-08 13:28:22,747 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 13:28:22,747 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 13:28:22,747 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 13:28:22,747 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 13:28:22,748 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:28:22,748 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 13:28:22,749 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 13:28:22,749 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 13:28:22,749 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 13:28:22,749 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:28:22,749 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 13:28:22,751 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 13:28:22,751 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 13:28:22,751 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 13:28:22,751 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 13:28:22,751 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:28:22,751 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 13:28:22,751 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 13:28:22,751 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 13:28:22,751 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 13:28:22,751 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:28:22,751 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 13:28:22,752 - asky.email_sender - ERROR - SMTP credentials not configured. Please set ASKY_SMTP_USER and ASKY_SMTP_PASSWORD.
2026-02-08 13:28:22,753 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 13:28:22,753 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 13:28:22,753 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 13:28:22,753 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 13:28:22,753 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:28:22,753 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 13:28:22,753 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 13:28:22,753 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 13:28:22,753 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 13:28:22,753 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:28:22,753 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 13:28:22,754 - asky.email_sender - ERROR - Failed to send email: Auth failed
2026-02-08 13:28:22,772 - asky.rendering - WARNING - Template not found at <MagicMock name='TEMPLATE_PATH' id='4641573920'>
2026-02-08 13:28:22,775 - asky.rendering - DEBUG - Extracted title for filename: Test Content
2026-02-08 13:28:22,800 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 13:28:22,800 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [{"role": "user", "content": "Hi"}], "tools": null, "tool_choice": "auto"}
2026-02-08 13:28:22,800 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 13:28:22,800 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 13:28:22,801 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 13:28:22,801 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 13:28:22,801 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 13:28:22,801 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 1 seconds...
2026-02-08 13:28:22,802 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 13:28:22,803 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 13:28:22,803 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 13:28:22,803 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 13:28:22,803 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 5 seconds...
2026-02-08 13:28:22,803 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 13:28:22,804 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 13:28:22,804 - asky.core.engine - DEBUG - Tool call [71 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 13:28:22,804 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 13:28:22,804 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 13:28:22,804 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:28:22,805 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 13:28:22,805 - asky.core.engine - DEBUG - Tool call [82 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{"q": "test"}'}}
2026-02-08 13:28:22,805 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 13:28:22,805 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 13:28:22,805 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:28:22,808 - asky.rendering - INFO - [Opening browser: /path/to/archive/file.html]
2026-02-08 13:28:22,809 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 13:28:22,809 - asky.core.engine - DEBUG - Tool call [93 chrs]: {'id': 'call_123', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 13:28:22,809 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 13:28:22,809 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 13:28:22,809 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:28:22,810 - asky.core.engine - INFO - Starting turn 1/2
2026-02-08 13:28:22,811 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 13:28:22,811 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 13:28:22,811 - asky.core.engine - INFO - Starting turn 2/2
2026-02-08 13:28:22,811 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_2', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 13:28:22,811 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 13:28:22,811 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 13:28:22,811 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:28:22,812 - asky.core.engine - INFO - Starting turn 1/1
2026-02-08 13:28:22,812 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 13:28:22,812 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 13:28:22,812 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 13:28:22,812 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:28:22,814 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 13:28:22,814 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [{"role": "user", "content": "Hi"}], "temperature": 0.5, "top_p": 0.9, "tools": null, "tool_choice": "auto"}
2026-02-08 13:28:22,814 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 13:28:22,814 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 13:28:22,815 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 13:28:22,815 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [], "temperature": 0.7, "tools": null, "tool_choice": "auto"}
2026-02-08 13:28:22,815 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 13:28:22,816 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 13:28:22,839 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 13:28:22,840 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 13:28:22,844 - asky.push_data - ERROR - Failed to push data to 'test_endpoint': Network error
2026-02-08 13:28:22,845 - asky.push_data - ERROR - Failed to build payload for endpoint 'test_endpoint': Missing required parameter: title
2026-02-08 13:28:22,847 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 13:28:22,861 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:22,865 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:22,866 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:28:22,871 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:22,872 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:28:23,213 - chromadb.config - DEBUG - Starting component System
2026-02-08 13:28:23,213 - chromadb.config - DEBUG - Starting component Posthog
2026-02-08 13:28:23,270 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:28:23,274 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:23,275 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 13:28:23,276 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 13:28:23,280 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:23,281 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 13:28:23,282 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 13:28:23,285 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:23,289 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:23,294 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:23,294 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:28:23,298 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:23,299 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:28:23,303 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:23,303 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:28:23,307 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:23,309 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 13:28:23,312 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:23,313 - asky.research.cache - DEBUG - Cached URL http://example1.com with id=1
2026-02-08 13:28:23,313 - asky.research.cache - DEBUG - Cached URL http://example2.com with id=2
2026-02-08 13:28:23,316 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:23,317 - asky.research.cache - DEBUG - Scheduled background summarization for http://example.com
2026-02-08 13:28:23,317 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:28:23,318 - asky.research.cache - DEBUG - Background summarization completed for http://example.com
2026-02-08 13:28:23,824 - asky.research.cache - DEBUG - Shutting down research cache executor...
2026-02-08 13:28:23,825 - asky.research.cache - DEBUG - Research cache executor shutdown complete
2026-02-08 13:28:23,838 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:23,846 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:23,850 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:23,855 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:23,859 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:23,860 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:28:23,864 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:23,865 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:28:23,869 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:23,873 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:23,878 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:23,879 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:28:23,879 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 13:28:23,880 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 13:28:23,884 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:23,885 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:28:23,886 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 13:28:23,886 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 13:28:23,886 - asky.research.cache - DEBUG - Saved finding id=4
2026-02-08 13:28:23,887 - asky.research.cache - DEBUG - Saved finding id=5
2026-02-08 13:28:23,887 - asky.research.cache - DEBUG - Saved finding id=6
2026-02-08 13:28:23,888 - asky.research.cache - DEBUG - Saved finding id=7
2026-02-08 13:28:23,888 - asky.research.cache - DEBUG - Saved finding id=8
2026-02-08 13:28:23,889 - asky.research.cache - DEBUG - Saved finding id=9
2026-02-08 13:28:23,889 - asky.research.cache - DEBUG - Saved finding id=10
2026-02-08 13:28:23,893 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:23,894 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:28:23,894 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 13:28:23,895 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 13:28:23,898 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:23,899 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:28:23,899 - asky.research.cache - DEBUG - Deleted finding id=1
2026-02-08 13:28:23,903 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:23,907 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:23,907 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:28:23,912 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:23,912 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:28:23,913 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 13:28:23,917 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:23,917 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:28:23,921 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:23,921 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:28:23,945 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:28:23,946 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:28:23,946 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:28:23,947 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:28:23,947 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:28:23,948 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:28:23,948 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:28:23,949 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:28:23,950 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:28:23,950 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:28:23,951 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:28:23,951 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:28:23,952 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:28:23,952 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:28:23,953 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:28:23,953 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:28:23,954 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 13:28:23,954 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 13:28:23,954 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 13:28:23,954 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 13:28:23,954 - asky.research.embeddings - INFO - Loaded fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' successfully. Update research.embedding.model to avoid repeated primary model load failures.
2026-02-08 13:28:23,955 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 13:28:23,955 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 13:28:23,955 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 13:28:23,955 - asky.research.embeddings - DEBUG - Embedding model 'sentence-transformers/all-MiniLM-L6-v2' not available locally, attempting remote load.
2026-02-08 13:28:23,955 - asky.research.embeddings - ERROR - Failed to load sentence-transformer model 'bad/model': cannot load bad/model
2026-02-08 13:28:23,955 - asky.research.embeddings - ERROR - Fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' also failed: cannot load sentence-transformers/all-MiniLM-L6-v2
2026-02-08 13:28:23,956 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=cached/model, device=cpu
2026-02-08 13:28:23,956 - asky.research.embeddings - DEBUG - Loaded embedding model 'cached/model' from local Hugging Face cache.
2026-02-08 13:28:23,957 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=trunc/model, device=cpu
2026-02-08 13:28:23,957 - asky.research.embeddings - DEBUG - Loaded embedding model 'trunc/model' from local Hugging Face cache.
2026-02-08 13:28:23,961 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 13:28:23,966 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 13:28:23,966 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 13:28:23,968 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 13:28:23,969 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 13:28:23,970 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 13:28:23,971 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 13:28:23,973 - asky.research.tools - DEBUG - Cache hit for http://b.com
2026-02-08 13:28:23,973 - asky.research.tools - DEBUG - Cache hit for http://a.com
2026-02-08 13:28:23,975 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 13:28:23,978 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 13:28:23,988 - asky.research.tools - DEBUG - Generating chunk embeddings for http://example.com
2026-02-08 13:28:23,989 - asky.research.tools - ERROR - RAG retrieval failed for http://example.com: DB error
2026-02-08 13:28:23,998 - asky.research.tools - WARNING - Finding embedding failed (will still be saved): Embedding API unavailable
2026-02-08 13:28:24,002 - asky.research.tools - WARNING - Semantic search unavailable: API unavailable
2026-02-08 13:28:24,023 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:28:24,035 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 13:28:24,044 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:28:24,045 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 13:28:24,055 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 13:28:24,056 - asky.research.vector_store - WARNING - Chroma link query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 13:28:24,069 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:28:24,081 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 13:28:24,085 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:28:24,094 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:28:24,095 - asky.research.vector_store - WARNING - Chroma hybrid query failed; using SQLite dense scores: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 13:28:24,103 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:28:24,106 - asky.research.vector_store - WARNING - Embedding count mismatch: 2 vs 3
2026-02-08 13:28:24,107 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 13:28:24,116 - asky.research.vector_store - DEBUG - Stored 5 chunk embeddings for cache_id=1
2026-02-08 13:28:24,116 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 13:28:24,126 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 13:28:24,139 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 13:28:24,142 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 13:28:24,152 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 13:28:24,155 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 13:28:24,161 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 13:28:24,164 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 13:28:24,186 - asky.core.session_manager - INFO - Session 1 reached threshold (10/5). Compacting...
2026-02-08 13:28:24,186 - asky.core.session_manager - INFO - Found 1 messages to compact for session 1
2026-02-08 13:28:24,186 - asky.core.session_manager - INFO - Compacted content length: 9 chars
2026-02-08 13:28:24,186 - asky.core.session_manager - INFO - Compaction saved for session 1
2026-02-08 13:28:24,197 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=True
2026-02-08 13:28:24,197 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=46 results=2 elapsed=0.00ms
2026-02-08 13:28:24,197 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 13:28:24,197 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://docs.example.com/ai-safety text_len=47 title_len=19 elapsed=0.00ms source_type=search
2026-02-08 13:28:24,197 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://blog.example.com/plants text_len=52 title_len=13 elapsed=0.00ms source_type=search
2026-02-08 13:28:24,197 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 13:28:24,197 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=46 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:28:24,197 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://docs.example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 13:28:24,197 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://blog.example.com/plants semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 13:28:24,197 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.15ms fetch=0.07ms score=0.08ms total=0.32ms seeds=0 query_len=46 keyphrases=0 shortlisted=2 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 13:28:24,198 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 13:28:24,198 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:28:24,198 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 13:28:24,198 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 13:28:24,198 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 13:28:24,198 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:28:24,198 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 13:28:24,198 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.07ms fetch=0.04ms score=0.05ms total=0.18ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 13:28:24,199 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=2 selected=2 added=2 elapsed=0.03ms warning=None
2026-02-08 13:28:24,199 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=2 elapsed=0.06ms max_pages=1 per_page=10
2026-02-08 13:28:24,200 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:28:24,200 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=3 deduped=3 max_candidates=30
2026-02-08 13:28:24,200 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=50 title_len=9 elapsed=0.00ms source_type=seed
2026-02-08 13:28:24,200 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/ai-safety text_len=51 title_len=15 elapsed=0.00ms source_type=seed_link
2026-02-08 13:28:24,200 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/garden text_len=51 title_len=11 elapsed=0.00ms source_type=seed_link
2026-02-08 13:28:24,200 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=3 attempted=3 extracted=3 max_fetch=15
2026-02-08 13:28:24,200 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=39 docs=3 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:28:24,200 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 13:28:24,200 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 13:28:24,200 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/garden semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 13:28:24,200 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.13ms fetch=0.07ms score=0.10ms total=0.30ms seeds=1 query_len=39 keyphrases=0 shortlisted=3 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 3, 'candidate_deduped': 3, 'fetch_calls': 3, 'fetch_success': 3, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 2, 'seed_link_added': 2, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 3} warnings=0
2026-02-08 13:28:24,201 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 13:28:24,201 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:28:24,201 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 13:28:24,201 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 13:28:24,201 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 13:28:24,201 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:28:24,201 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 13:28:24,201 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.05ms total=0.15ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 13:28:24,202 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=3 selected=3 added=1 elapsed=0.03ms warning=None
2026-02-08 13:28:24,202 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=1 elapsed=0.05ms max_pages=1 per_page=10
2026-02-08 13:28:24,202 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:28:24,202 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=2 deduped=2 max_candidates=30
2026-02-08 13:28:24,202 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=57 title_len=5 elapsed=0.00ms source_type=seed
2026-02-08 13:28:24,202 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/world text_len=63 title_len=5 elapsed=0.00ms source_type=seed_link
2026-02-08 13:28:24,202 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 13:28:24,202 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=26 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:28:24,202 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 13:28:24,202 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/world semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 13:28:24,202 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.11ms fetch=0.05ms score=0.07ms total=0.23ms seeds=1 query_len=26 keyphrases=0 shortlisted=2 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 3, 'seed_link_added': 1, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 13:28:24,203 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=False
2026-02-08 13:28:24,203 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=43 results=2 elapsed=0.00ms
2026-02-08 13:28:24,203 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 13:28:24,203 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/europe text_len=80 title_len=6 elapsed=0.00ms source_type=search
2026-02-08 13:28:24,203 - asky.research.source_shortlist - DEBUG - source_shortlist fetch canonical dedupe skip url=https://example.com/europe canonical=https://example.com/europe
2026-02-08 13:28:24,203 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=1 max_fetch=15
2026-02-08 13:28:24,203 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=43 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:28:24,203 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/europe semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 13:28:24,203 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.08ms fetch=0.06ms score=0.04ms total=0.19ms seeds=0 query_len=43 keyphrases=0 shortlisted=1 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 1, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 13:28:24,204 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 13:28:24,204 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:28:24,204 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 13:28:24,204 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=54 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 13:28:24,204 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 13:28:24,204 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=27 docs=1
2026-02-08 13:28:24,204 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.0000 final=0.0000
2026-02-08 13:28:24,204 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.14ms seeds=1 query_len=27 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 13:28:24,206 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 13:28:24,206 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:28:24,206 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 13:28:24,206 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 13:28:24,206 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 13:28:24,206 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=31 docs=1
2026-02-08 13:28:24,206 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 13:28:24,206 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.04ms score=0.04ms total=0.15ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 13:28:24,210 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:24,218 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 13:28:24,223 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:28:25,791 - asky.summarization - DEBUG - summarization hierarchical start input_len=5196 chunks=6 target_chunk=180
2026-02-08 13:28:25,791 - asky.summarization - DEBUG - summarization hierarchical complete chunks=6 rounds=3 elapsed=0.21ms
2026-02-08 13:34:33,426 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:33,428 - asky.research.source_shortlist - DEBUG - source_shortlist disabled for mode=standard in 0.00ms
2026-02-08 13:34:33,428 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.04ms
2026-02-08 13:34:33,433 - asky.cli.chat - DEBUG - chat shortlist mode=standard enabled=False elapsed=0.00ms
2026-02-08 13:34:33,451 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 13:34:33,451 - asky.core.api_client - INFO - Sending request to LLM: test-model
2026-02-08 13:34:33,451 - asky.core.api_client - DEBUG - Payload: {"model": "test-model", "messages": [{"role": "user", "content": "test"}], "tools": [], "tool_choice": "auto"}
2026-02-08 13:34:33,451 - asky.core.api_client - INFO - [test] Sent: 1 tokens
2026-02-08 13:34:33,451 - asky.core.engine - ERROR - API Error 400: 400 Client Error: Bad Request
2026-02-08 13:34:33,452 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:34:33,452 - asky.core.engine - INFO - Context threshold reached (628/500). Compacting...
2026-02-08 13:34:33,453 - asky.core.engine - INFO - Compaction failed to preserve history. Returning minimal context: 625 tokens.
2026-02-08 13:34:33,453 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 13:34:33,454 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:34:33,455 - asky.core.engine - INFO - Context threshold reached (520/100). Compacting...
2026-02-08 13:34:33,455 - asky.core.engine - DEBUG - [Smart Compaction] Found summary for URL https://example.com/long-article (dict). Replacing content.
2026-02-08 13:34:33,455 - asky.core.engine - INFO - Smart compaction successful. Reduced from 520 to 42
2026-02-08 13:34:33,456 - asky.tools - INFO - Executing custom tool command: ls "."
2026-02-08 13:34:33,457 - asky.tools - INFO - Executing custom tool command: ls "/tmp/test"
2026-02-08 13:34:33,458 - asky.tools - INFO - Executing custom tool command: echo "hello world"
2026-02-08 13:34:33,459 - asky.tools - INFO - Executing custom tool command: echo "already quoted"
2026-02-08 13:34:33,461 - asky.tools - INFO - Executing custom tool command: echo "test"
2026-02-08 13:34:33,468 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 13:34:33,468 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 13:34:33,468 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 13:34:33,468 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 13:34:33,469 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:34:33,469 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 13:34:33,470 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 13:34:33,470 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 13:34:33,470 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 13:34:33,470 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:34:33,470 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 13:34:33,472 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 13:34:33,472 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 13:34:33,472 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 13:34:33,472 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 13:34:33,472 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:34:33,472 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 13:34:33,472 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 13:34:33,472 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 13:34:33,472 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 13:34:33,472 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:34:33,472 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 13:34:33,473 - asky.email_sender - ERROR - SMTP credentials not configured. Please set ASKY_SMTP_USER and ASKY_SMTP_PASSWORD.
2026-02-08 13:34:33,474 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-08 13:34:33,474 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-08 13:34:33,474 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-08 13:34:33,474 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-08 13:34:33,474 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:34:33,474 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-08 13:34:33,474 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-08 13:34:33,474 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-08 13:34:33,474 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-08 13:34:33,474 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-08 13:34:33,474 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-08 13:34:33,475 - asky.email_sender - ERROR - Failed to send email: Auth failed
2026-02-08 13:34:33,493 - asky.rendering - WARNING - Template not found at <MagicMock name='TEMPLATE_PATH' id='4585279168'>
2026-02-08 13:34:33,496 - asky.rendering - DEBUG - Extracted title for filename: Test Content
2026-02-08 13:34:33,515 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 13:34:33,515 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [{"role": "user", "content": "Hi"}], "tools": null, "tool_choice": "auto"}
2026-02-08 13:34:33,515 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 13:34:33,515 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 13:34:33,516 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 13:34:33,516 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 13:34:33,516 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 13:34:33,516 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 1 seconds...
2026-02-08 13:34:33,517 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 13:34:33,518 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-08 13:34:33,518 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-08 13:34:33,518 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-08 13:34:33,518 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 5 seconds...
2026-02-08 13:34:33,518 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-08 13:34:33,519 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 13:34:33,519 - asky.core.engine - DEBUG - Tool call [71 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 13:34:33,519 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 13:34:33,519 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 13:34:33,519 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:34:33,520 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 13:34:33,520 - asky.core.engine - DEBUG - Tool call [82 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{"q": "test"}'}}
2026-02-08 13:34:33,520 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 13:34:33,520 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 13:34:33,520 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:34:33,523 - asky.rendering - INFO - [Opening browser: /path/to/archive/file.html]
2026-02-08 13:34:33,524 - asky.core.engine - INFO - Starting turn 1/15
2026-02-08 13:34:33,524 - asky.core.engine - DEBUG - Tool call [93 chrs]: {'id': 'call_123', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-08 13:34:33,524 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-08 13:34:33,524 - asky.core.engine - INFO - Starting turn 2/15
2026-02-08 13:34:33,524 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:34:33,525 - asky.core.engine - INFO - Starting turn 1/2
2026-02-08 13:34:33,525 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 13:34:33,525 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 13:34:33,525 - asky.core.engine - INFO - Starting turn 2/2
2026-02-08 13:34:33,525 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_2', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 13:34:33,525 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 13:34:33,525 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 13:34:33,525 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:34:33,526 - asky.core.engine - INFO - Starting turn 1/1
2026-02-08 13:34:33,526 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-08 13:34:33,526 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-08 13:34:33,526 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-08 13:34:33,526 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-08 13:34:33,528 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 13:34:33,528 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [{"role": "user", "content": "Hi"}], "temperature": 0.5, "top_p": 0.9, "tools": null, "tool_choice": "auto"}
2026-02-08 13:34:33,528 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 13:34:33,528 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 13:34:33,529 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-08 13:34:33,529 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [], "temperature": 0.7, "tools": null, "tool_choice": "auto"}
2026-02-08 13:34:33,529 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-08 13:34:33,529 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-08 13:34:33,552 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 13:34:33,553 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 13:34:33,556 - asky.push_data - ERROR - Failed to push data to 'test_endpoint': Network error
2026-02-08 13:34:33,557 - asky.push_data - ERROR - Failed to build payload for endpoint 'test_endpoint': Missing required parameter: title
2026-02-08 13:34:33,559 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-08 13:34:33,572 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:33,577 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:33,577 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:34:33,581 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:33,582 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:34:33,911 - chromadb.config - DEBUG - Starting component System
2026-02-08 13:34:33,911 - chromadb.config - DEBUG - Starting component Posthog
2026-02-08 13:34:33,966 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:34:33,970 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:33,970 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 13:34:33,972 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-08 13:34:33,976 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:33,976 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 13:34:33,977 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-08 13:34:33,981 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:33,984 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:33,988 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:33,989 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:34:33,993 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:33,993 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:34:33,997 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:33,998 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:34:34,001 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:34,002 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 13:34:34,005 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:34,006 - asky.research.cache - DEBUG - Cached URL http://example1.com with id=1
2026-02-08 13:34:34,006 - asky.research.cache - DEBUG - Cached URL http://example2.com with id=2
2026-02-08 13:34:34,010 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:34,010 - asky.research.cache - DEBUG - Scheduled background summarization for http://example.com
2026-02-08 13:34:34,010 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-08 13:34:34,011 - asky.research.cache - DEBUG - Background summarization completed for http://example.com
2026-02-08 13:34:34,518 - asky.research.cache - DEBUG - Shutting down research cache executor...
2026-02-08 13:34:34,519 - asky.research.cache - DEBUG - Research cache executor shutdown complete
2026-02-08 13:34:34,531 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:34,542 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:34,549 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:34,555 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:34,561 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:34,561 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:34:34,566 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:34,567 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:34:34,572 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:34,577 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:34,583 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:34,584 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:34:34,584 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 13:34:34,585 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 13:34:34,589 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:34,589 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:34:34,590 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 13:34:34,590 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 13:34:34,591 - asky.research.cache - DEBUG - Saved finding id=4
2026-02-08 13:34:34,591 - asky.research.cache - DEBUG - Saved finding id=5
2026-02-08 13:34:34,591 - asky.research.cache - DEBUG - Saved finding id=6
2026-02-08 13:34:34,592 - asky.research.cache - DEBUG - Saved finding id=7
2026-02-08 13:34:34,592 - asky.research.cache - DEBUG - Saved finding id=8
2026-02-08 13:34:34,593 - asky.research.cache - DEBUG - Saved finding id=9
2026-02-08 13:34:34,593 - asky.research.cache - DEBUG - Saved finding id=10
2026-02-08 13:34:34,597 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:34,598 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:34:34,598 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 13:34:34,599 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-08 13:34:34,603 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:34,603 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:34:34,604 - asky.research.cache - DEBUG - Deleted finding id=1
2026-02-08 13:34:34,608 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:34,612 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:34,612 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:34:34,616 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:34,617 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:34:34,617 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-08 13:34:34,621 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:34,621 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:34:34,625 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:34,625 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-08 13:34:34,649 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:34:34,649 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:34:34,650 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:34:34,650 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:34:34,650 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:34:34,651 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:34:34,651 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:34:34,652 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:34:34,653 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:34:34,653 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:34:34,654 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:34:34,654 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:34:34,654 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:34:34,655 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:34:34,656 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-08 13:34:34,656 - asky.research.embeddings - DEBUG - Loaded embedding model 'test-model' from local Hugging Face cache.
2026-02-08 13:34:34,657 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 13:34:34,657 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 13:34:34,657 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 13:34:34,657 - asky.research.embeddings - DEBUG - Loaded embedding model 'sentence-transformers/all-MiniLM-L6-v2' from local Hugging Face cache.
2026-02-08 13:34:34,657 - asky.research.embeddings - INFO - Loaded fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' successfully. Update research.embedding.model to avoid repeated primary model load failures.
2026-02-08 13:34:34,658 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=bad/model, device=cpu
2026-02-08 13:34:34,658 - asky.research.embeddings - DEBUG - Embedding model 'bad/model' not available locally, attempting remote load.
2026-02-08 13:34:34,658 - asky.research.embeddings - WARNING - Failed to load embedding model 'bad/model'. Falling back to 'sentence-transformers/all-MiniLM-L6-v2' with Hugging Face auto-download enabled.
2026-02-08 13:34:34,658 - asky.research.embeddings - DEBUG - Embedding model 'sentence-transformers/all-MiniLM-L6-v2' not available locally, attempting remote load.
2026-02-08 13:34:34,658 - asky.research.embeddings - ERROR - Failed to load sentence-transformer model 'bad/model': cannot load bad/model
2026-02-08 13:34:34,658 - asky.research.embeddings - ERROR - Fallback embedding model 'sentence-transformers/all-MiniLM-L6-v2' also failed: cannot load sentence-transformers/all-MiniLM-L6-v2
2026-02-08 13:34:34,659 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=cached/model, device=cpu
2026-02-08 13:34:34,659 - asky.research.embeddings - DEBUG - Loaded embedding model 'cached/model' from local Hugging Face cache.
2026-02-08 13:34:34,659 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=trunc/model, device=cpu
2026-02-08 13:34:34,659 - asky.research.embeddings - DEBUG - Loaded embedding model 'trunc/model' from local Hugging Face cache.
2026-02-08 13:34:34,663 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 13:34:34,667 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 13:34:34,667 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=sentence-transformers/all-MiniLM-L6-v2, device=cpu
2026-02-08 13:34:34,669 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 13:34:34,670 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-08 13:34:34,671 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 13:34:34,673 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 13:34:34,674 - asky.research.tools - DEBUG - Cache hit for http://b.com
2026-02-08 13:34:34,675 - asky.research.tools - DEBUG - Cache hit for http://a.com
2026-02-08 13:34:34,676 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 13:34:34,679 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-08 13:34:34,688 - asky.research.tools - DEBUG - Generating chunk embeddings for http://example.com
2026-02-08 13:34:34,689 - asky.research.tools - ERROR - RAG retrieval failed for http://example.com: DB error
2026-02-08 13:34:34,698 - asky.research.tools - WARNING - Finding embedding failed (will still be saved): Embedding API unavailable
2026-02-08 13:34:34,703 - asky.research.tools - WARNING - Semantic search unavailable: API unavailable
2026-02-08 13:34:34,722 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:34:34,735 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 13:34:34,745 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:34:34,745 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 13:34:34,758 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 13:34:34,758 - asky.research.vector_store - WARNING - Chroma link query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 13:34:34,771 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:34:34,781 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-08 13:34:34,785 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:34:34,794 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:34:34,794 - asky.research.vector_store - WARNING - Chroma hybrid query failed; using SQLite dense scores: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 13:34:34,802 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-08 13:34:34,805 - asky.research.vector_store - WARNING - Embedding count mismatch: 2 vs 3
2026-02-08 13:34:34,806 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 13:34:34,814 - asky.research.vector_store - DEBUG - Stored 5 chunk embeddings for cache_id=1
2026-02-08 13:34:34,814 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-08 13:34:34,823 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 13:34:34,833 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 13:34:34,836 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 13:34:34,846 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 13:34:34,848 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 13:34:34,854 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-08 13:34:34,857 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-08 13:34:34,878 - asky.core.session_manager - INFO - Session 1 reached threshold (10/5). Compacting...
2026-02-08 13:34:34,878 - asky.core.session_manager - INFO - Found 1 messages to compact for session 1
2026-02-08 13:34:34,878 - asky.core.session_manager - INFO - Compacted content length: 9 chars
2026-02-08 13:34:34,878 - asky.core.session_manager - INFO - Compaction saved for session 1
2026-02-08 13:34:34,887 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=True
2026-02-08 13:34:34,887 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=46 results=2 elapsed=0.00ms
2026-02-08 13:34:34,888 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 13:34:34,888 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://docs.example.com/ai-safety text_len=47 title_len=19 elapsed=0.00ms source_type=search
2026-02-08 13:34:34,888 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://blog.example.com/plants text_len=52 title_len=13 elapsed=0.00ms source_type=search
2026-02-08 13:34:34,888 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 13:34:34,888 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=46 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:34:34,888 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://docs.example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 13:34:34,888 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://blog.example.com/plants semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 13:34:34,888 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.11ms fetch=0.06ms score=0.07ms total=0.26ms seeds=0 query_len=46 keyphrases=0 shortlisted=2 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 13:34:34,889 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 13:34:34,889 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:34:34,889 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 13:34:34,889 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 13:34:34,889 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 13:34:34,889 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:34:34,889 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 13:34:34,889 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.07ms fetch=0.03ms score=0.04ms total=0.16ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 13:34:34,890 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=2 selected=2 added=2 elapsed=0.02ms warning=None
2026-02-08 13:34:34,890 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=2 elapsed=0.05ms max_pages=1 per_page=10
2026-02-08 13:34:34,890 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:34:34,890 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=3 deduped=3 max_candidates=30
2026-02-08 13:34:34,890 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=50 title_len=9 elapsed=0.00ms source_type=seed
2026-02-08 13:34:34,890 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/ai-safety text_len=51 title_len=15 elapsed=0.00ms source_type=seed_link
2026-02-08 13:34:34,890 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/garden text_len=51 title_len=11 elapsed=0.00ms source_type=seed_link
2026-02-08 13:34:34,890 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=3 attempted=3 extracted=3 max_fetch=15
2026-02-08 13:34:34,890 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=39 docs=3 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:34:34,890 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 13:34:34,890 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/ai-safety semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 13:34:34,890 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/garden semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 13:34:34,890 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.01ms collect=0.11ms fetch=0.06ms score=0.09ms total=0.27ms seeds=1 query_len=39 keyphrases=0 shortlisted=3 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 3, 'candidate_deduped': 3, 'fetch_calls': 3, 'fetch_success': 3, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 2, 'seed_link_added': 2, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 3} warnings=0
2026-02-08 13:34:34,891 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 13:34:34,891 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:34:34,891 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 13:34:34,891 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 13:34:34,891 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 13:34:34,891 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=31 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:34:34,891 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 13:34:34,891 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.14ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 13:34:34,892 - asky.research.source_shortlist - DEBUG - source_shortlist seed link extract url=https://example.com discovered=3 selected=3 added=1 elapsed=0.03ms warning=None
2026-02-08 13:34:34,892 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion done seeds=1 expanded=1 elapsed=0.05ms max_pages=1 per_page=10
2026-02-08 13:34:34,892 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:34:34,892 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=2 deduped=2 max_candidates=30
2026-02-08 13:34:34,892 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com text_len=57 title_len=5 elapsed=0.00ms source_type=seed
2026-02-08 13:34:34,892 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/world text_len=63 title_len=5 elapsed=0.00ms source_type=seed_link
2026-02-08 13:34:34,892 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=2 max_fetch=15
2026-02-08 13:34:34,892 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=26 docs=2 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:34:34,892 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 13:34:34,892 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/world semantic=1.0000 overlap=0.0000 bonus=0.0500 penalty=0.1000 final=0.9500
2026-02-08 13:34:34,892 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.10ms fetch=0.05ms score=0.06ms total=0.22ms seeds=1 query_len=26 keyphrases=0 shortlisted=2 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 2, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 1, 'seed_link_pages_success': 1, 'seed_link_extractor_calls': 1, 'seed_link_discovered': 3, 'seed_link_added': 1, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 2} warnings=0
2026-02-08 13:34:34,893 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=0 enabled=False
2026-02-08 13:34:34,893 - asky.research.source_shortlist - DEBUG - source_shortlist search completed query_len=43 results=2 elapsed=0.00ms
2026-02-08 13:34:34,893 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=0 collected=2 deduped=2 max_candidates=30
2026-02-08 13:34:34,893 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/europe text_len=80 title_len=6 elapsed=0.00ms source_type=search
2026-02-08 13:34:34,893 - asky.research.source_shortlist - DEBUG - source_shortlist fetch canonical dedupe skip url=https://example.com/europe canonical=https://example.com/europe
2026-02-08 13:34:34,893 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=2 attempted=2 extracted=1 max_fetch=15
2026-02-08 13:34:34,893 - asky.research.source_shortlist - DEBUG - source_shortlist embeddings complete query_len=43 docs=1 query_embed_ms=0.00 docs_embed_ms=0.00
2026-02-08 13:34:34,893 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/europe semantic=1.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=0.9000
2026-02-08 13:34:34,893 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.07ms fetch=0.06ms score=0.04ms total=0.18ms seeds=0 query_len=43 keyphrases=0 shortlisted=1 metrics={'search_calls': 1, 'search_results': 2, 'candidate_inputs': 2, 'candidate_deduped': 2, 'fetch_calls': 2, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 1, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 1, 'embedding_doc_calls': 1, 'embedding_doc_count': 1} warnings=0
2026-02-08 13:34:34,894 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 13:34:34,894 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:34:34,894 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 13:34:34,894 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=54 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 13:34:34,894 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 13:34:34,894 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=27 docs=1
2026-02-08 13:34:34,894 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.0000 final=0.0000
2026-02-08 13:34:34,894 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.14ms seeds=1 query_len=27 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 13:34:34,896 - asky.research.source_shortlist - DEBUG - source_shortlist seed link expansion skipped seed_urls=1 enabled=False
2026-02-08 13:34:34,896 - asky.research.source_shortlist - DEBUG - source_shortlist skipping search seed_urls=1 search_query_present=True config_search_with_seed=False
2026-02-08 13:34:34,896 - asky.research.source_shortlist - DEBUG - source_shortlist candidate collection done seeds=1 collected=1 deduped=1 max_candidates=30
2026-02-08 13:34:34,896 - asky.research.source_shortlist - DEBUG - source_shortlist fetch success url=https://example.com/seed text_len=56 title_len=11 elapsed=0.00ms source_type=seed
2026-02-08 13:34:34,896 - asky.research.source_shortlist - DEBUG - source_shortlist fetch stage done input_candidates=1 attempted=1 extracted=1 max_fetch=15
2026-02-08 13:34:34,896 - asky.research.source_shortlist - DEBUG - source_shortlist embedding skipped due to cached model load failure query_len=31 docs=1
2026-02-08 13:34:34,896 - asky.research.source_shortlist - DEBUG - source_shortlist score url=https://example.com/seed semantic=0.0000 overlap=0.0000 bonus=0.0000 penalty=0.1000 final=-0.1000
2026-02-08 13:34:34,896 - asky.research.source_shortlist - DEBUG - source_shortlist completed mode=research parse=0.00ms collect=0.06ms fetch=0.03ms score=0.04ms total=0.14ms seeds=1 query_len=31 keyphrases=0 shortlisted=1 metrics={'search_calls': 0, 'search_results': 0, 'candidate_inputs': 1, 'candidate_deduped': 1, 'fetch_calls': 1, 'fetch_success': 1, 'fetch_short_text_skips': 0, 'fetch_failures': 0, 'fetch_canonical_dedupe_skips': 0, 'seed_link_pages_attempted': 0, 'seed_link_pages_success': 0, 'seed_link_extractor_calls': 0, 'seed_link_discovered': 0, 'seed_link_added': 0, 'seed_link_failures': 0, 'embedding_query_calls': 0, 'embedding_doc_calls': 0, 'embedding_doc_count': 0} warnings=1
2026-02-08 13:34:34,899 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:34,908 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-08 13:34:34,912 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-08 13:34:36,442 - asky.summarization - DEBUG - summarization hierarchical start input_len=5196 chunks=6 target_chunk=180
2026-02-08 13:34:36,443 - asky.summarization - DEBUG - summarization hierarchical complete chunks=6 rounds=3 elapsed=0.22ms
