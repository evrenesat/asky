2026-02-07 20:52:09,893 - asky.rendering - ERROR - Error saving HTML report: [Errno 1] Operation not permitted: '/Users/evren/.config/asky/archive/untitled_20260207_205209.html'
2026-02-07 20:52:09,896 - asky.rendering - ERROR - Error saving HTML report: [Errno 1] Operation not permitted: '/Users/evren/.config/asky/archive/untitled_20260207_205209.html'
2026-02-07 20:52:09,913 - asky.core.engine - INFO - Starting turn 1/5
2026-02-07 20:52:09,913 - asky.core.api_client - INFO - Sending request to LLM: test-model
2026-02-07 20:52:09,913 - asky.core.api_client - DEBUG - Payload: {"model": "test-model", "messages": [{"role": "user", "content": "test"}], "tools": [], "tool_choice": "auto"}
2026-02-07 20:52:09,914 - asky.core.api_client - INFO - [test] Sent: 1 tokens
2026-02-07 20:52:09,914 - asky.core.engine - ERROR - API Error 400: 400 Client Error: Bad Request
2026-02-07 20:52:09,914 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 20:52:09,916 - asky.core.engine - INFO - Context threshold reached (628/500). Compacting...
2026-02-07 20:52:09,916 - asky.core.engine - INFO - Compaction failed to preserve history. Returning minimal context: 625 tokens.
2026-02-07 20:52:09,917 - asky.core.engine - INFO - Starting turn 1/5
2026-02-07 20:52:09,918 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 20:52:09,919 - asky.core.engine - INFO - Context threshold reached (520/100). Compacting...
2026-02-07 20:52:09,919 - asky.core.engine - DEBUG - [Smart Compaction] Found summary for URL https://example.com/long-article (dict). Replacing content.
2026-02-07 20:52:09,920 - asky.core.engine - INFO - Smart compaction successful. Reduced from 520 to 42
2026-02-07 20:52:09,921 - asky.tools - INFO - Executing custom tool command: ls "."
2026-02-07 20:52:09,922 - asky.tools - INFO - Executing custom tool command: ls "/tmp/test"
2026-02-07 20:52:09,924 - asky.tools - INFO - Executing custom tool command: echo "hello world"
2026-02-07 20:52:09,925 - asky.tools - INFO - Executing custom tool command: echo "already quoted"
2026-02-07 20:52:09,926 - asky.tools - INFO - Executing custom tool command: echo "test"
2026-02-07 20:52:09,933 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-07 20:52:09,933 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-07 20:52:09,934 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-07 20:52:09,934 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-07 20:52:09,935 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 20:52:09,935 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-07 20:52:09,936 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-07 20:52:09,936 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-07 20:52:09,936 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-07 20:52:09,936 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 20:52:09,937 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-07 20:52:09,938 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-07 20:52:09,939 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-07 20:52:09,939 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-07 20:52:09,939 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-07 20:52:09,939 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 20:52:09,939 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-07 20:52:09,940 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-07 20:52:09,940 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-07 20:52:09,940 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-07 20:52:09,940 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 20:52:09,940 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-07 20:52:09,942 - asky.email_sender - ERROR - SMTP credentials not configured. Please set ASKY_SMTP_USER and ASKY_SMTP_PASSWORD.
2026-02-07 20:52:09,943 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-07 20:52:09,943 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-07 20:52:09,943 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-07 20:52:09,943 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-07 20:52:09,943 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 20:52:09,944 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-07 20:52:09,944 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-07 20:52:09,944 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-07 20:52:09,944 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-07 20:52:09,944 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 20:52:09,945 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-07 20:52:09,945 - asky.email_sender - ERROR - Failed to send email: Auth failed
2026-02-07 20:52:09,962 - asky.rendering - WARNING - Template not found at <MagicMock name='TEMPLATE_PATH' id='4436200816'>
2026-02-07 20:52:09,965 - asky.rendering - DEBUG - Extracted title for filename: Test Content
2026-02-07 20:52:09,985 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-07 20:52:09,985 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [{"role": "user", "content": "Hi"}], "tools": null, "tool_choice": "auto"}
2026-02-07 20:52:09,986 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-07 20:52:09,986 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-07 20:52:09,987 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-07 20:52:09,987 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-07 20:52:09,987 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-07 20:52:09,988 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 1 seconds...
2026-02-07 20:52:09,988 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-07 20:52:09,989 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-07 20:52:09,989 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-07 20:52:09,989 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-07 20:52:09,989 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 5 seconds...
2026-02-07 20:52:09,990 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-07 20:52:09,991 - asky.core.engine - INFO - Starting turn 1/5
2026-02-07 20:52:09,991 - asky.core.engine - DEBUG - Tool call [71 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-07 20:52:09,992 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-07 20:52:09,992 - asky.core.engine - INFO - Starting turn 2/5
2026-02-07 20:52:09,992 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 20:52:09,995 - asky.rendering - INFO - [Opening browser: /path/to/archive/file.html]
2026-02-07 20:52:09,996 - asky.core.engine - INFO - Starting turn 1/5
2026-02-07 20:52:09,997 - asky.core.engine - DEBUG - Tool call [93 chrs]: {'id': 'call_123', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-07 20:52:09,997 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-07 20:52:09,997 - asky.core.engine - INFO - Starting turn 2/5
2026-02-07 20:52:09,997 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 20:52:09,999 - asky.core.engine - INFO - Starting turn 1/2
2026-02-07 20:52:09,999 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-07 20:52:09,999 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-07 20:52:09,999 - asky.core.engine - INFO - Starting turn 2/2
2026-02-07 20:52:09,999 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_2', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-07 20:52:10,000 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-07 20:52:10,000 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-07 20:52:10,000 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 20:52:10,002 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-07 20:52:10,002 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [{"role": "user", "content": "Hi"}], "temperature": 0.5, "top_p": 0.9, "tools": null, "tool_choice": "auto"}
2026-02-07 20:52:10,002 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-07 20:52:10,002 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-07 20:52:10,003 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-07 20:52:10,004 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [], "temperature": 0.7, "tools": null, "tool_choice": "auto"}
2026-02-07 20:52:10,004 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-07 20:52:10,004 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-07 20:52:10,023 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-07 20:52:10,024 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-07 20:52:10,028 - asky.push_data - ERROR - Failed to push data to 'test_endpoint': Network error
2026-02-07 20:52:10,029 - asky.push_data - ERROR - Failed to build payload for endpoint 'test_endpoint': Missing required parameter: title
2026-02-07 20:52:10,030 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-07 20:52:10,042 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:10,046 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:10,047 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 20:52:10,053 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:10,054 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 20:52:10,054 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 20:52:10,059 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:10,059 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-07 20:52:10,061 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-07 20:52:10,064 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:10,065 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-07 20:52:10,066 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-07 20:52:10,069 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:10,073 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:10,078 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:10,078 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 20:52:10,083 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:10,084 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 20:52:10,087 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:10,088 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 20:52:10,093 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:10,094 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-07 20:52:10,100 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:10,100 - asky.research.cache - DEBUG - Cached URL http://example1.com with id=1
2026-02-07 20:52:10,101 - asky.research.cache - DEBUG - Cached URL http://example2.com with id=2
2026-02-07 20:52:10,105 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:10,106 - asky.research.cache - DEBUG - Scheduled background summarization for http://example.com
2026-02-07 20:52:10,106 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 20:52:10,107 - asky.research.cache - DEBUG - Background summarization completed for http://example.com
2026-02-07 20:52:10,615 - asky.research.cache - DEBUG - Shutting down research cache executor...
2026-02-07 20:52:10,616 - asky.research.cache - DEBUG - Research cache executor shutdown complete
2026-02-07 20:52:10,631 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:10,641 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:10,649 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:10,655 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:10,661 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:10,662 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 20:52:10,668 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:10,669 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 20:52:10,674 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:10,679 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:10,685 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:10,685 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 20:52:10,686 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-07 20:52:10,687 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-07 20:52:10,692 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:10,693 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 20:52:10,694 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-07 20:52:10,694 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-07 20:52:10,695 - asky.research.cache - DEBUG - Saved finding id=4
2026-02-07 20:52:10,696 - asky.research.cache - DEBUG - Saved finding id=5
2026-02-07 20:52:10,697 - asky.research.cache - DEBUG - Saved finding id=6
2026-02-07 20:52:10,697 - asky.research.cache - DEBUG - Saved finding id=7
2026-02-07 20:52:10,698 - asky.research.cache - DEBUG - Saved finding id=8
2026-02-07 20:52:10,699 - asky.research.cache - DEBUG - Saved finding id=9
2026-02-07 20:52:10,699 - asky.research.cache - DEBUG - Saved finding id=10
2026-02-07 20:52:10,703 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:10,704 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 20:52:10,705 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-07 20:52:10,706 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-07 20:52:10,710 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:10,710 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 20:52:10,711 - asky.research.cache - DEBUG - Deleted finding id=1
2026-02-07 20:52:10,715 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:10,721 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:10,722 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 20:52:10,728 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:10,729 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 20:52:10,730 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-07 20:52:10,735 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:10,736 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 20:52:10,741 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:10,742 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 20:52:10,760 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:52:10,761 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:52:10,763 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:52:10,764 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:52:10,765 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:52:10,766 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:52:10,767 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:52:10,768 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:52:10,769 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:52:10,770 - asky.research.embeddings - ERROR - Failed to connect to embedding API at http://localhost:1234/v1/embeddings. Is LM Studio running with an embedding model loaded?
2026-02-07 20:52:10,770 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:52:10,771 - asky.research.embeddings - ERROR - Embedding API request timed out after 10s
2026-02-07 20:52:10,772 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:52:10,773 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:52:10,773 - asky.research.embeddings - ERROR - Embedding API error: API error
2026-02-07 20:52:10,774 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:52:11,295 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=gaianet/text-embedding-nomic-embed-text-v1.5-embedding
2026-02-07 20:52:11,309 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 20:52:11,315 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-07 20:52:11,318 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-07 20:52:11,320 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 20:52:11,322 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 20:52:11,325 - asky.research.tools - DEBUG - Cache hit for http://b.com
2026-02-07 20:52:11,326 - asky.research.tools - DEBUG - Cache hit for http://a.com
2026-02-07 20:52:11,329 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 20:52:11,331 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 20:52:11,344 - asky.research.tools - DEBUG - Generating chunk embeddings for http://example.com
2026-02-07 20:52:11,346 - asky.research.tools - ERROR - RAG retrieval failed for http://example.com: DB error
2026-02-07 20:52:11,355 - asky.research.tools - WARNING - Finding embedding failed (will still be saved): Embedding API unavailable
2026-02-07 20:52:11,360 - asky.research.tools - WARNING - Semantic search unavailable: API unavailable
2026-02-07 20:52:11,375 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 20:52:11,381 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-07 20:52:11,387 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 20:52:11,394 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-07 20:52:11,404 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 20:52:11,407 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-07 20:52:11,411 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 20:52:11,416 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 20:52:11,418 - asky.research.vector_store - WARNING - Embedding count mismatch: 2 vs 3
2026-02-07 20:52:11,421 - asky.research.vector_store - DEBUG - Stored 5 chunk embeddings for cache_id=1
2026-02-07 20:52:11,424 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-07 20:52:11,431 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-07 20:52:11,431 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-07 20:52:11,435 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-07 20:52:11,436 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-07 20:52:11,437 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-07 20:52:11,438 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-07 20:52:11,471 - asky.core.session_manager - INFO - Session 1 reached threshold (10/5). Compacting...
2026-02-07 20:52:11,471 - asky.core.session_manager - INFO - Found 1 messages to compact for session 1
2026-02-07 20:52:11,471 - asky.core.session_manager - INFO - Compacted content length: 9 chars
2026-02-07 20:52:11,472 - asky.core.session_manager - INFO - Compaction saved for session 1
2026-02-07 20:52:11,483 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:52:11,486 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-07 20:52:11,490 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:58:59,333 - asky.rendering - ERROR - Error saving HTML report: [Errno 1] Operation not permitted: '/Users/evren/.config/asky/archive/untitled_20260207_205859.html'
2026-02-07 20:58:59,336 - asky.rendering - ERROR - Error saving HTML report: [Errno 1] Operation not permitted: '/Users/evren/.config/asky/archive/untitled_20260207_205859.html'
2026-02-07 20:58:59,354 - asky.core.engine - INFO - Starting turn 1/5
2026-02-07 20:58:59,355 - asky.core.api_client - INFO - Sending request to LLM: test-model
2026-02-07 20:58:59,355 - asky.core.api_client - DEBUG - Payload: {"model": "test-model", "messages": [{"role": "user", "content": "test"}], "tools": [], "tool_choice": "auto"}
2026-02-07 20:58:59,355 - asky.core.api_client - INFO - [test] Sent: 1 tokens
2026-02-07 20:58:59,355 - asky.core.engine - ERROR - API Error 400: 400 Client Error: Bad Request
2026-02-07 20:58:59,355 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 20:58:59,356 - asky.core.engine - INFO - Context threshold reached (628/500). Compacting...
2026-02-07 20:58:59,357 - asky.core.engine - INFO - Compaction failed to preserve history. Returning minimal context: 625 tokens.
2026-02-07 20:58:59,357 - asky.core.engine - INFO - Starting turn 1/5
2026-02-07 20:58:59,358 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 20:58:59,359 - asky.core.engine - INFO - Context threshold reached (520/100). Compacting...
2026-02-07 20:58:59,359 - asky.core.engine - DEBUG - [Smart Compaction] Found summary for URL https://example.com/long-article (dict). Replacing content.
2026-02-07 20:58:59,359 - asky.core.engine - INFO - Smart compaction successful. Reduced from 520 to 42
2026-02-07 20:58:59,361 - asky.tools - INFO - Executing custom tool command: ls "."
2026-02-07 20:58:59,362 - asky.tools - INFO - Executing custom tool command: ls "/tmp/test"
2026-02-07 20:58:59,363 - asky.tools - INFO - Executing custom tool command: echo "hello world"
2026-02-07 20:58:59,364 - asky.tools - INFO - Executing custom tool command: echo "already quoted"
2026-02-07 20:58:59,366 - asky.tools - INFO - Executing custom tool command: echo "test"
2026-02-07 20:58:59,370 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-07 20:58:59,371 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-07 20:58:59,371 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-07 20:58:59,371 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-07 20:58:59,372 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 20:58:59,372 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-07 20:58:59,372 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-07 20:58:59,373 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-07 20:58:59,373 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-07 20:58:59,373 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 20:58:59,373 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-07 20:58:59,375 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-07 20:58:59,375 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-07 20:58:59,375 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-07 20:58:59,375 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-07 20:58:59,376 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 20:58:59,376 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-07 20:58:59,376 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-07 20:58:59,376 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-07 20:58:59,376 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-07 20:58:59,377 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 20:58:59,377 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-07 20:58:59,378 - asky.email_sender - ERROR - SMTP credentials not configured. Please set ASKY_SMTP_USER and ASKY_SMTP_PASSWORD.
2026-02-07 20:58:59,379 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-07 20:58:59,379 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-07 20:58:59,380 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-07 20:58:59,380 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-07 20:58:59,380 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 20:58:59,380 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-07 20:58:59,380 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-07 20:58:59,381 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-07 20:58:59,381 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-07 20:58:59,381 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 20:58:59,381 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-07 20:58:59,382 - asky.email_sender - ERROR - Failed to send email: Auth failed
2026-02-07 20:58:59,400 - asky.rendering - WARNING - Template not found at <MagicMock name='TEMPLATE_PATH' id='4435081072'>
2026-02-07 20:58:59,402 - asky.rendering - DEBUG - Extracted title for filename: Test Content
2026-02-07 20:58:59,423 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-07 20:58:59,424 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [{"role": "user", "content": "Hi"}], "tools": null, "tool_choice": "auto"}
2026-02-07 20:58:59,424 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-07 20:58:59,424 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-07 20:58:59,425 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-07 20:58:59,425 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-07 20:58:59,425 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-07 20:58:59,426 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 1 seconds...
2026-02-07 20:58:59,426 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-07 20:58:59,427 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-07 20:58:59,427 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-07 20:58:59,428 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-07 20:58:59,428 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 5 seconds...
2026-02-07 20:58:59,428 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-07 20:58:59,429 - asky.core.engine - INFO - Starting turn 1/5
2026-02-07 20:58:59,429 - asky.core.engine - DEBUG - Tool call [71 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-07 20:58:59,430 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-07 20:58:59,430 - asky.core.engine - INFO - Starting turn 2/5
2026-02-07 20:58:59,430 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 20:58:59,434 - asky.rendering - INFO - [Opening browser: /path/to/archive/file.html]
2026-02-07 20:58:59,435 - asky.core.engine - INFO - Starting turn 1/5
2026-02-07 20:58:59,435 - asky.core.engine - DEBUG - Tool call [93 chrs]: {'id': 'call_123', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-07 20:58:59,435 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-07 20:58:59,436 - asky.core.engine - INFO - Starting turn 2/5
2026-02-07 20:58:59,436 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 20:58:59,437 - asky.core.engine - INFO - Starting turn 1/2
2026-02-07 20:58:59,437 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-07 20:58:59,437 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-07 20:58:59,438 - asky.core.engine - INFO - Starting turn 2/2
2026-02-07 20:58:59,438 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_2', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-07 20:58:59,438 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-07 20:58:59,438 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-07 20:58:59,438 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 20:58:59,440 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-07 20:58:59,440 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [{"role": "user", "content": "Hi"}], "temperature": 0.5, "top_p": 0.9, "tools": null, "tool_choice": "auto"}
2026-02-07 20:58:59,440 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-07 20:58:59,441 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-07 20:58:59,442 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-07 20:58:59,442 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [], "temperature": 0.7, "tools": null, "tool_choice": "auto"}
2026-02-07 20:58:59,442 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-07 20:58:59,442 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-07 20:58:59,462 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-07 20:58:59,463 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-07 20:58:59,466 - asky.push_data - ERROR - Failed to push data to 'test_endpoint': Network error
2026-02-07 20:58:59,467 - asky.push_data - ERROR - Failed to build payload for endpoint 'test_endpoint': Missing required parameter: title
2026-02-07 20:58:59,468 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-07 20:58:59,481 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:58:59,486 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:58:59,487 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 20:58:59,491 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:58:59,492 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 20:58:59,492 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:58:59,493 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 20:58:59,496 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:58:59,497 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-07 20:58:59,498 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-07 20:58:59,502 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:58:59,503 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-07 20:58:59,504 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-07 20:58:59,507 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:58:59,511 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:58:59,515 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:58:59,516 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 20:58:59,520 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:58:59,521 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 20:58:59,525 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:58:59,526 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 20:58:59,530 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:58:59,531 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-07 20:58:59,534 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:58:59,535 - asky.research.cache - DEBUG - Cached URL http://example1.com with id=1
2026-02-07 20:58:59,536 - asky.research.cache - DEBUG - Cached URL http://example2.com with id=2
2026-02-07 20:58:59,540 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:58:59,541 - asky.research.cache - DEBUG - Scheduled background summarization for http://example.com
2026-02-07 20:58:59,541 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 20:58:59,542 - asky.research.cache - DEBUG - Background summarization completed for http://example.com
2026-02-07 20:59:00,050 - asky.research.cache - DEBUG - Shutting down research cache executor...
2026-02-07 20:59:00,052 - asky.research.cache - DEBUG - Research cache executor shutdown complete
2026-02-07 20:59:00,064 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:00,074 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:00,081 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:00,088 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:00,094 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:00,096 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 20:59:00,101 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:00,102 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 20:59:00,106 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:00,111 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:00,116 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:00,117 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 20:59:00,118 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-07 20:59:00,118 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-07 20:59:00,123 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:00,124 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 20:59:00,125 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-07 20:59:00,126 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-07 20:59:00,126 - asky.research.cache - DEBUG - Saved finding id=4
2026-02-07 20:59:00,127 - asky.research.cache - DEBUG - Saved finding id=5
2026-02-07 20:59:00,128 - asky.research.cache - DEBUG - Saved finding id=6
2026-02-07 20:59:00,128 - asky.research.cache - DEBUG - Saved finding id=7
2026-02-07 20:59:00,129 - asky.research.cache - DEBUG - Saved finding id=8
2026-02-07 20:59:00,130 - asky.research.cache - DEBUG - Saved finding id=9
2026-02-07 20:59:00,130 - asky.research.cache - DEBUG - Saved finding id=10
2026-02-07 20:59:00,134 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:00,135 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 20:59:00,136 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-07 20:59:00,136 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-07 20:59:00,140 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:00,141 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 20:59:00,141 - asky.research.cache - DEBUG - Deleted finding id=1
2026-02-07 20:59:00,145 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:00,149 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:00,150 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 20:59:00,154 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:00,155 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 20:59:00,156 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-07 20:59:00,160 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:00,162 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 20:59:00,166 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:00,167 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 20:59:00,185 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:59:00,186 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:59:00,187 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:59:00,188 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:59:00,189 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:59:00,190 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:59:00,191 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:59:00,192 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:59:00,194 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:59:00,194 - asky.research.embeddings - ERROR - Failed to connect to embedding API at http://localhost:1234/v1/embeddings. Is LM Studio running with an embedding model loaded?
2026-02-07 20:59:00,195 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:59:00,195 - asky.research.embeddings - ERROR - Embedding API request timed out after 10s
2026-02-07 20:59:00,196 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:59:00,197 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:59:00,197 - asky.research.embeddings - ERROR - Embedding API error: API error
2026-02-07 20:59:00,199 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:59:00,719 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=gaianet/text-embedding-nomic-embed-text-v1.5-embedding
2026-02-07 20:59:00,733 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 20:59:00,737 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-07 20:59:00,739 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-07 20:59:00,741 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 20:59:00,744 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 20:59:00,747 - asky.research.tools - DEBUG - Cache hit for http://b.com
2026-02-07 20:59:00,748 - asky.research.tools - DEBUG - Cache hit for http://a.com
2026-02-07 20:59:00,751 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 20:59:00,753 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 20:59:00,767 - asky.research.tools - DEBUG - Generating chunk embeddings for http://example.com
2026-02-07 20:59:00,768 - asky.research.tools - ERROR - RAG retrieval failed for http://example.com: DB error
2026-02-07 20:59:00,778 - asky.research.tools - WARNING - Finding embedding failed (will still be saved): Embedding API unavailable
2026-02-07 20:59:00,783 - asky.research.tools - WARNING - Semantic search unavailable: API unavailable
2026-02-07 20:59:00,798 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:00,798 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 20:59:00,803 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:00,803 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-07 20:59:00,808 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:00,808 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 20:59:00,812 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:00,812 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-07 20:59:00,822 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:00,822 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 20:59:00,825 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:00,825 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-07 20:59:00,828 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 20:59:00,833 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:00,833 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 20:59:00,837 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:00,837 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 20:59:00,840 - asky.research.vector_store - WARNING - Embedding count mismatch: 2 vs 3
2026-02-07 20:59:00,840 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:00,843 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:00,843 - asky.research.vector_store - DEBUG - Stored 5 chunk embeddings for cache_id=1
2026-02-07 20:59:00,845 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:00,846 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-07 20:59:00,850 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:00,852 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:00,852 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-07 20:59:00,853 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-07 20:59:00,856 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:00,856 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-07 20:59:00,857 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-07 20:59:00,859 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:00,859 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-07 20:59:00,859 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-07 20:59:00,878 - asky.core.session_manager - INFO - Session 1 reached threshold (10/5). Compacting...
2026-02-07 20:59:00,879 - asky.core.session_manager - INFO - Found 1 messages to compact for session 1
2026-02-07 20:59:00,879 - asky.core.session_manager - INFO - Compacted content length: 9 chars
2026-02-07 20:59:00,879 - asky.core.session_manager - INFO - Compaction saved for session 1
2026-02-07 20:59:00,890 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:00,892 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:00,892 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-07 20:59:00,896 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:32,403 - asky.rendering - ERROR - Error saving HTML report: [Errno 1] Operation not permitted: '/Users/evren/.config/asky/archive/untitled_20260207_205932.html'
2026-02-07 20:59:32,406 - asky.rendering - ERROR - Error saving HTML report: [Errno 1] Operation not permitted: '/Users/evren/.config/asky/archive/untitled_20260207_205932.html'
2026-02-07 20:59:32,424 - asky.core.engine - INFO - Starting turn 1/5
2026-02-07 20:59:32,424 - asky.core.api_client - INFO - Sending request to LLM: test-model
2026-02-07 20:59:32,424 - asky.core.api_client - DEBUG - Payload: {"model": "test-model", "messages": [{"role": "user", "content": "test"}], "tools": [], "tool_choice": "auto"}
2026-02-07 20:59:32,425 - asky.core.api_client - INFO - [test] Sent: 1 tokens
2026-02-07 20:59:32,425 - asky.core.engine - ERROR - API Error 400: 400 Client Error: Bad Request
2026-02-07 20:59:32,425 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 20:59:32,426 - asky.core.engine - INFO - Context threshold reached (628/500). Compacting...
2026-02-07 20:59:32,426 - asky.core.engine - INFO - Compaction failed to preserve history. Returning minimal context: 625 tokens.
2026-02-07 20:59:32,427 - asky.core.engine - INFO - Starting turn 1/5
2026-02-07 20:59:32,428 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 20:59:32,428 - asky.core.engine - INFO - Context threshold reached (520/100). Compacting...
2026-02-07 20:59:32,429 - asky.core.engine - DEBUG - [Smart Compaction] Found summary for URL https://example.com/long-article (dict). Replacing content.
2026-02-07 20:59:32,429 - asky.core.engine - INFO - Smart compaction successful. Reduced from 520 to 42
2026-02-07 20:59:32,430 - asky.tools - INFO - Executing custom tool command: ls "."
2026-02-07 20:59:32,432 - asky.tools - INFO - Executing custom tool command: ls "/tmp/test"
2026-02-07 20:59:32,433 - asky.tools - INFO - Executing custom tool command: echo "hello world"
2026-02-07 20:59:32,434 - asky.tools - INFO - Executing custom tool command: echo "already quoted"
2026-02-07 20:59:32,435 - asky.tools - INFO - Executing custom tool command: echo "test"
2026-02-07 20:59:32,440 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-07 20:59:32,441 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-07 20:59:32,441 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-07 20:59:32,441 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-07 20:59:32,441 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 20:59:32,442 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-07 20:59:32,442 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-07 20:59:32,442 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-07 20:59:32,443 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-07 20:59:32,443 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 20:59:32,443 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-07 20:59:32,445 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-07 20:59:32,445 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-07 20:59:32,445 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-07 20:59:32,445 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-07 20:59:32,445 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 20:59:32,446 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-07 20:59:32,446 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-07 20:59:32,446 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-07 20:59:32,446 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-07 20:59:32,446 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 20:59:32,447 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-07 20:59:32,449 - asky.email_sender - ERROR - SMTP credentials not configured. Please set ASKY_SMTP_USER and ASKY_SMTP_PASSWORD.
2026-02-07 20:59:32,450 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-07 20:59:32,451 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-07 20:59:32,451 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-07 20:59:32,451 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-07 20:59:32,451 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 20:59:32,452 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-07 20:59:32,452 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-07 20:59:32,452 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-07 20:59:32,452 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-07 20:59:32,453 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 20:59:32,453 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-07 20:59:32,454 - asky.email_sender - ERROR - Failed to send email: Auth failed
2026-02-07 20:59:32,471 - asky.rendering - WARNING - Template not found at <MagicMock name='TEMPLATE_PATH' id='4382521200'>
2026-02-07 20:59:32,473 - asky.rendering - DEBUG - Extracted title for filename: Test Content
2026-02-07 20:59:32,493 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-07 20:59:32,494 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [{"role": "user", "content": "Hi"}], "tools": null, "tool_choice": "auto"}
2026-02-07 20:59:32,494 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-07 20:59:32,494 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-07 20:59:32,495 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-07 20:59:32,495 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-07 20:59:32,496 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-07 20:59:32,496 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 1 seconds...
2026-02-07 20:59:32,496 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-07 20:59:32,497 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-07 20:59:32,498 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-07 20:59:32,498 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-07 20:59:32,498 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 5 seconds...
2026-02-07 20:59:32,498 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-07 20:59:32,499 - asky.core.engine - INFO - Starting turn 1/5
2026-02-07 20:59:32,499 - asky.core.engine - DEBUG - Tool call [71 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-07 20:59:32,500 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-07 20:59:32,500 - asky.core.engine - INFO - Starting turn 2/5
2026-02-07 20:59:32,500 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 20:59:32,503 - asky.rendering - INFO - [Opening browser: /path/to/archive/file.html]
2026-02-07 20:59:32,504 - asky.core.engine - INFO - Starting turn 1/5
2026-02-07 20:59:32,504 - asky.core.engine - DEBUG - Tool call [93 chrs]: {'id': 'call_123', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-07 20:59:32,505 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-07 20:59:32,505 - asky.core.engine - INFO - Starting turn 2/5
2026-02-07 20:59:32,505 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 20:59:32,506 - asky.core.engine - INFO - Starting turn 1/2
2026-02-07 20:59:32,507 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-07 20:59:32,507 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-07 20:59:32,507 - asky.core.engine - INFO - Starting turn 2/2
2026-02-07 20:59:32,507 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_2', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-07 20:59:32,508 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-07 20:59:32,508 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-07 20:59:32,508 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 20:59:32,510 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-07 20:59:32,510 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [{"role": "user", "content": "Hi"}], "temperature": 0.5, "top_p": 0.9, "tools": null, "tool_choice": "auto"}
2026-02-07 20:59:32,510 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-07 20:59:32,510 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-07 20:59:32,511 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-07 20:59:32,511 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [], "temperature": 0.7, "tools": null, "tool_choice": "auto"}
2026-02-07 20:59:32,512 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-07 20:59:32,512 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-07 20:59:32,532 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-07 20:59:32,533 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-07 20:59:32,537 - asky.push_data - ERROR - Failed to push data to 'test_endpoint': Network error
2026-02-07 20:59:32,538 - asky.push_data - ERROR - Failed to build payload for endpoint 'test_endpoint': Missing required parameter: title
2026-02-07 20:59:32,539 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-07 20:59:32,552 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:32,556 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:32,557 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 20:59:32,561 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:32,562 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 20:59:32,563 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:32,563 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 20:59:32,566 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:32,567 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-07 20:59:32,569 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-07 20:59:32,572 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:32,573 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-07 20:59:32,574 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-07 20:59:32,577 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:32,581 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:32,587 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:32,588 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 20:59:32,591 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:32,592 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 20:59:32,596 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:32,596 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 20:59:32,600 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:32,601 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-07 20:59:32,605 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:32,605 - asky.research.cache - DEBUG - Cached URL http://example1.com with id=1
2026-02-07 20:59:32,606 - asky.research.cache - DEBUG - Cached URL http://example2.com with id=2
2026-02-07 20:59:32,610 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:32,611 - asky.research.cache - DEBUG - Scheduled background summarization for http://example.com
2026-02-07 20:59:32,611 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 20:59:32,612 - asky.research.cache - DEBUG - Background summarization completed for http://example.com
2026-02-07 20:59:33,120 - asky.research.cache - DEBUG - Shutting down research cache executor...
2026-02-07 20:59:33,121 - asky.research.cache - DEBUG - Research cache executor shutdown complete
2026-02-07 20:59:33,134 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:33,144 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:33,151 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:33,158 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:33,164 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:33,166 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 20:59:33,171 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:33,172 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 20:59:33,176 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:33,182 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:33,187 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:33,188 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 20:59:33,189 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-07 20:59:33,190 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-07 20:59:33,194 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:33,195 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 20:59:33,196 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-07 20:59:33,196 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-07 20:59:33,197 - asky.research.cache - DEBUG - Saved finding id=4
2026-02-07 20:59:33,198 - asky.research.cache - DEBUG - Saved finding id=5
2026-02-07 20:59:33,198 - asky.research.cache - DEBUG - Saved finding id=6
2026-02-07 20:59:33,199 - asky.research.cache - DEBUG - Saved finding id=7
2026-02-07 20:59:33,200 - asky.research.cache - DEBUG - Saved finding id=8
2026-02-07 20:59:33,200 - asky.research.cache - DEBUG - Saved finding id=9
2026-02-07 20:59:33,201 - asky.research.cache - DEBUG - Saved finding id=10
2026-02-07 20:59:33,205 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:33,206 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 20:59:33,206 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-07 20:59:33,207 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-07 20:59:33,211 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:33,211 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 20:59:33,212 - asky.research.cache - DEBUG - Deleted finding id=1
2026-02-07 20:59:33,216 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:33,220 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:33,221 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 20:59:33,225 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:33,227 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 20:59:33,227 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-07 20:59:33,231 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:33,232 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 20:59:33,236 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:33,237 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 20:59:33,256 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:59:33,257 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:59:33,258 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:59:33,259 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:59:33,260 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:59:33,261 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:59:33,262 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:59:33,263 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:59:33,265 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:59:33,265 - asky.research.embeddings - ERROR - Failed to connect to embedding API at http://localhost:1234/v1/embeddings. Is LM Studio running with an embedding model loaded?
2026-02-07 20:59:33,266 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:59:33,266 - asky.research.embeddings - ERROR - Embedding API request timed out after 10s
2026-02-07 20:59:33,267 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:59:33,268 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:59:33,268 - asky.research.embeddings - ERROR - Embedding API error: API error
2026-02-07 20:59:33,269 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 20:59:33,793 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=gaianet/text-embedding-nomic-embed-text-v1.5-embedding
2026-02-07 20:59:33,805 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 20:59:33,811 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-07 20:59:33,813 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-07 20:59:33,815 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 20:59:33,818 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 20:59:33,821 - asky.research.tools - DEBUG - Cache hit for http://b.com
2026-02-07 20:59:33,823 - asky.research.tools - DEBUG - Cache hit for http://a.com
2026-02-07 20:59:33,825 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 20:59:33,827 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 20:59:33,841 - asky.research.tools - DEBUG - Generating chunk embeddings for http://example.com
2026-02-07 20:59:33,842 - asky.research.tools - ERROR - RAG retrieval failed for http://example.com: DB error
2026-02-07 20:59:33,852 - asky.research.tools - WARNING - Finding embedding failed (will still be saved): Embedding API unavailable
2026-02-07 20:59:33,857 - asky.research.tools - WARNING - Semantic search unavailable: API unavailable
2026-02-07 20:59:33,872 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:33,872 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 20:59:33,877 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:33,877 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-07 20:59:33,882 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:33,882 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 20:59:33,887 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:33,887 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-07 20:59:33,896 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:33,896 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 20:59:33,899 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:33,899 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-07 20:59:33,902 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 20:59:33,906 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:33,906 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 20:59:33,911 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:33,911 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 20:59:33,913 - asky.research.vector_store - WARNING - Embedding count mismatch: 2 vs 3
2026-02-07 20:59:33,913 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:33,916 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:33,916 - asky.research.vector_store - DEBUG - Stored 5 chunk embeddings for cache_id=1
2026-02-07 20:59:33,920 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:33,920 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-07 20:59:33,925 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:33,928 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:33,928 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-07 20:59:33,929 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-07 20:59:33,933 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:33,933 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-07 20:59:33,933 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-07 20:59:33,936 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:33,936 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-07 20:59:33,937 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-07 20:59:33,960 - asky.core.session_manager - INFO - Session 1 reached threshold (10/5). Compacting...
2026-02-07 20:59:33,960 - asky.core.session_manager - INFO - Found 1 messages to compact for session 1
2026-02-07 20:59:33,960 - asky.core.session_manager - INFO - Compacted content length: 9 chars
2026-02-07 20:59:33,961 - asky.core.session_manager - INFO - Compaction saved for session 1
2026-02-07 20:59:33,972 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 20:59:33,974 - asky.research.vector_store - WARNING - ChromaDB is unavailable; falling back to SQLite-only vector search: No module named 'chromadb'
2026-02-07 20:59:33,974 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-07 20:59:33,978 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,126 - chromadb.config - DEBUG - Starting component System
2026-02-07 21:15:26,126 - chromadb.config - DEBUG - Starting component Posthog
2026-02-07 21:15:26,148 - asky.research.cache - INFO - Cleaned up 2 expired cache entries
2026-02-07 21:15:26,170 - asky.core.engine - INFO - Starting turn 1/5
2026-02-07 21:15:26,171 - asky.core.api_client - INFO - Sending request to LLM: test-model
2026-02-07 21:15:26,171 - asky.core.api_client - DEBUG - Payload: {"model": "test-model", "messages": [{"role": "user", "content": "test"}], "tools": [], "tool_choice": "auto"}
2026-02-07 21:15:26,171 - asky.core.api_client - INFO - [test] Sent: 1 tokens
2026-02-07 21:15:26,171 - asky.core.engine - ERROR - API Error 400: 400 Client Error: Bad Request
2026-02-07 21:15:26,171 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 21:15:26,171 - asky.core.engine - INFO - Context threshold reached (628/500). Compacting...
2026-02-07 21:15:26,171 - asky.core.engine - INFO - Compaction failed to preserve history. Returning minimal context: 625 tokens.
2026-02-07 21:15:26,172 - asky.core.engine - INFO - Starting turn 1/5
2026-02-07 21:15:26,172 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 21:15:26,173 - asky.core.engine - INFO - Context threshold reached (520/100). Compacting...
2026-02-07 21:15:26,173 - asky.core.engine - DEBUG - [Smart Compaction] Found summary for URL https://example.com/long-article (dict). Replacing content.
2026-02-07 21:15:26,173 - asky.core.engine - INFO - Smart compaction successful. Reduced from 520 to 42
2026-02-07 21:15:26,175 - asky.tools - INFO - Executing custom tool command: ls "."
2026-02-07 21:15:26,176 - asky.tools - INFO - Executing custom tool command: ls "/tmp/test"
2026-02-07 21:15:26,178 - asky.tools - INFO - Executing custom tool command: echo "hello world"
2026-02-07 21:15:26,180 - asky.tools - INFO - Executing custom tool command: echo "already quoted"
2026-02-07 21:15:26,197 - asky.tools - INFO - Executing custom tool command: echo "test"
2026-02-07 21:15:26,204 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-07 21:15:26,204 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-07 21:15:26,204 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-07 21:15:26,204 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-07 21:15:26,205 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 21:15:26,205 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-07 21:15:26,206 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-07 21:15:26,206 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-07 21:15:26,206 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-07 21:15:26,206 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 21:15:26,206 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-07 21:15:26,207 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-07 21:15:26,207 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-07 21:15:26,207 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-07 21:15:26,207 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-07 21:15:26,207 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 21:15:26,207 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-07 21:15:26,208 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-07 21:15:26,208 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-07 21:15:26,208 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-07 21:15:26,208 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 21:15:26,208 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-07 21:15:26,209 - asky.email_sender - ERROR - SMTP credentials not configured. Please set ASKY_SMTP_USER and ASKY_SMTP_PASSWORD.
2026-02-07 21:15:26,210 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-07 21:15:26,210 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-07 21:15:26,210 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-07 21:15:26,210 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-07 21:15:26,210 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 21:15:26,210 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-07 21:15:26,210 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-07 21:15:26,210 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-07 21:15:26,210 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-07 21:15:26,210 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 21:15:26,210 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-07 21:15:26,210 - asky.email_sender - ERROR - Failed to send email: Auth failed
2026-02-07 21:15:26,226 - asky.rendering - WARNING - Template not found at <MagicMock name='TEMPLATE_PATH' id='4416975408'>
2026-02-07 21:15:26,229 - asky.rendering - DEBUG - Extracted title for filename: Test Content
2026-02-07 21:15:26,250 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-07 21:15:26,250 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [{"role": "user", "content": "Hi"}], "tools": null, "tool_choice": "auto"}
2026-02-07 21:15:26,250 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-07 21:15:26,250 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-07 21:15:26,251 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-07 21:15:26,251 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-07 21:15:26,251 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-07 21:15:26,251 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 1 seconds...
2026-02-07 21:15:26,251 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-07 21:15:26,252 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-07 21:15:26,252 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-07 21:15:26,252 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-07 21:15:26,252 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 5 seconds...
2026-02-07 21:15:26,252 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-07 21:15:26,253 - asky.core.engine - INFO - Starting turn 1/5
2026-02-07 21:15:26,253 - asky.core.engine - DEBUG - Tool call [71 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-07 21:15:26,253 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-07 21:15:26,253 - asky.core.engine - INFO - Starting turn 2/5
2026-02-07 21:15:26,253 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 21:15:26,256 - asky.rendering - INFO - [Opening browser: /path/to/archive/file.html]
2026-02-07 21:15:26,257 - asky.core.engine - INFO - Starting turn 1/5
2026-02-07 21:15:26,257 - asky.core.engine - DEBUG - Tool call [93 chrs]: {'id': 'call_123', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-07 21:15:26,257 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-07 21:15:26,257 - asky.core.engine - INFO - Starting turn 2/5
2026-02-07 21:15:26,258 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 21:15:26,258 - asky.core.engine - INFO - Starting turn 1/2
2026-02-07 21:15:26,258 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-07 21:15:26,258 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-07 21:15:26,258 - asky.core.engine - INFO - Starting turn 2/2
2026-02-07 21:15:26,259 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_2', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-07 21:15:26,259 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-07 21:15:26,259 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-07 21:15:26,259 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 21:15:26,260 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-07 21:15:26,260 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [{"role": "user", "content": "Hi"}], "temperature": 0.5, "top_p": 0.9, "tools": null, "tool_choice": "auto"}
2026-02-07 21:15:26,260 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-07 21:15:26,260 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-07 21:15:26,261 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-07 21:15:26,261 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [], "temperature": 0.7, "tools": null, "tool_choice": "auto"}
2026-02-07 21:15:26,261 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-07 21:15:26,261 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-07 21:15:26,280 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-07 21:15:26,281 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-07 21:15:26,284 - asky.push_data - ERROR - Failed to push data to 'test_endpoint': Network error
2026-02-07 21:15:26,285 - asky.push_data - ERROR - Failed to build payload for endpoint 'test_endpoint': Missing required parameter: title
2026-02-07 21:15:26,286 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-07 21:15:26,300 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,306 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,307 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 21:15:26,311 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,311 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 21:15:26,312 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 21:15:26,316 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,316 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-07 21:15:26,318 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-07 21:15:26,322 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,322 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-07 21:15:26,323 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-07 21:15:26,326 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,330 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,335 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,335 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 21:15:26,339 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,340 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 21:15:26,343 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,343 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 21:15:26,347 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,348 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-07 21:15:26,351 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,352 - asky.research.cache - DEBUG - Cached URL http://example1.com with id=1
2026-02-07 21:15:26,352 - asky.research.cache - DEBUG - Cached URL http://example2.com with id=2
2026-02-07 21:15:26,356 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,357 - asky.research.cache - DEBUG - Scheduled background summarization for http://example.com
2026-02-07 21:15:26,357 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 21:15:26,358 - asky.research.cache - DEBUG - Background summarization completed for http://example.com
2026-02-07 21:15:26,864 - asky.research.cache - DEBUG - Shutting down research cache executor...
2026-02-07 21:15:26,865 - asky.research.cache - DEBUG - Research cache executor shutdown complete
2026-02-07 21:15:26,877 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,887 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,895 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,900 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,906 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,907 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 21:15:26,912 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,913 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 21:15:26,917 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,922 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,926 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,927 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 21:15:26,927 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-07 21:15:26,928 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-07 21:15:26,933 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,933 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 21:15:26,934 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-07 21:15:26,934 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-07 21:15:26,935 - asky.research.cache - DEBUG - Saved finding id=4
2026-02-07 21:15:26,935 - asky.research.cache - DEBUG - Saved finding id=5
2026-02-07 21:15:26,936 - asky.research.cache - DEBUG - Saved finding id=6
2026-02-07 21:15:26,936 - asky.research.cache - DEBUG - Saved finding id=7
2026-02-07 21:15:26,936 - asky.research.cache - DEBUG - Saved finding id=8
2026-02-07 21:15:26,937 - asky.research.cache - DEBUG - Saved finding id=9
2026-02-07 21:15:26,937 - asky.research.cache - DEBUG - Saved finding id=10
2026-02-07 21:15:26,941 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,941 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 21:15:26,942 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-07 21:15:26,942 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-07 21:15:26,946 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,946 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 21:15:26,947 - asky.research.cache - DEBUG - Deleted finding id=1
2026-02-07 21:15:26,951 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,954 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,955 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 21:15:26,959 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,960 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 21:15:26,960 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-07 21:15:26,964 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,965 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 21:15:26,968 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:26,968 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 21:15:26,986 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 21:15:26,987 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 21:15:26,988 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 21:15:26,989 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 21:15:26,990 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 21:15:26,991 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 21:15:26,992 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 21:15:26,993 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 21:15:26,994 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 21:15:26,994 - asky.research.embeddings - ERROR - Failed to connect to embedding API at http://localhost:1234/v1/embeddings. Is LM Studio running with an embedding model loaded?
2026-02-07 21:15:26,995 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 21:15:26,995 - asky.research.embeddings - ERROR - Embedding API request timed out after 10s
2026-02-07 21:15:26,997 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 21:15:26,998 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 21:15:26,998 - asky.research.embeddings - ERROR - Embedding API error: API error
2026-02-07 21:15:26,999 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=test-model
2026-02-07 21:15:27,522 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: url=http://localhost:1234/v1/embeddings, model=gaianet/text-embedding-nomic-embed-text-v1.5-embedding
2026-02-07 21:15:27,534 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 21:15:27,538 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-07 21:15:27,540 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-07 21:15:27,542 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 21:15:27,544 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 21:15:27,547 - asky.research.tools - DEBUG - Cache hit for http://b.com
2026-02-07 21:15:27,548 - asky.research.tools - DEBUG - Cache hit for http://a.com
2026-02-07 21:15:27,550 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 21:15:27,553 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 21:15:27,565 - asky.research.tools - DEBUG - Generating chunk embeddings for http://example.com
2026-02-07 21:15:27,566 - asky.research.tools - ERROR - RAG retrieval failed for http://example.com: DB error
2026-02-07 21:15:27,576 - asky.research.tools - WARNING - Finding embedding failed (will still be saved): Embedding API unavailable
2026-02-07 21:15:27,581 - asky.research.tools - WARNING - Semantic search unavailable: API unavailable
2026-02-07 21:15:27,601 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 21:15:27,610 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-07 21:15:27,618 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 21:15:27,619 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-07 21:15:27,627 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-07 21:15:27,627 - asky.research.vector_store - WARNING - Chroma link query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-07 21:15:27,641 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 21:15:27,647 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-07 21:15:27,650 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 21:15:27,658 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 21:15:27,658 - asky.research.vector_store - WARNING - Chroma hybrid query failed; using SQLite dense scores: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-07 21:15:27,665 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 21:15:27,668 - asky.research.vector_store - WARNING - Embedding count mismatch: 2 vs 3
2026-02-07 21:15:27,669 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-07 21:15:27,675 - asky.research.vector_store - DEBUG - Stored 5 chunk embeddings for cache_id=1
2026-02-07 21:15:27,675 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-07 21:15:27,681 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-07 21:15:27,717 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-07 21:15:27,719 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-07 21:15:27,728 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-07 21:15:27,731 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-07 21:15:27,737 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-07 21:15:27,739 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-07 21:15:27,759 - asky.core.session_manager - INFO - Session 1 reached threshold (10/5). Compacting...
2026-02-07 21:15:27,759 - asky.core.session_manager - INFO - Found 1 messages to compact for session 1
2026-02-07 21:15:27,759 - asky.core.session_manager - INFO - Compacted content length: 9 chars
2026-02-07 21:15:27,759 - asky.core.session_manager - INFO - Compaction saved for session 1
2026-02-07 21:15:27,769 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:15:27,774 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-07 21:15:27,778 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:52,724 - asky.core.engine - INFO - Starting turn 1/5
2026-02-07 21:23:52,724 - asky.core.api_client - INFO - Sending request to LLM: test-model
2026-02-07 21:23:52,725 - asky.core.api_client - DEBUG - Payload: {"model": "test-model", "messages": [{"role": "user", "content": "test"}], "tools": [], "tool_choice": "auto"}
2026-02-07 21:23:52,725 - asky.core.api_client - INFO - [test] Sent: 1 tokens
2026-02-07 21:23:52,725 - asky.core.engine - ERROR - API Error 400: 400 Client Error: Bad Request
2026-02-07 21:23:52,725 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 21:23:52,725 - asky.core.engine - INFO - Context threshold reached (628/500). Compacting...
2026-02-07 21:23:52,725 - asky.core.engine - INFO - Compaction failed to preserve history. Returning minimal context: 625 tokens.
2026-02-07 21:23:52,727 - asky.core.engine - INFO - Starting turn 1/5
2026-02-07 21:23:52,727 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 21:23:52,728 - asky.core.engine - INFO - Context threshold reached (520/100). Compacting...
2026-02-07 21:23:52,728 - asky.core.engine - DEBUG - [Smart Compaction] Found summary for URL https://example.com/long-article (dict). Replacing content.
2026-02-07 21:23:52,728 - asky.core.engine - INFO - Smart compaction successful. Reduced from 520 to 42
2026-02-07 21:23:52,730 - asky.tools - INFO - Executing custom tool command: ls "."
2026-02-07 21:23:52,731 - asky.tools - INFO - Executing custom tool command: ls "/tmp/test"
2026-02-07 21:23:52,732 - asky.tools - INFO - Executing custom tool command: echo "hello world"
2026-02-07 21:23:52,733 - asky.tools - INFO - Executing custom tool command: echo "already quoted"
2026-02-07 21:23:52,734 - asky.tools - INFO - Executing custom tool command: echo "test"
2026-02-07 21:23:52,741 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-07 21:23:52,741 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-07 21:23:52,742 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-07 21:23:52,742 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-07 21:23:52,742 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 21:23:52,742 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-07 21:23:52,743 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-07 21:23:52,743 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-07 21:23:52,743 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-07 21:23:52,743 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 21:23:52,744 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-07 21:23:52,745 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-07 21:23:52,745 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-07 21:23:52,745 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-07 21:23:52,745 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-07 21:23:52,745 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 21:23:52,745 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-07 21:23:52,745 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-07 21:23:52,745 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-07 21:23:52,745 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-07 21:23:52,745 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 21:23:52,745 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-07 21:23:52,746 - asky.email_sender - ERROR - SMTP credentials not configured. Please set ASKY_SMTP_USER and ASKY_SMTP_PASSWORD.
2026-02-07 21:23:52,747 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-07 21:23:52,747 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-07 21:23:52,747 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-07 21:23:52,747 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-07 21:23:52,747 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 21:23:52,747 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-07 21:23:52,747 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-07 21:23:52,747 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-07 21:23:52,747 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-07 21:23:52,747 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 21:23:52,747 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-07 21:23:52,747 - asky.email_sender - ERROR - Failed to send email: Auth failed
2026-02-07 21:23:52,767 - asky.rendering - WARNING - Template not found at <MagicMock name='TEMPLATE_PATH' id='4649600064'>
2026-02-07 21:23:52,769 - asky.rendering - DEBUG - Extracted title for filename: Test Content
2026-02-07 21:23:52,789 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-07 21:23:52,789 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [{"role": "user", "content": "Hi"}], "tools": null, "tool_choice": "auto"}
2026-02-07 21:23:52,789 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-07 21:23:52,789 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-07 21:23:52,790 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-07 21:23:52,790 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-07 21:23:52,790 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-07 21:23:52,791 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 1 seconds...
2026-02-07 21:23:52,791 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-07 21:23:52,792 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-07 21:23:52,792 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-07 21:23:52,792 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-07 21:23:52,792 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 5 seconds...
2026-02-07 21:23:52,792 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-07 21:23:52,793 - asky.core.engine - INFO - Starting turn 1/5
2026-02-07 21:23:52,793 - asky.core.engine - DEBUG - Tool call [71 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-07 21:23:52,793 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-07 21:23:52,793 - asky.core.engine - INFO - Starting turn 2/5
2026-02-07 21:23:52,794 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 21:23:52,797 - asky.rendering - INFO - [Opening browser: /path/to/archive/file.html]
2026-02-07 21:23:52,798 - asky.core.engine - INFO - Starting turn 1/5
2026-02-07 21:23:52,798 - asky.core.engine - DEBUG - Tool call [93 chrs]: {'id': 'call_123', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-07 21:23:52,798 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-07 21:23:52,798 - asky.core.engine - INFO - Starting turn 2/5
2026-02-07 21:23:52,799 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 21:23:52,800 - asky.core.engine - INFO - Starting turn 1/2
2026-02-07 21:23:52,800 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-07 21:23:52,800 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-07 21:23:52,800 - asky.core.engine - INFO - Starting turn 2/2
2026-02-07 21:23:52,800 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_2', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-07 21:23:52,800 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-07 21:23:52,800 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-07 21:23:52,800 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 21:23:52,801 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-07 21:23:52,802 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [{"role": "user", "content": "Hi"}], "temperature": 0.5, "top_p": 0.9, "tools": null, "tool_choice": "auto"}
2026-02-07 21:23:52,802 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-07 21:23:52,802 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-07 21:23:52,802 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-07 21:23:52,802 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [], "temperature": 0.7, "tools": null, "tool_choice": "auto"}
2026-02-07 21:23:52,802 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-07 21:23:52,803 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-07 21:23:52,821 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-07 21:23:52,822 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-07 21:23:52,825 - asky.push_data - ERROR - Failed to push data to 'test_endpoint': Network error
2026-02-07 21:23:52,826 - asky.push_data - ERROR - Failed to build payload for endpoint 'test_endpoint': Missing required parameter: title
2026-02-07 21:23:52,827 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-07 21:23:52,841 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:52,844 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:52,845 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 21:23:52,848 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:52,849 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 21:23:53,142 - chromadb.config - DEBUG - Starting component System
2026-02-07 21:23:53,142 - chromadb.config - DEBUG - Starting component Posthog
2026-02-07 21:23:53,151 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 21:23:53,156 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:53,156 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-07 21:23:53,158 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-07 21:23:53,162 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:53,163 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-07 21:23:53,164 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-07 21:23:53,168 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:53,171 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:53,175 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:53,175 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 21:23:53,179 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:53,179 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 21:23:53,183 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:53,183 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 21:23:53,188 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:53,189 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-07 21:23:53,193 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:53,194 - asky.research.cache - DEBUG - Cached URL http://example1.com with id=1
2026-02-07 21:23:53,194 - asky.research.cache - DEBUG - Cached URL http://example2.com with id=2
2026-02-07 21:23:53,198 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:53,199 - asky.research.cache - DEBUG - Scheduled background summarization for http://example.com
2026-02-07 21:23:53,199 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 21:23:53,200 - asky.research.cache - DEBUG - Background summarization completed for http://example.com
2026-02-07 21:23:53,707 - asky.research.cache - DEBUG - Shutting down research cache executor...
2026-02-07 21:23:53,707 - asky.research.cache - DEBUG - Research cache executor shutdown complete
2026-02-07 21:23:53,724 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:53,734 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:53,740 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:53,746 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:53,752 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:53,753 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 21:23:53,758 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:53,758 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 21:23:53,763 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:53,782 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:53,787 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:53,788 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 21:23:53,789 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-07 21:23:53,789 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-07 21:23:53,793 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:53,794 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 21:23:53,794 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-07 21:23:53,794 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-07 21:23:53,795 - asky.research.cache - DEBUG - Saved finding id=4
2026-02-07 21:23:53,795 - asky.research.cache - DEBUG - Saved finding id=5
2026-02-07 21:23:53,796 - asky.research.cache - DEBUG - Saved finding id=6
2026-02-07 21:23:53,796 - asky.research.cache - DEBUG - Saved finding id=7
2026-02-07 21:23:53,796 - asky.research.cache - DEBUG - Saved finding id=8
2026-02-07 21:23:53,797 - asky.research.cache - DEBUG - Saved finding id=9
2026-02-07 21:23:53,797 - asky.research.cache - DEBUG - Saved finding id=10
2026-02-07 21:23:53,801 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:53,801 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 21:23:53,802 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-07 21:23:53,802 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-07 21:23:53,806 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:53,806 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 21:23:53,807 - asky.research.cache - DEBUG - Deleted finding id=1
2026-02-07 21:23:53,810 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:53,813 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:53,814 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 21:23:53,818 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:53,819 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 21:23:53,819 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-07 21:23:53,823 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:53,824 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 21:23:53,827 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:53,828 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 21:23:53,850 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-07 21:23:53,850 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-07 21:23:53,851 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-07 21:23:53,852 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-07 21:23:53,853 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-07 21:23:53,854 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-07 21:23:53,854 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-07 21:23:53,855 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-07 21:23:53,856 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-07 21:23:53,857 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-07 21:23:53,861 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=gaianet/text-embedding-nomic-embed-text-v1.5-embedding, device=cpu
2026-02-07 21:23:53,865 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 21:23:53,865 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=gaianet/text-embedding-nomic-embed-text-v1.5-embedding, device=cpu
2026-02-07 21:23:53,867 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-07 21:23:53,868 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-07 21:23:53,869 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 21:23:53,870 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 21:23:53,872 - asky.research.tools - DEBUG - Cache hit for http://b.com
2026-02-07 21:23:53,872 - asky.research.tools - DEBUG - Cache hit for http://a.com
2026-02-07 21:23:53,874 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 21:23:53,877 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 21:23:53,886 - asky.research.tools - DEBUG - Generating chunk embeddings for http://example.com
2026-02-07 21:23:53,887 - asky.research.tools - ERROR - RAG retrieval failed for http://example.com: DB error
2026-02-07 21:23:53,895 - asky.research.tools - WARNING - Finding embedding failed (will still be saved): Embedding API unavailable
2026-02-07 21:23:53,900 - asky.research.tools - WARNING - Semantic search unavailable: API unavailable
2026-02-07 21:23:53,917 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 21:23:53,927 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-07 21:23:53,936 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 21:23:53,936 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-07 21:23:53,944 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-07 21:23:53,944 - asky.research.vector_store - WARNING - Chroma link query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-07 21:23:53,957 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 21:23:53,964 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-07 21:23:53,967 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 21:23:53,976 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 21:23:53,976 - asky.research.vector_store - WARNING - Chroma hybrid query failed; using SQLite dense scores: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-07 21:23:53,984 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 21:23:53,987 - asky.research.vector_store - WARNING - Embedding count mismatch: 2 vs 3
2026-02-07 21:23:53,987 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-07 21:23:53,995 - asky.research.vector_store - DEBUG - Stored 5 chunk embeddings for cache_id=1
2026-02-07 21:23:53,995 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-07 21:23:54,002 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-07 21:23:54,012 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-07 21:23:54,015 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-07 21:23:54,023 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-07 21:23:54,026 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-07 21:23:54,031 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-07 21:23:54,034 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-07 21:23:54,055 - asky.core.session_manager - INFO - Session 1 reached threshold (10/5). Compacting...
2026-02-07 21:23:54,055 - asky.core.session_manager - INFO - Found 1 messages to compact for session 1
2026-02-07 21:23:54,055 - asky.core.session_manager - INFO - Compacted content length: 9 chars
2026-02-07 21:23:54,055 - asky.core.session_manager - INFO - Compaction saved for session 1
2026-02-07 21:23:54,065 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 21:23:54,071 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-07 21:23:54,075 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:48,136 - asky.core.engine - INFO - Starting turn 1/5
2026-02-07 23:16:48,137 - asky.core.api_client - INFO - Sending request to LLM: test-model
2026-02-07 23:16:48,137 - asky.core.api_client - DEBUG - Payload: {"model": "test-model", "messages": [{"role": "user", "content": "test"}], "tools": [], "tool_choice": "auto"}
2026-02-07 23:16:48,137 - asky.core.api_client - INFO - [test] Sent: 1 tokens
2026-02-07 23:16:48,137 - asky.core.engine - ERROR - API Error 400: 400 Client Error: Bad Request
2026-02-07 23:16:48,137 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 23:16:48,138 - asky.core.engine - INFO - Context threshold reached (628/500). Compacting...
2026-02-07 23:16:48,138 - asky.core.engine - INFO - Compaction failed to preserve history. Returning minimal context: 625 tokens.
2026-02-07 23:16:48,139 - asky.core.engine - INFO - Starting turn 1/5
2026-02-07 23:16:48,139 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 23:16:48,140 - asky.core.engine - INFO - Context threshold reached (520/100). Compacting...
2026-02-07 23:16:48,140 - asky.core.engine - DEBUG - [Smart Compaction] Found summary for URL https://example.com/long-article (dict). Replacing content.
2026-02-07 23:16:48,140 - asky.core.engine - INFO - Smart compaction successful. Reduced from 520 to 42
2026-02-07 23:16:48,142 - asky.tools - INFO - Executing custom tool command: ls "."
2026-02-07 23:16:48,143 - asky.tools - INFO - Executing custom tool command: ls "/tmp/test"
2026-02-07 23:16:48,144 - asky.tools - INFO - Executing custom tool command: echo "hello world"
2026-02-07 23:16:48,145 - asky.tools - INFO - Executing custom tool command: echo "already quoted"
2026-02-07 23:16:48,146 - asky.tools - INFO - Executing custom tool command: echo "test"
2026-02-07 23:16:48,152 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-07 23:16:48,155 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-07 23:16:48,155 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-07 23:16:48,155 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-07 23:16:48,155 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 23:16:48,156 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-07 23:16:48,156 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-07 23:16:48,156 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-07 23:16:48,156 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-07 23:16:48,156 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 23:16:48,156 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-07 23:16:48,158 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-07 23:16:48,158 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-07 23:16:48,158 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-07 23:16:48,158 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-07 23:16:48,158 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 23:16:48,158 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-07 23:16:48,158 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-07 23:16:48,158 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-07 23:16:48,158 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-07 23:16:48,158 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 23:16:48,158 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-07 23:16:48,159 - asky.email_sender - ERROR - SMTP credentials not configured. Please set ASKY_SMTP_USER and ASKY_SMTP_PASSWORD.
2026-02-07 23:16:48,160 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-07 23:16:48,160 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-07 23:16:48,160 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-07 23:16:48,160 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-07 23:16:48,160 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 23:16:48,160 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-07 23:16:48,160 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-07 23:16:48,160 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-07 23:16:48,160 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-07 23:16:48,160 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 23:16:48,160 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-07 23:16:48,160 - asky.email_sender - ERROR - Failed to send email: Auth failed
2026-02-07 23:16:48,180 - asky.rendering - WARNING - Template not found at <MagicMock name='TEMPLATE_PATH' id='4563236384'>
2026-02-07 23:16:48,182 - asky.rendering - DEBUG - Extracted title for filename: Test Content
2026-02-07 23:16:48,201 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-07 23:16:48,201 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [{"role": "user", "content": "Hi"}], "tools": null, "tool_choice": "auto"}
2026-02-07 23:16:48,201 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-07 23:16:48,201 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-07 23:16:48,202 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-07 23:16:48,202 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-07 23:16:48,203 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-07 23:16:48,203 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 1 seconds...
2026-02-07 23:16:48,203 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-07 23:16:48,205 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-07 23:16:48,205 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-07 23:16:48,205 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-07 23:16:48,205 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 5 seconds...
2026-02-07 23:16:48,205 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-07 23:16:48,206 - asky.core.engine - INFO - Starting turn 1/5
2026-02-07 23:16:48,206 - asky.core.engine - DEBUG - Tool call [71 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-07 23:16:48,206 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-07 23:16:48,206 - asky.core.engine - INFO - Starting turn 2/5
2026-02-07 23:16:48,206 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 23:16:48,210 - asky.rendering - INFO - [Opening browser: /path/to/archive/file.html]
2026-02-07 23:16:48,211 - asky.core.engine - INFO - Starting turn 1/5
2026-02-07 23:16:48,211 - asky.core.engine - DEBUG - Tool call [93 chrs]: {'id': 'call_123', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-07 23:16:48,211 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-07 23:16:48,211 - asky.core.engine - INFO - Starting turn 2/5
2026-02-07 23:16:48,211 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 23:16:48,212 - asky.core.engine - INFO - Starting turn 1/2
2026-02-07 23:16:48,212 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-07 23:16:48,212 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-07 23:16:48,212 - asky.core.engine - INFO - Starting turn 2/2
2026-02-07 23:16:48,212 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_2', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-07 23:16:48,212 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-07 23:16:48,212 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-07 23:16:48,212 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 23:16:48,214 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-07 23:16:48,214 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [{"role": "user", "content": "Hi"}], "temperature": 0.5, "top_p": 0.9, "tools": null, "tool_choice": "auto"}
2026-02-07 23:16:48,214 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-07 23:16:48,214 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-07 23:16:48,215 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-07 23:16:48,215 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [], "temperature": 0.7, "tools": null, "tool_choice": "auto"}
2026-02-07 23:16:48,215 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-07 23:16:48,215 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-07 23:16:48,232 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-07 23:16:48,233 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-07 23:16:48,238 - asky.push_data - ERROR - Failed to push data to 'test_endpoint': Network error
2026-02-07 23:16:48,239 - asky.push_data - ERROR - Failed to build payload for endpoint 'test_endpoint': Missing required parameter: title
2026-02-07 23:16:48,240 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-07 23:16:48,252 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:48,255 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:48,256 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 23:16:48,260 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:48,260 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 23:16:48,602 - chromadb.config - DEBUG - Starting component System
2026-02-07 23:16:48,602 - chromadb.config - DEBUG - Starting component Posthog
2026-02-07 23:16:48,630 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 23:16:48,635 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:48,636 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-07 23:16:48,637 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-07 23:16:48,641 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:48,647 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-07 23:16:48,648 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-07 23:16:48,651 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:48,655 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:48,659 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:48,660 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 23:16:48,663 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:48,664 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 23:16:48,667 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:48,668 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 23:16:48,672 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:48,673 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-07 23:16:48,676 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:48,677 - asky.research.cache - DEBUG - Cached URL http://example1.com with id=1
2026-02-07 23:16:48,677 - asky.research.cache - DEBUG - Cached URL http://example2.com with id=2
2026-02-07 23:16:48,682 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:48,682 - asky.research.cache - DEBUG - Scheduled background summarization for http://example.com
2026-02-07 23:16:48,682 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 23:16:48,683 - asky.research.cache - DEBUG - Background summarization completed for http://example.com
2026-02-07 23:16:49,190 - asky.research.cache - DEBUG - Shutting down research cache executor...
2026-02-07 23:16:49,191 - asky.research.cache - DEBUG - Research cache executor shutdown complete
2026-02-07 23:16:49,205 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:49,215 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:49,222 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:49,229 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:49,235 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:49,235 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 23:16:49,240 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:49,241 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 23:16:49,246 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:49,251 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:49,255 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:49,256 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 23:16:49,256 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-07 23:16:49,257 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-07 23:16:49,260 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:49,261 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 23:16:49,261 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-07 23:16:49,262 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-07 23:16:49,262 - asky.research.cache - DEBUG - Saved finding id=4
2026-02-07 23:16:49,263 - asky.research.cache - DEBUG - Saved finding id=5
2026-02-07 23:16:49,263 - asky.research.cache - DEBUG - Saved finding id=6
2026-02-07 23:16:49,264 - asky.research.cache - DEBUG - Saved finding id=7
2026-02-07 23:16:49,264 - asky.research.cache - DEBUG - Saved finding id=8
2026-02-07 23:16:49,264 - asky.research.cache - DEBUG - Saved finding id=9
2026-02-07 23:16:49,265 - asky.research.cache - DEBUG - Saved finding id=10
2026-02-07 23:16:49,269 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:49,269 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 23:16:49,270 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-07 23:16:49,270 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-07 23:16:49,274 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:49,274 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 23:16:49,275 - asky.research.cache - DEBUG - Deleted finding id=1
2026-02-07 23:16:49,278 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:49,282 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:49,283 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 23:16:49,287 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:49,288 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 23:16:49,289 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-07 23:16:49,292 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:49,293 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 23:16:49,296 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:49,297 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 23:16:49,319 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-07 23:16:49,320 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-07 23:16:49,320 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-07 23:16:49,321 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-07 23:16:49,322 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-07 23:16:49,323 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-07 23:16:49,324 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-07 23:16:49,324 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-07 23:16:49,325 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-07 23:16:49,326 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-07 23:16:49,329 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=gaianet/text-embedding-nomic-embed-text-v1.5-embedding, device=cpu
2026-02-07 23:16:49,333 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 23:16:49,333 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=gaianet/text-embedding-nomic-embed-text-v1.5-embedding, device=cpu
2026-02-07 23:16:49,337 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-07 23:16:49,338 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-07 23:16:49,339 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 23:16:49,341 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 23:16:49,342 - asky.research.tools - DEBUG - Cache hit for http://b.com
2026-02-07 23:16:49,343 - asky.research.tools - DEBUG - Cache hit for http://a.com
2026-02-07 23:16:49,344 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 23:16:49,345 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 23:16:49,355 - asky.research.tools - DEBUG - Generating chunk embeddings for http://example.com
2026-02-07 23:16:49,356 - asky.research.tools - ERROR - RAG retrieval failed for http://example.com: DB error
2026-02-07 23:16:49,364 - asky.research.tools - WARNING - Finding embedding failed (will still be saved): Embedding API unavailable
2026-02-07 23:16:49,368 - asky.research.tools - WARNING - Semantic search unavailable: API unavailable
2026-02-07 23:16:49,387 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 23:16:49,396 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-07 23:16:49,406 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 23:16:49,407 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-07 23:16:49,416 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-07 23:16:49,416 - asky.research.vector_store - WARNING - Chroma link query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-07 23:16:49,428 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 23:16:49,436 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-07 23:16:49,439 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 23:16:49,449 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 23:16:49,449 - asky.research.vector_store - WARNING - Chroma hybrid query failed; using SQLite dense scores: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-07 23:16:49,457 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 23:16:49,460 - asky.research.vector_store - WARNING - Embedding count mismatch: 2 vs 3
2026-02-07 23:16:49,461 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-07 23:16:49,468 - asky.research.vector_store - DEBUG - Stored 5 chunk embeddings for cache_id=1
2026-02-07 23:16:49,468 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-07 23:16:49,476 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-07 23:16:49,486 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-07 23:16:49,489 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-07 23:16:49,498 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-07 23:16:49,501 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-07 23:16:49,507 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-07 23:16:49,510 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-07 23:16:49,530 - asky.core.session_manager - INFO - Session 1 reached threshold (10/5). Compacting...
2026-02-07 23:16:49,530 - asky.core.session_manager - INFO - Found 1 messages to compact for session 1
2026-02-07 23:16:49,530 - asky.core.session_manager - INFO - Compacted content length: 9 chars
2026-02-07 23:16:49,531 - asky.core.session_manager - INFO - Compaction saved for session 1
2026-02-07 23:16:49,540 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:16:49,547 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-07 23:16:49,551 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:25:59,192 - asky.core.engine - INFO - Starting turn 1/5
2026-02-07 23:25:59,193 - asky.core.api_client - INFO - Sending request to LLM: test-model
2026-02-07 23:25:59,193 - asky.core.api_client - DEBUG - Payload: {"model": "test-model", "messages": [{"role": "user", "content": "test"}], "tools": [], "tool_choice": "auto"}
2026-02-07 23:25:59,193 - asky.core.api_client - INFO - [test] Sent: 1 tokens
2026-02-07 23:25:59,193 - asky.core.engine - ERROR - API Error 400: 400 Client Error: Bad Request
2026-02-07 23:25:59,193 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 23:25:59,194 - asky.core.engine - INFO - Context threshold reached (628/500). Compacting...
2026-02-07 23:25:59,194 - asky.core.engine - INFO - Compaction failed to preserve history. Returning minimal context: 625 tokens.
2026-02-07 23:25:59,194 - asky.core.engine - INFO - Starting turn 1/5
2026-02-07 23:25:59,195 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 23:25:59,195 - asky.core.engine - INFO - Context threshold reached (520/100). Compacting...
2026-02-07 23:25:59,195 - asky.core.engine - DEBUG - [Smart Compaction] Found summary for URL https://example.com/long-article (dict). Replacing content.
2026-02-07 23:25:59,195 - asky.core.engine - INFO - Smart compaction successful. Reduced from 520 to 42
2026-02-07 23:25:59,197 - asky.tools - INFO - Executing custom tool command: ls "."
2026-02-07 23:25:59,198 - asky.tools - INFO - Executing custom tool command: ls "/tmp/test"
2026-02-07 23:25:59,199 - asky.tools - INFO - Executing custom tool command: echo "hello world"
2026-02-07 23:25:59,201 - asky.tools - INFO - Executing custom tool command: echo "already quoted"
2026-02-07 23:25:59,202 - asky.tools - INFO - Executing custom tool command: echo "test"
2026-02-07 23:25:59,209 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-07 23:25:59,210 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-07 23:25:59,210 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-07 23:25:59,210 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-07 23:25:59,210 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 23:25:59,211 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-07 23:25:59,211 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-07 23:25:59,211 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-07 23:25:59,211 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-07 23:25:59,211 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 23:25:59,212 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-07 23:25:59,213 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-07 23:25:59,213 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-07 23:25:59,213 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-07 23:25:59,213 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-07 23:25:59,213 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 23:25:59,213 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-07 23:25:59,213 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-07 23:25:59,213 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-07 23:25:59,213 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-07 23:25:59,213 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 23:25:59,213 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-07 23:25:59,214 - asky.email_sender - ERROR - SMTP credentials not configured. Please set ASKY_SMTP_USER and ASKY_SMTP_PASSWORD.
2026-02-07 23:25:59,215 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.fenced_code.FencedCodeExtension".
2026-02-07 23:25:59,215 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.footnotes.FootnoteExtension".
2026-02-07 23:25:59,215 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.attr_list.AttrListExtension".
2026-02-07 23:25:59,215 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.def_list.DefListExtension".
2026-02-07 23:25:59,215 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 23:25:59,215 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.abbr.AbbrExtension".
2026-02-07 23:25:59,215 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.md_in_html.MarkdownInHtmlExtension".
2026-02-07 23:25:59,215 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.extra.ExtraExtension".
2026-02-07 23:25:59,215 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.codehilite.CodeHiliteExtension".
2026-02-07 23:25:59,216 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.tables.TableExtension".
2026-02-07 23:25:59,216 - MARKDOWN - DEBUG - Successfully loaded extension "markdown.extensions.toc.TocExtension".
2026-02-07 23:25:59,216 - asky.email_sender - ERROR - Failed to send email: Auth failed
2026-02-07 23:25:59,233 - asky.rendering - WARNING - Template not found at <MagicMock name='TEMPLATE_PATH' id='4580161728'>
2026-02-07 23:25:59,236 - asky.rendering - DEBUG - Extracted title for filename: Test Content
2026-02-07 23:25:59,255 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-07 23:25:59,255 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [{"role": "user", "content": "Hi"}], "tools": null, "tool_choice": "auto"}
2026-02-07 23:25:59,255 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-07 23:25:59,255 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-07 23:25:59,256 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-07 23:25:59,256 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-07 23:25:59,256 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-07 23:25:59,257 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 1 seconds...
2026-02-07 23:25:59,257 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-07 23:25:59,258 - asky.core.api_client - INFO - Sending request to LLM: q34
2026-02-07 23:25:59,258 - asky.core.api_client - DEBUG - Payload: {"model": "q34", "messages": [], "tools": null, "tool_choice": "auto"}
2026-02-07 23:25:59,258 - asky.core.api_client - INFO - [q34] Sent: 0 tokens
2026-02-07 23:25:59,258 - asky.core.api_client - INFO - Rate limit exceeded (429). Retrying in 5 seconds...
2026-02-07 23:25:59,258 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Success'}
2026-02-07 23:25:59,259 - asky.core.engine - INFO - Starting turn 1/5
2026-02-07 23:25:59,259 - asky.core.engine - DEBUG - Tool call [71 chrs]: {'id': 'call_1', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-07 23:25:59,259 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-07 23:25:59,259 - asky.core.engine - INFO - Starting turn 2/5
2026-02-07 23:25:59,260 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 23:25:59,263 - asky.rendering - INFO - [Opening browser: /path/to/archive/file.html]
2026-02-07 23:25:59,264 - asky.core.engine - INFO - Starting turn 1/5
2026-02-07 23:25:59,264 - asky.core.engine - DEBUG - Tool call [93 chrs]: {'id': 'call_123', 'type': 'function', 'function': {'name': 'web_search', 'arguments': '{}'}}
2026-02-07 23:25:59,264 - asky.core.engine - DEBUG - Tool result [29 chrs]: {'results': 'search results'}
2026-02-07 23:25:59,264 - asky.core.engine - INFO - Starting turn 2/5
2026-02-07 23:25:59,264 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 23:25:59,265 - asky.core.engine - INFO - Starting turn 1/2
2026-02-07 23:25:59,265 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_1', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-07 23:25:59,265 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-07 23:25:59,265 - asky.core.engine - INFO - Starting turn 2/2
2026-02-07 23:25:59,265 - asky.core.engine - DEBUG - Tool call [65 chrs]: {'id': 'call_2', 'function': {'name': 'test', 'arguments': '{}'}}
2026-02-07 23:25:59,265 - asky.core.engine - DEBUG - Tool result [16 chrs]: {'result': 'ok'}
2026-02-07 23:25:59,265 - asky.core.engine - INFO - Max turns reached. Forcing graceful exit.
2026-02-07 23:25:59,265 - asky.core.engine - INFO - 
Query completed in 0.00 seconds
2026-02-07 23:25:59,268 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-07 23:25:59,268 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [{"role": "user", "content": "Hi"}], "temperature": 0.5, "top_p": 0.9, "tools": null, "tool_choice": "auto"}
2026-02-07 23:25:59,268 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-07 23:25:59,268 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-07 23:25:59,269 - asky.core.api_client - INFO - Sending request to LLM: test-v1
2026-02-07 23:25:59,269 - asky.core.api_client - DEBUG - Payload: {"model": "test-v1", "messages": [], "temperature": 0.7, "tools": null, "tool_choice": "auto"}
2026-02-07 23:25:59,269 - asky.core.api_client - INFO - [test-v1] Sent: 0 tokens
2026-02-07 23:25:59,269 - asky.core.api_client - DEBUG - Response message: {'role': 'assistant', 'content': 'Hello'}
2026-02-07 23:25:59,288 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-07 23:25:59,289 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-07 23:25:59,292 - asky.push_data - ERROR - Failed to push data to 'test_endpoint': Network error
2026-02-07 23:25:59,293 - asky.push_data - ERROR - Failed to build payload for endpoint 'test_endpoint': Missing required parameter: title
2026-02-07 23:25:59,294 - asky.push_data - INFO - Successfully pushed data to 'test_endpoint': 200
2026-02-07 23:25:59,307 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:25:59,311 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:25:59,311 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 23:25:59,315 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:25:59,315 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 23:25:59,637 - chromadb.config - DEBUG - Starting component System
2026-02-07 23:25:59,637 - chromadb.config - DEBUG - Starting component Posthog
2026-02-07 23:25:59,665 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 23:25:59,670 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:25:59,670 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-07 23:25:59,672 - asky.research.cache - DEBUG - Cached URL http://example.com/chunks with id=1
2026-02-07 23:25:59,676 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:25:59,676 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-07 23:25:59,677 - asky.research.cache - DEBUG - Cached URL http://example.com/links with id=1
2026-02-07 23:25:59,680 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:25:59,684 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:25:59,688 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:25:59,689 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 23:25:59,692 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:25:59,693 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 23:25:59,696 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:25:59,697 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 23:25:59,701 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:25:59,702 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-07 23:25:59,705 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:25:59,706 - asky.research.cache - DEBUG - Cached URL http://example1.com with id=1
2026-02-07 23:25:59,707 - asky.research.cache - DEBUG - Cached URL http://example2.com with id=2
2026-02-07 23:25:59,711 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:25:59,711 - asky.research.cache - DEBUG - Scheduled background summarization for http://example.com
2026-02-07 23:25:59,712 - asky.research.cache - DEBUG - Cached URL http://example.com with id=1
2026-02-07 23:25:59,712 - asky.research.cache - DEBUG - Background summarization completed for http://example.com
2026-02-07 23:26:00,220 - asky.research.cache - DEBUG - Shutting down research cache executor...
2026-02-07 23:26:00,220 - asky.research.cache - DEBUG - Research cache executor shutdown complete
2026-02-07 23:26:00,233 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:26:00,242 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:26:00,251 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:26:00,257 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:26:00,263 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:26:00,263 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 23:26:00,268 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:26:00,269 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 23:26:00,274 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:26:00,280 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:26:00,284 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:26:00,284 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 23:26:00,285 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-07 23:26:00,285 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-07 23:26:00,289 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:26:00,290 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 23:26:00,290 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-07 23:26:00,290 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-07 23:26:00,291 - asky.research.cache - DEBUG - Saved finding id=4
2026-02-07 23:26:00,291 - asky.research.cache - DEBUG - Saved finding id=5
2026-02-07 23:26:00,292 - asky.research.cache - DEBUG - Saved finding id=6
2026-02-07 23:26:00,292 - asky.research.cache - DEBUG - Saved finding id=7
2026-02-07 23:26:00,292 - asky.research.cache - DEBUG - Saved finding id=8
2026-02-07 23:26:00,293 - asky.research.cache - DEBUG - Saved finding id=9
2026-02-07 23:26:00,293 - asky.research.cache - DEBUG - Saved finding id=10
2026-02-07 23:26:00,297 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:26:00,298 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 23:26:00,298 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-07 23:26:00,298 - asky.research.cache - DEBUG - Saved finding id=3
2026-02-07 23:26:00,302 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:26:00,303 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 23:26:00,303 - asky.research.cache - DEBUG - Deleted finding id=1
2026-02-07 23:26:00,307 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:26:00,311 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:26:00,311 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 23:26:00,316 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:26:00,316 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 23:26:00,317 - asky.research.cache - DEBUG - Saved finding id=2
2026-02-07 23:26:00,320 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:26:00,321 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 23:26:00,324 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:26:00,324 - asky.research.cache - DEBUG - Saved finding id=1
2026-02-07 23:26:00,347 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-07 23:26:00,347 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-07 23:26:00,348 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-07 23:26:00,349 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-07 23:26:00,350 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-07 23:26:00,351 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-07 23:26:00,351 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-07 23:26:00,352 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-07 23:26:00,353 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-07 23:26:00,354 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=test-model, device=cpu
2026-02-07 23:26:00,357 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=gaianet/text-embedding-nomic-embed-text-v1.5-embedding, device=cpu
2026-02-07 23:26:00,361 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 23:26:00,361 - asky.research.embeddings - DEBUG - EmbeddingClient initialized: model=gaianet/text-embedding-nomic-embed-text-v1.5-embedding, device=cpu
2026-02-07 23:26:00,363 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-07 23:26:00,365 - asky.research.tools - DEBUG - Fetching http://example.com
2026-02-07 23:26:00,365 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 23:26:00,367 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 23:26:00,368 - asky.research.tools - DEBUG - Cache hit for http://b.com
2026-02-07 23:26:00,369 - asky.research.tools - DEBUG - Cache hit for http://a.com
2026-02-07 23:26:00,370 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 23:26:00,372 - asky.research.tools - DEBUG - Cache hit for http://example.com
2026-02-07 23:26:00,381 - asky.research.tools - DEBUG - Generating chunk embeddings for http://example.com
2026-02-07 23:26:00,382 - asky.research.tools - ERROR - RAG retrieval failed for http://example.com: DB error
2026-02-07 23:26:00,391 - asky.research.tools - WARNING - Finding embedding failed (will still be saved): Embedding API unavailable
2026-02-07 23:26:00,396 - asky.research.tools - WARNING - Semantic search unavailable: API unavailable
2026-02-07 23:26:00,414 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 23:26:00,423 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-07 23:26:00,432 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 23:26:00,432 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-07 23:26:00,441 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-07 23:26:00,442 - asky.research.vector_store - WARNING - Chroma link query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-07 23:26:00,454 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 23:26:00,461 - asky.research.vector_store - DEBUG - Stored 2 link embeddings for cache_id=1
2026-02-07 23:26:00,464 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 23:26:00,474 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 23:26:00,475 - asky.research.vector_store - WARNING - Chroma hybrid query failed; using SQLite dense scores: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-07 23:26:00,483 - asky.research.vector_store - DEBUG - Stored 2 chunk embeddings for cache_id=1
2026-02-07 23:26:00,485 - asky.research.vector_store - WARNING - Embedding count mismatch: 2 vs 3
2026-02-07 23:26:00,486 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-07 23:26:00,493 - asky.research.vector_store - DEBUG - Stored 5 chunk embeddings for cache_id=1
2026-02-07 23:26:00,494 - asky.research.vector_store - WARNING - Chroma chunk query failed; falling back to SQLite: Expected where to have exactly one operator, got {'cache_id': 1, 'embedding_model': 'test-model'} in query.
2026-02-07 23:26:00,502 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-07 23:26:00,513 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-07 23:26:00,516 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-07 23:26:00,525 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-07 23:26:00,528 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-07 23:26:00,534 - asky.research.vector_store - DEBUG - Stored embedding for finding id=1
2026-02-07 23:26:00,537 - asky.research.vector_store - DEBUG - Stored embedding for finding id=2
2026-02-07 23:26:00,556 - asky.core.session_manager - INFO - Session 1 reached threshold (10/5). Compacting...
2026-02-07 23:26:00,556 - asky.core.session_manager - INFO - Found 1 messages to compact for session 1
2026-02-07 23:26:00,557 - asky.core.session_manager - INFO - Compacted content length: 9 chars
2026-02-07 23:26:00,557 - asky.core.session_manager - INFO - Compaction saved for session 1
2026-02-07 23:26:00,571 - asky.research.cache - DEBUG - Research cache database initialized
2026-02-07 23:26:00,578 - asky.research.cache - INFO - Cleaned up 1 expired cache entries
2026-02-07 23:26:00,582 - asky.research.cache - DEBUG - Research cache database initialized
